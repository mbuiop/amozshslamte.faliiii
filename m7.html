<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ§¾ Ù…Ø¯ÛŒØ±ÛŒØª Ú†Ú© Ùˆ Ø³ÙØªÙ‡ - Ø³ÛŒØ³ØªÙ… Ø­Ø³Ø§Ø¨Ø¯Ø§Ø±ÛŒ</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #00b894;
            --primary-dark: #00a085;
            --secondary: #2d3436;
            --accent: #0984e3;
            --danger: #e74c3c;
            --warning: #f39c12;
            --success: #27ae60;
            --purple: #9b59b6;
            --check-color: #8e44ad;
            --dark: #2d3436;
            --light: #dfe6e9;
            --gradient: linear-gradient(135deg, var(--primary), var(--secondary));
            --rainbow: linear-gradient(90deg, #ff7675, #fd79a8, #74b9ff, #55efc4, #ffeaa7, #ff7675);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Vazir', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #2d3436 0%, #636e72 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
            overflow-x: hidden;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            min-height: calc(100vh - 40px);
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.25);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .header {
            background: var(--gradient);
            color: white;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            position: relative;
        }

        .header h1 {
            font-size: 1.5em;
            margin-bottom: 5px;
            font-weight: 800;
        }

        .header p {
            opacity: 0.9;
            font-size: 0.9em;
        }

        .back-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 700;
            transition: all 0.3s;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .back-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }

        .form-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            margin-bottom: 20px;
            border: 1px solid #f0f0f0;
            position: relative;
            overflow: hidden;
        }

        .form-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: var(--gradient);
        }

        .form-title {
            font-size: 1.2em;
            font-weight: 800;
            margin-bottom: 20px;
            color: var(--dark);
            text-align: center;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--primary);
        }

        .form-group {
            margin-bottom: 18px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 700;
            color: var(--dark);
            font-size: 0.9em;
        }

        input, select, textarea {
            width: 100%;
            padding: 14px;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            font-size: 15px;
            transition: all 0.3s;
            background: #fafafa;
            font-family: inherit;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary);
            background: white;
            box-shadow: 0 0 0 3px rgba(0, 184, 148, 0.1);
        }

        .btn {
            background: var(--gradient);
            color: white;
            border: none;
            padding: 16px 25px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 15px;
            font-weight: 800;
            transition: all 0.3s;
            width: 100%;
            box-shadow: 0 5px 15px rgba(0, 184, 148, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 184, 148, 0.4);
        }

        .btn:active {
            transform: translateY(1px);
        }

        .btn.loading::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--rainbow);
            background-size: 200% 100%;
            animation: rainbow-loading 1.5s linear infinite;
        }

        @keyframes rainbow-loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        .btn-check {
            background: linear-gradient(135deg, var(--check-color), #8e44ad);
            box-shadow: 0 5px 15px rgba(142, 68, 173, 0.3);
        }

        .btn-check:hover {
            box-shadow: 0 8px 20px rgba(142, 68, 173, 0.4);
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--danger), #c0392b);
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.3);
        }

        .btn-danger:hover {
            box-shadow: 0 8px 20px rgba(231, 76, 60, 0.4);
        }

        .success-message {
            background: var(--success);
            color: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            margin: 15px 0;
            font-weight: 700;
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.4);
            animation: slideIn 0.5s ease-out;
            font-size: 0.9em;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .info-message {
            background: linear-gradient(135deg, var(--accent), #0984e3);
            color: white;
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            box-shadow: 0 6px 18px rgba(52, 152, 219, 0.3);
            text-align: center;
            border: 2px solid white;
        }

        .info-title {
            font-size: 1.1em;
            font-weight: 800;
            margin-bottom: 12px;
        }

        .info-content {
            font-size: 0.9em;
            line-height: 1.5;
            opacity: 0.95;
        }

        .transaction-list {
            margin-top: 20px;
        }

        .transaction-item {
            background: white;
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-right: 5px solid var(--check-color);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .transaction-item:hover {
            transform: translateX(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

        .transaction-item.overdue {
            border-right-color: var(--danger);
            background: linear-gradient(135deg, #fff, #ffeaea);
            animation: pulse-alert 2s infinite;
        }

        .transaction-item.due-soon {
            border-right-color: var(--warning);
            background: linear-gradient(135deg, #fff, #fff9e6);
        }

        .transaction-item.completed {
            border-right-color: var(--success);
            background: linear-gradient(135deg, #fff, #f0fff4);
            opacity: 0.8;
        }

        @keyframes pulse-alert {
            0% { box-shadow: 0 5px 15px rgba(231, 76, 60, 0.3); }
            50% { box-shadow: 0 5px 20px rgba(231, 76, 60, 0.6); }
            100% { box-shadow: 0 5px 15px rgba(231, 76, 60, 0.3); }
        }

        .transaction-details {
            flex: 1;
        }

        .transaction-title {
            font-weight: 800;
            margin-bottom: 8px;
            color: var(--dark);
            font-size: 1em;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .transaction-meta {
            font-size: 0.85em;
            color: #7f8c8d;
            margin-bottom: 8px;
        }

        .transaction-amount {
            font-weight: 800;
            font-size: 1.1em;
            text-align: left;
        }

        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75em;
            font-weight: 700;
            margin-top: 8px;
        }

        .status-pending {
            background: var(--warning);
            color: white;
        }

        .status-completed {
            background: var(--success);
            color: white;
        }

        .status-overdue {
            background: var(--danger);
            color: white;
        }

        .check-controls {
            display: flex;
            gap: 8px;
            margin-top: 12px;
            flex-wrap: wrap;
        }

        .control-btn {
            padding: 8px 15px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.8em;
            font-weight: 700;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .control-btn.complete {
            background: var(--success);
            color: white;
        }

        .control-btn.edit {
            background: var(--accent);
            color: white;
        }

        .control-btn.delete {
            background: var(--danger);
            color: white;
        }

        .control-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .summary-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .summary-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            text-align: center;
            transition: transform 0.3s;
            border-top: 4px solid var(--check-color);
        }

        .summary-card:hover {
            transform: translateY(-5px);
        }

        .summary-card.total {
            border-top-color: var(--check-color);
        }

        .summary-card.pending {
            border-top-color: var(--warning);
        }

        .summary-card.overdue {
            border-top-color: var(--danger);
        }

        .summary-card.completed {
            border-top-color: var(--success);
        }

        .summary-card h3 {
            font-size: 0.85em;
            margin-bottom: 10px;
            color: #7f8c8d;
        }

        .summary-card .amount {
            font-size: 1.4em;
            font-weight: 800;
        }

        .chart-container {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            margin: 20px 0;
            height: 300px;
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #7f8c8d;
        }

        .empty-state .icon {
            font-size: 3em;
            margin-bottom: 15px;
            opacity: 0.5;
        }

        .empty-state p {
            font-size: 1em;
        }

        .filter-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-tab {
            padding: 10px 20px;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 700;
            font-size: 0.85em;
            transition: all 0.3s;
        }

        .filter-tab.active {
            background: var(--check-color);
            color: white;
            border-color: var(--check-color);
        }

        .filter-tab:hover {
            transform: translateY(-2px);
        }

        .reminder-section {
            background: linear-gradient(135deg, #ffeaa7, #fdcb6e);
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(253, 203, 110, 0.3);
        }

        .reminder-title {
            font-weight: 800;
            margin-bottom: 12px;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .reminder-list {
            margin-top: 15px;
        }

        .reminder-item {
            background: rgba(255, 255, 255, 0.8);
            padding: 12px 15px;
            margin-bottom: 8px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .reminder-details {
            flex: 1;
        }

        .reminder-issuer {
            font-weight: 700;
            font-size: 0.9em;
        }

        .reminder-date {
            font-size: 0.8em;
            color: #7f8c8d;
        }

        .reminder-amount {
            font-weight: 800;
            font-size: 0.9em;
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .container {
                min-height: calc(100vh - 20px);
                border-radius: 15px;
            }
            
            .content {
                padding: 15px;
            }
            
            .form-container {
                padding: 15px;
            }
            
            .summary-cards {
                grid-template-columns: 1fr 1fr;
            }
            
            .check-controls {
                flex-direction: column;
            }
            
            .control-btn {
                width: 100%;
                justify-content: center;
            }
        }

        @media (max-width: 480px) {
            .header {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 1.3em;
            }
            
            .back-btn {
                top: 15px;
                right: 15px;
                padding: 8px 12px;
                font-size: 0.9em;
            }
            
            .chart-container {
                height: 250px;
                padding: 15px;
            }
            
            .summary-cards {
                grid-template-columns: 1fr;
            }
            
            .filter-tabs {
                justify-content: center;
            }
            
            .filter-tab {
                flex: 1;
                text-align: center;
                min-width: 100px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <a href="index.html" class="back-btn">
                <span>â†</span> Ø¨Ø§Ø²Ú¯Ø´Øª
            </a>
            <h1>ğŸ§¾ Ù…Ø¯ÛŒØ±ÛŒØª Ú†Ú© Ùˆ Ø³ÙØªÙ‡</h1>
            <p>Ù¾ÛŒÚ¯ÛŒØ±ÛŒ Ùˆ Ù…Ø¯ÛŒØ±ÛŒØª Ø§Ø³Ù†Ø§Ø¯ Ù…Ø§Ù„ÛŒ Ø¯Ø±ÛŒØ§ÙØªÛŒ Ùˆ Ù¾Ø±Ø¯Ø§Ø®ØªÛŒ</p>
        </div>

        <div class="content">
            <!-- Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ø®Ù„Ø§ØµÙ‡ -->
            <div class="summary-cards">
                <div class="summary-card total">
                    <h3>ğŸ’° Ú©Ù„ Ù…Ø¨Ù„Øº Ú†Ú©â€ŒÙ‡Ø§</h3>
                    <div class="amount" id="total-amount">0 ØªÙˆÙ…Ø§Ù†</div>
                </div>
                <div class="summary-card pending">
                    <h3>â³ Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±</h3>
                    <div class="amount" id="pending-amount">0 ØªÙˆÙ…Ø§Ù†</div>
                </div>
                <div class="summary-card overdue">
                    <h3>ğŸš¨ Ù…Ø¹ÙˆÙ‚Ù‡</h3>
                    <div class="amount" id="overdue-amount">0 ØªÙˆÙ…Ø§Ù†</div>
                </div>
                <div class="summary-card completed">
                    <h3>âœ… ÙˆØµÙˆÙ„ Ø´Ø¯Ù‡</h3>
                    <div class="amount" id="completed-amount">0 ØªÙˆÙ…Ø§Ù†</div>
                </div>
            </div>

            <!-- ØªØ¨â€ŒÙ‡Ø§ÛŒ ÙÛŒÙ„ØªØ± -->
            <div class="filter-tabs">
                <div class="filter-tab active" onclick="filterChecks('all')">Ù‡Ù…Ù‡</div>
                <div class="filter-tab" onclick="filterChecks('pending')">Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±</div>
                <div class="filter-tab" onclick="filterChecks('overdue')">Ù…Ø¹ÙˆÙ‚Ù‡</div>
                <div class="filter-tab" onclick="filterChecks('completed')">ÙˆØµÙˆÙ„ Ø´Ø¯Ù‡</div>
                <div class="filter-tab" onclick="filterChecks('due-soon')">Ù†Ø²Ø¯ÛŒÚ© Ø³Ø±Ø±Ø³ÛŒØ¯</div>
            </div>

            <!-- ÙØ±Ù… Ø«Ø¨Øª Ú†Ú©/Ø³ÙØªÙ‡ -->
            <div class="form-container">
                <h2 class="form-title">â• Ø«Ø¨Øª Ø³Ù†Ø¯ Ø¬Ø¯ÛŒØ¯</h2>
                
                <div class="form-group">
                    <label for="check-type">Ù†ÙˆØ¹ Ø³Ù†Ø¯:</label>
                    <select id="check-type">
                        <option value="check">Ú†Ú©</option>
                        <option value="promissory">Ø³ÙØªÙ‡</option>
                        <option value="bill">Ø¨Ø±Ø§Øª</option>
                        <option value="other">Ø³Ø§ÛŒØ±</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="check-amount">Ù…Ø¨Ù„Øº (ØªÙˆÙ…Ø§Ù†):</label>
                    <input type="number" id="check-amount" placeholder="Ù…Ø¨Ù„Øº Ø³Ù†Ø¯">
                </div>
                
                <div class="form-group">
                    <label for="check-due-date">ØªØ§Ø±ÛŒØ® Ø³Ø±Ø±Ø³ÛŒØ¯:</label>
                    <input type="date" id="check-due-date">
                </div>

                <div class="form-group">
                    <label for="check-issuer">ØµØ§Ø¯Ø±Ú©Ù†Ù†Ø¯Ù‡:</label>
                    <input type="text" id="check-issuer" placeholder="Ù†Ø§Ù… ØµØ§Ø¯Ø±Ú©Ù†Ù†Ø¯Ù‡">
                </div>

                <div class="form-group">
                    <label for="check-recipient">Ø°ÛŒÙ†ÙØ¹:</label>
                    <input type="text" id="check-recipient" placeholder="Ù†Ø§Ù… Ø°ÛŒÙ†ÙØ¹">
                </div>

                <div class="form-group">
                    <label for="check-bank">Ù†Ø§Ù… Ø¨Ø§Ù†Ú© (Ø¨Ø±Ø§ÛŒ Ú†Ú©):</label>
                    <input type="text" id="check-bank" placeholder="Ù†Ø§Ù… Ø¨Ø§Ù†Ú© ØµØ§Ø¯Ø±Ú©Ù†Ù†Ø¯Ù‡">
                </div>

                <div class="form-group">
                    <label for="check-number">Ø´Ù…Ø§Ø±Ù‡ Ú†Ú©/Ø³Ù†Ø¯:</label>
                    <input type="text" id="check-number" placeholder="Ø´Ù…Ø§Ø±Ù‡ Ø³Ù†Ø¯">
                </div>

                <div class="form-group">
                    <label for="check-description">ØªÙˆØ¶ÛŒØ­Ø§Øª:</label>
                    <textarea id="check-description" rows="3" placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª Ø§Ø¶Ø§ÙÛŒ"></textarea>
                </div>

                <button class="btn btn-check" onclick="addCheck()">
                    <span>ğŸ’¾</span> Ø«Ø¨Øª Ø³Ù†Ø¯
                </button>
            </div>

            <!-- Ø¨Ø®Ø´ ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒ Ø³Ø±Ø±Ø³ÛŒØ¯ -->
            <div class="reminder-section" id="reminder-section" style="display: none;">
                <div class="reminder-title">
                    <span>â°</span> ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒ Ø³Ø±Ø±Ø³ÛŒØ¯ Ù†Ø²Ø¯ÛŒÚ©
                </div>
                <div class="reminder-list" id="reminder-list">
                    <!-- Ù„ÛŒØ³Øª ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒâ€ŒÙ‡Ø§ -->
                </div>
            </div>

            <!-- Ù†Ù…ÙˆØ¯Ø§Ø± ØªØ­Ù„ÛŒÙ„ -->
            <div class="form-container">
                <h2 class="form-title">ğŸ“Š ØªØ­Ù„ÛŒÙ„ Ú†Ú©â€ŒÙ‡Ø§ Ùˆ Ø³ÙØªÙ‡â€ŒÙ‡Ø§</h2>
                <div class="chart-container">
                    <canvas id="checksChart"></canvas>
                </div>
            </div>

            <!-- Ù„ÛŒØ³Øª Ú†Ú©â€ŒÙ‡Ø§ Ùˆ Ø³ÙØªÙ‡â€ŒÙ‡Ø§ -->
            <div class="form-container">
                <h2 class="form-title">ğŸ“‹ Ù„ÛŒØ³Øª Ø§Ø³Ù†Ø§Ø¯ Ù…Ø§Ù„ÛŒ</h2>
                <div class="transaction-list" id="checks-list">
                    <!-- Ú†Ú©â€ŒÙ‡Ø§ Ùˆ Ø³ÙØªÙ‡â€ŒÙ‡Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
                </div>
                
                <button class="btn btn-danger" onclick="clearAllChecks()" style="margin-top: 15px;">
                    <span>ğŸ—‘ï¸</span> Ø­Ø°Ù ØªÙ…Ø§Ù… Ú†Ú©â€ŒÙ‡Ø§ Ùˆ Ø³ÙØªÙ‡â€ŒÙ‡Ø§
                </button>
            </div>
        </div>
    </div>

    <script>
        // # Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ø³ÛŒØ³ØªÙ…
        let checks = JSON.parse(localStorage.getItem('checks')) || [];
        let checksChart = null;
        let currentFilter = 'all';

        // # Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ù‡Ù†Ú¯Ø§Ù… Ù„ÙˆØ¯ ØµÙØ­Ù‡
        window.onload = function() {
            renderChecks();
            updateSummaryCards();
            initChecksChart();
            checkDueDates();
            
            // ØªÙ†Ø¸ÛŒÙ… ØªØ§Ø±ÛŒØ® Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ø¨Ø±Ø§ÛŒ Ø§Ù…Ø±ÙˆØ²
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('check-due-date').value = today;
        };

        // # Ø§ÙØ²ÙˆØ¯Ù† Ú†Ú©/Ø³ÙØªÙ‡ Ø¬Ø¯ÛŒØ¯
        function addCheck() {
            const button = event.target;
            addLoading(button);
            
            setTimeout(() => {
                const type = document.getElementById('check-type').value;
                const amount = parseInt(document.getElementById('check-amount').value);
                const dueDate = document.getElementById('check-due-date').value;
                const issuer = document.getElementById('check-issuer').value;
                const recipient = document.getElementById('check-recipient').value;
                const bank = document.getElementById('check-bank').value;
                const number = document.getElementById('check-number').value;
                const description = document.getElementById('check-description').value;
                
                if (!amount || !dueDate || !issuer) { 
                    showErrorMessage('Ù„Ø·ÙØ§Ù‹ ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø¶Ø±ÙˆØ±ÛŒ Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯'); 
                    return; 
                }
                
                if (amount <= 0) {
                    showErrorMessage('Ù…Ø¨Ù„Øº Ø¨Ø§ÛŒØ¯ Ø¨Ø²Ø±Ú¯ØªØ± Ø§Ø² ØµÙØ± Ø¨Ø§Ø´Ø¯');
                    return;
                }
                
                // Ø¨Ø±Ø±Ø³ÛŒ ØªØ§Ø±ÛŒØ® Ø³Ø±Ø±Ø³ÛŒØ¯
                const today = new Date();
                const due = new Date(dueDate);
                let status = 'pending';
                
                if (due < today) {
                    status = 'overdue';
                }
                
                const check = {
                    id: Date.now(),
                    type,
                    amount,
                    dueDate,
                    issuer,
                    recipient: recipient || 'Ù†Ø¯Ø§Ø±Ø¯',
                    bank: bank || 'Ù†Ø¯Ø§Ø±Ø¯',
                    number: number || 'Ù†Ø¯Ø§Ø±Ø¯',
                    description: description || 'Ø¨Ø¯ÙˆÙ† ØªÙˆØ¶ÛŒØ­',
                    status,
                    date: new Date().toLocaleDateString('fa-IR'),
                    timestamp: new Date().getTime(),
                    created: new Date().toISOString()
                };
                
                checks.unshift(check);
                saveChecks();
                renderChecks();
                updateSummaryCards();
                updateChecksChart();
                checkDueDates();
                showSuccessMessage('Ø³Ù†Ø¯ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø«Ø¨Øª Ø´Ø¯');
                
                // Ø±ÛŒØ³Øª Ú©Ø±Ø¯Ù† ÙØ±Ù…
                document.getElementById('check-amount').value = '';
                document.getElementById('check-issuer').value = '';
                document.getElementById('check-recipient').value = '';
                document.getElementById('check-bank').value = '';
                document.getElementById('check-number').value = '';
                document.getElementById('check-description').value = '';
                
            }, 800);
        }

        // # Ù†Ù…Ø§ÛŒØ´ Ú†Ú©â€ŒÙ‡Ø§ Ùˆ Ø³ÙØªÙ‡â€ŒÙ‡Ø§
        function renderChecks() {
            const container = document.getElementById('checks-list');
            container.innerHTML = '';
            
            if (checks.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="icon">ğŸ“</div>
                        <p>Ù‡Ù†ÙˆØ² Ù‡ÛŒÚ† Ú†Ú© ÛŒØ§ Ø³ÙØªÙ‡â€ŒØ§ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª</p>
                    </div>
                `;
                return;
            }
            
            let filteredChecks = checks;
            
            // Ø§Ø¹Ù…Ø§Ù„ ÙÛŒÙ„ØªØ±
            if (currentFilter !== 'all') {
                filteredChecks = checks.filter(check => {
                    if (currentFilter === 'due-soon') {
                        return isDueSoon(check.dueDate) && check.status !== 'completed';
                    }
                    return check.status === currentFilter;
                });
            }
            
            // Ù…Ø±ØªØ¨â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø± Ø§Ø³Ø§Ø³ ØªØ§Ø±ÛŒØ® Ø³Ø±Ø±Ø³ÛŒØ¯
            filteredChecks.sort((a, b) => new Date(a.dueDate) - new Date(b.dueDate));
            
            filteredChecks.forEach(check => {
                const checkEl = document.createElement('div');
                checkEl.className = `transaction-item ${check.status} ${isDueSoon(check.dueDate) && check.status !== 'completed' ? 'due-soon' : ''}`;
                
                const daysUntilDue = getDaysUntilDue(check.dueDate);
                let statusText = '';
                let statusClass = '';
                
                if (check.status === 'completed') {
                    statusText = 'ÙˆØµÙˆÙ„ Ø´Ø¯Ù‡';
                    statusClass = 'status-completed';
                } else if (check.status === 'overdue') {
                    statusText = 'Ù…Ø¹ÙˆÙ‚Ù‡';
                    statusClass = 'status-overdue';
                } else if (daysUntilDue <= 3) {
                    statusText = 'Ù†Ø²Ø¯ÛŒÚ© Ø³Ø±Ø±Ø³ÛŒØ¯';
                    statusClass = 'status-overdue';
                } else {
                    statusText = 'Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±';
                    statusClass = 'status-pending';
                }
                
                checkEl.innerHTML = `
                    <div class="transaction-details">
                        <div class="transaction-title">
                            <span>${getTypeIcon(check.type)}</span>
                            ${getTypeName(check.type)} - ${check.issuer}
                        </div>
                        <div class="transaction-meta">
                            <div>Ø´Ù…Ø§Ø±Ù‡: ${check.number} | Ø¨Ø§Ù†Ú©: ${check.bank}</div>
                            <div>Ø³Ø±Ø±Ø³ÛŒØ¯: ${formatDate(check.dueDate)} | Ø°ÛŒÙ†ÙØ¹: ${check.recipient}</div>
                            <div>${check.description}</div>
                        </div>
                        <div class="status-badge ${statusClass}">${statusText}</div>
                        <div class="check-controls">
                            ${check.status !== 'completed' ? `
                                <button class="control-btn complete" onclick="markAsCompleted(${check.id})">
                                    <span>âœ…</span> ÙˆØµÙˆÙ„ Ø´Ø¯Ù‡
                                </button>
                            ` : ''}
                            <button class="control-btn edit" onclick="editCheck(${check.id})">
                                <span>âœï¸</span> ÙˆÛŒØ±Ø§ÛŒØ´
                            </button>
                            <button class="control-btn delete" onclick="deleteCheck(${check.id})">
                                <span>ğŸ—‘ï¸</span> Ø­Ø°Ù
                            </button>
                        </div>
                    </div>
                    <div class="transaction-amount">
                        ${check.amount.toLocaleString()} ØªÙˆÙ…Ø§Ù†
                        ${daysUntilDue > 0 && check.status !== 'completed' ? `
                            <div style="font-size: 0.8em; color: #7f8c8d; margin-top: 5px;">
                                ${daysUntilDue} Ø±ÙˆØ² ØªØ§ Ø³Ø±Ø±Ø³ÛŒØ¯
                            </div>
                        ` : ''}
                    </div>
                `;
                container.appendChild(checkEl);
            });
        }

        // # Ø¹Ù„Ø§Ù…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† ÙˆØµÙˆÙ„ Ø´Ø¯Ù‡
        function markAsCompleted(id) {
            if (confirm('Ø¢ÛŒØ§ Ø§ÛŒÙ† Ø³Ù†Ø¯ Ø±Ø§ Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† ÙˆØµÙˆÙ„ Ø´Ø¯Ù‡ Ø¹Ù„Ø§Ù…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯ØŸ')) {
                checks = checks.map(check => 
                    check.id === id ? { ...check, status: 'completed' } : check
                );
                saveChecks();
                renderChecks();
                updateSummaryCards();
                updateChecksChart();
                showSuccessMessage('Ø³Ù†Ø¯ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† ÙˆØµÙˆÙ„ Ø´Ø¯Ù‡ Ø¹Ù„Ø§Ù…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ Ø´Ø¯');
            }
        }

        // # ÙˆÛŒØ±Ø§ÛŒØ´ Ú†Ú©
        function editCheck(id) {
            const check = checks.find(c => c.id === id);
            if (check) {
                // Ù¾Ø± Ú©Ø±Ø¯Ù† ÙØ±Ù… Ø¨Ø§ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú†Ú©
                document.getElementById('check-type').value = check.type;
                document.getElementById('check-amount').value = check.amount;
                document.getElementById('check-due-date').value = check.dueDate;
                document.getElementById('check-issuer').value = check.issuer;
                document.getElementById('check-recipient').value = check.recipient;
                document.getElementById('check-bank').value = check.bank;
                document.getElementById('check-number').value = check.number;
                document.getElementById('check-description').value = check.description;
                
                // Ø­Ø°Ù Ú†Ú© Ø§Ø² Ù„ÛŒØ³Øª
                checks = checks.filter(c => c.id !== id);
                saveChecks();
                renderChecks();
                updateSummaryCards();
                
                showSuccessMessage('Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø³Ù†Ø¯ Ø¨Ø±Ø§ÛŒ ÙˆÛŒØ±Ø§ÛŒØ´ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯');
                
                // Ø§Ø³Ú©Ø±ÙˆÙ„ Ø¨Ù‡ Ø¨Ø§Ù„Ø§ÛŒ ÙØ±Ù…
                document.querySelector('.form-container').scrollIntoView({ 
                    behavior: 'smooth' 
                });
            }
        }

        // # Ø­Ø°Ù Ú†Ú©
        function deleteCheck(id) {
            if (confirm('Ø¢ÛŒØ§ Ø§Ø² Ø­Ø°Ù Ø§ÛŒÙ† Ø³Ù†Ø¯ Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø¯Ø§Ø±ÛŒØ¯ØŸ')) {
                checks = checks.filter(check => check.id !== id);
                saveChecks();
                renderChecks();
                updateSummaryCards();
                updateChecksChart();
                showSuccessMessage('Ø³Ù†Ø¯ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø­Ø°Ù Ø´Ø¯');
            }
        }

        // # Ø­Ø°Ù ØªÙ…Ø§Ù… Ú†Ú©â€ŒÙ‡Ø§
        function clearAllChecks() {
            if (confirm('Ø¢ÛŒØ§ Ø§Ø² Ø­Ø°Ù ØªÙ…Ø§Ù… Ú†Ú©â€ŒÙ‡Ø§ Ùˆ Ø³ÙØªÙ‡â€ŒÙ‡Ø§ Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø¯Ø§Ø±ÛŒØ¯ØŸ Ø§ÛŒÙ† Ø¹Ù…Ù„ ØºÛŒØ±Ù‚Ø§Ø¨Ù„ Ø¨Ø§Ø²Ú¯Ø´Øª Ø§Ø³Øª.')) {
                const button = event.target;
                addLoading(button);
                
                setTimeout(() => {
                    checks = []; 
                    saveChecks(); 
                    renderChecks(); 
                    updateSummaryCards();
                    updateChecksChart();
                    document.getElementById('reminder-section').style.display = 'none';
                    showSuccessMessage('ØªÙ…Ø§Ù… Ú†Ú©â€ŒÙ‡Ø§ Ùˆ Ø³ÙØªÙ‡â€ŒÙ‡Ø§ Ø­Ø°Ù Ø´Ø¯Ù†Ø¯');
                }, 800);
            }
        }

        // # ÙÛŒÙ„ØªØ± Ú©Ø±Ø¯Ù† Ú†Ú©â€ŒÙ‡Ø§
        function filterChecks(filter) {
            currentFilter = filter;
            
            // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ ØªØ¨â€ŒÙ‡Ø§ÛŒ ÙØ¹Ø§Ù„
            document.querySelectorAll('.filter-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
            
            renderChecks();
        }

        // # Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ø®Ù„Ø§ØµÙ‡
        function updateSummaryCards() {
            const totalAmount = checks.reduce((sum, check) => sum + check.amount, 0);
            const pendingAmount = checks.filter(check => check.status === 'pending').reduce((sum, check) => sum + check.amount, 0);
            const overdueAmount = checks.filter(check => check.status === 'overdue').reduce((sum, check) => sum + check.amount, 0);
            const completedAmount = checks.filter(check => check.status === 'completed').reduce((sum, check) => sum + check.amount, 0);
            
            document.getElementById('total-amount').textContent = totalAmount.toLocaleString() + ' ØªÙˆÙ…Ø§Ù†';
            document.getElementById('pending-amount').textContent = pendingAmount.toLocaleString() + ' ØªÙˆÙ…Ø§Ù†';
            document.getElementById('overdue-amount').textContent = overdueAmount.toLocaleString() + ' ØªÙˆÙ…Ø§Ù†';
            document.getElementById('completed-amount').textContent = completedAmount.toLocaleString() + ' ØªÙˆÙ…Ø§Ù†';
        }

        // # Ø¨Ø±Ø±Ø³ÛŒ Ø³Ø±Ø±Ø³ÛŒØ¯Ù‡Ø§
        function checkDueDates() {
            const today = new Date();
            const dueSoonChecks = checks.filter(check => {
                if (check.status === 'completed') return false;
                
                const dueDate = new Date(check.dueDate);
                const daysUntilDue = Math.ceil((dueDate - today) / (1000 * 60 * 60 * 24));
                
                return daysUntilDue <= 7 && daysUntilDue >= 0;
            });
            
            if (dueSoonChecks.length > 0) {
                document.getElementById('reminder-section').style.display = 'block';
                const reminderList = document.getElementById('reminder-list');
                reminderList.innerHTML = '';
                
                dueSoonChecks.forEach(check => {
                    const daysUntilDue = getDaysUntilDue(check.dueDate);
                    const reminderItem = document.createElement('div');
                    reminderItem.className = 'reminder-item';
                    reminderItem.innerHTML = `
                        <div class="reminder-details">
                            <div class="reminder-issuer">${check.issuer} - ${getTypeName(check.type)}</div>
                            <div class="reminder-date">Ø³Ø±Ø±Ø³ÛŒØ¯: ${formatDate(check.dueDate)} (${daysUntilDue} Ø±ÙˆØ² Ø¯ÛŒÚ¯Ø±)</div>
                        </div>
                        <div class="reminder-amount">${check.amount.toLocaleString()} ØªÙˆÙ…Ø§Ù†</div>
                    `;
                    reminderList.appendChild(reminderItem);
                });
            } else {
                document.getElementById('reminder-section').style.display = 'none';
            }
            
            // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ ÙˆØ¶Ø¹ÛŒØª Ú†Ú©â€ŒÙ‡Ø§ÛŒ Ù…Ø¹ÙˆÙ‚Ù‡
            checks = checks.map(check => {
                if (check.status === 'completed') return check;
                
                const dueDate = new Date(check.dueDate);
                if (dueDate < today) {
                    return { ...check, status: 'overdue' };
                }
                return check;
            });
            
            saveChecks();
        }

        // # Ù†Ù…ÙˆØ¯Ø§Ø± Ú†Ú©â€ŒÙ‡Ø§
        function initChecksChart() {
            const ctx = document.getElementById('checksChart').getContext('2d');
            checksChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±', 'Ù…Ø¹ÙˆÙ‚Ù‡', 'ÙˆØµÙˆÙ„ Ø´Ø¯Ù‡'],
                    datasets: [{
                        data: [0, 0, 0],
                        backgroundColor: ['#f39c12', '#e74c3c', '#27ae60'],
                        borderWidth: 3,
                        borderColor: '#fff',
                        hoverOffset: 15
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '60%',
                    plugins: {
                        legend: {
                            position: 'bottom',
                            rtl: true,
                            labels: {
                                font: {
                                    family: 'Vazir, Tahoma',
                                    size: 12
                                },
                                padding: 20,
                                usePointStyle: true
                            }
                        },
                        tooltip: {
                            rtl: true,
                            bodyFont: {
                                family: 'Vazir, Tahoma'
                            },
                            callbacks: {
                                label: function(context) {
                                    const label = context.label || '';
                                    const value = context.parsed;
                                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                    const percentage = total > 0 ? Math.round((value / total) * 100) : 0;
                                    return `${label}: ${value} Ø³Ù†Ø¯ (${percentage}%)`;
                                }
                            }
                        }
                    },
                    animation: {
                        animateScale: true,
                        animateRotate: true
                    }
                }
            });
            updateChecksChart();
        }
        
        function updateChecksChart() {
            if (!checksChart) return;
            
            const pendingCount = checks.filter(check => check.status === 'pending').length;
            const overdueCount = checks.filter(check => check.status === 'overdue').length;
            const completedCount = checks.filter(check => check.status === 'completed').length;
            
            checksChart.data.datasets[0].data = [pendingCount, overdueCount, completedCount];
            checksChart.update();
        }

        // # ØªÙˆØ§Ø¨Ø¹ Ú©Ù…Ú©ÛŒ
        function getTypeName(type) {
            const types = {
                'check': 'Ú†Ú©',
                'promissory': 'Ø³ÙØªÙ‡',
                'bill': 'Ø¨Ø±Ø§Øª',
                'other': 'Ø³Ù†Ø¯ Ø¯ÛŒÚ¯Ø±'
            };
            return types[type] || 'Ø³Ù†Ø¯';
        }

        function getTypeIcon(type) {
            const icons = {
                'check': 'ğŸ§¾',
                'promissory': 'ğŸ“„',
                'bill': 'ğŸ“‘',
                'other': 'ğŸ“'
            };
            return icons[type] || 'ğŸ“';
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('fa-IR');
        }

        function getDaysUntilDue(dueDate) {
            const today = new Date();
            const due = new Date(dueDate);
            const diffTime = due - today;
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            return diffDays;
        }

        function isDueSoon(dueDate) {
            const daysUntilDue = getDaysUntilDue(dueDate);
            return daysUntilDue <= 7 && daysUntilDue >= 0;
        }

        // # Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
        function saveChecks() { 
            try {
                localStorage.setItem('checks', JSON.stringify(checks)); 
            } catch(e) {
                console.error('Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ú†Ú©:', e);
                showErrorMessage('Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§. ÙØ¶Ø§ÛŒ Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù¾Ø± Ø´Ø¯Ù‡ Ø§Ø³Øª.');
            }
        }

        // # Ø³ÛŒØ³ØªÙ… Ù„ÙˆØ¯ÛŒÙ†Ú¯
        function addLoading(element) {
            element.classList.add('loading');
            setTimeout(() => {
                element.classList.remove('loading');
            }, 1500);
        }

        // # Ù¾ÛŒØ§Ù… Ù…ÙˆÙÙ‚ÛŒØª
        function showSuccessMessage(message) {
            const existingMessage = document.querySelector('.success-message');
            if (existingMessage) { existingMessage.remove(); }
            
            const successMessage = document.createElement('div');
            successMessage.className = 'success-message';
            successMessage.textContent = message;
            
            const content = document.querySelector('.content');
            content.insertBefore(successMessage, content.firstChild);
            
            setTimeout(() => { 
                if (successMessage.parentElement) { 
                    successMessage.remove(); 
                } 
            }, 4000);
        }

        // # Ù¾ÛŒØ§Ù… Ø®Ø·Ø§
        function showErrorMessage(message) {
            const errorMessage = document.createElement('div');
            errorMessage.className = 'success-message';
            errorMessage.style.background = 'var(--danger)';
            errorMessage.textContent = message;
            
            const content = document.querySelector('.content');
            content.insertBefore(errorMessage, content.firstChild);
            
            setTimeout(() => { 
                if (errorMessage.parentElement) { 
                    errorMessage.remove(); 
                } 
            }, 4000);
        }

        // # ÙˆÛŒÚ˜Ú¯ÛŒ Ø¬Ø¯ÛŒØ¯: Ú¯Ø²Ø§Ø±Ø´ Ù…Ø§Ù‡Ø§Ù†Ù‡
        function generateMonthlyReport() {
            const now = new Date();
            const currentMonth = now.getMonth();
            const currentYear = now.getFullYear();
            
            const monthlyChecks = checks.filter(check => {
                const checkDate = new Date(check.created);
                return checkDate.getMonth() === currentMonth && 
                       checkDate.getFullYear() === currentYear;
            });
            
            const totalAmount = monthlyChecks.reduce((sum, check) => sum + check.amount, 0);
            const completedAmount = monthlyChecks.filter(check => check.status === 'completed').reduce((sum, check) => sum + check.amount, 0);
            
            return {
                totalChecks: monthlyChecks.length,
                totalAmount,
                completedAmount,
                completionRate: monthlyChecks.length > 0 ? Math.round((completedAmount / totalAmount) * 100) : 0
            };
        }

        // # ÙˆÛŒÚ˜Ú¯ÛŒ Ø¬Ø¯ÛŒØ¯: ØªØ­Ù„ÛŒÙ„ Ø±ÛŒØ³Ú©
        function getRiskAnalysis() {
            const highRiskChecks = checks.filter(check => 
                check.status !== 'completed' && 
                getDaysUntilDue(check.dueDate) <= 3
            );
            
            const highRiskAmount = highRiskChecks.reduce((sum, check) => sum + check.amount, 0);
            const totalPendingAmount = checks.filter(check => check.status !== 'completed').reduce((sum, check) => sum + check.amount, 0);
            
            const riskPercentage = totalPendingAmount > 0 ? Math.round((highRiskAmount / totalPendingAmount) * 100) : 0;
            
            return {
                highRiskCount: highRiskChecks.length,
                highRiskAmount,
                riskPercentage,
                riskLevel: riskPercentage > 30 ? 'Ø¨Ø§Ù„Ø§' : riskPercentage > 15 ? 'Ù…ØªÙˆØ³Ø·' : 'Ú©Ù…'
            };
        }
    </script>
</body>
</html>