<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🚀 سیستم حساب داری</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/signature_pad@4.0.0/dist/signature_pad.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root {
            --primary: #27ae60;
            --primary-dark: #219653;
            --secondary: #3498db;
            --danger: #e74c3c;
            --warning: #f39c12;
            --dark: #2c3e50;
            --light: #ecf0f1;
            --success: #2ecc71;
            --purple: #9b59b6;
            --teal: #1abc9c;
            --gold: #f1c40f;
            --check-color: #9b59b6;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 0;
            color: #333;
            overflow-x: hidden;
        }

        .container {
            max-width: 100%;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            box-shadow: 0 0 50px rgba(0, 0, 0, 0.2);
        }

        .top-header {
            background: linear-gradient(135deg, var(--dark), #34495e);
            color: white;
            padding: 10px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .logo-icon {
            font-size: 1.3em;
        }

        .logo-text {
            font-size: 0.9em;
            font-weight: 800;
        }

        .header-controls {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .notification-bell {
            position: relative;
            font-size: 1.3em;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 5px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            text-decoration: none;
            color: white;
        }

        .notification-bell:hover {
            transform: scale(1.1);
            background: rgba(255, 255, 255, 0.2);
        }

        .notification-dot {
            position: absolute;
            top: 2px;
            right: 2px;
            width: 8px;
            height: 8px;
            background: var(--danger);
            border-radius: 50%;
            animation: pulse 2s infinite;
            border: 1px solid white;
        }

        .hamburger-menu {
            font-size: 1.3em;
            cursor: pointer;
            padding: 5px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .hamburger-menu:hover {
            transform: scale(1.1);
            background: rgba(255, 255, 255, 0.2);
        }

        .dropdown-menu {
            position: absolute;
            top: 100%;
            left: 10px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            width: 280px;
            z-index: 1001;
            display: none;
            overflow: hidden;
        }

        .dropdown-menu.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .dropdown-item {
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            transition: background 0.2s;
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--dark);
            font-weight: 600;
            font-size: 0.85em;
        }

        .dropdown-item:hover {
            background: #f5f5f5;
        }

        .dropdown-item:last-child {
            border-bottom: none;
        }

        .media-slider {
            display: flex;
            overflow-x: auto;
            gap: 10px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            margin: 10px 0;
            border-radius: 10px;
            scrollbar-width: none;
        }

        .media-slider::-webkit-scrollbar {
            display: none;
        }

        .media-item {
            flex: 0 0 auto;
            width: 120px;
            height: 80px;
            border-radius: 8px;
            overflow: hidden;
            background: #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .media-item img, .media-item video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .main-content {
            flex: 1;
            padding: 12px;
            overflow-y: auto;
            padding-bottom: 70px;
        }

        .section {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(8px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.8; }
            100% { transform: scale(1); opacity: 1; }
        }

        .form-container {
            background: white;
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 3px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 15px;
            border: 1px solid #e0e0e0;
            position: relative;
            overflow: hidden;
        }

        .form-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--secondary), var(--purple));
        }

        .form-title {
            font-size: 1.1em;
            font-weight: 800;
            margin-bottom: 15px;
            color: var(--dark);
            text-align: center;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--primary);
        }

        .form-group {
            margin-bottom: 12px;
        }

        label {
            display: block;
            margin-bottom: 6px;
            font-weight: 700;
            color: var(--dark);
            font-size: 0.8em;
        }

        input, select, textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            font-size: 12px;
            transition: all 0.3s;
            background: #fafafa;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary);
            background: white;
            box-shadow: 0 0 0 2px rgba(39, 174, 96, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 800;
            transition: all 0.3s;
            width: 100%;
            box-shadow: 0 3px 12px rgba(39, 174, 96, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        .btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 15px rgba(39, 174, 96, 0.6);
        }

        .btn-secondary {
            background: linear-gradient(135deg, var(--secondary), #2980b9);
            box-shadow: 0 3px 12px rgba(52, 152, 219, 0.4);
        }

        .btn-warning {
            background: linear-gradient(135deg, var(--warning), #e67e22);
            box-shadow: 0 3px 12px rgba(243, 156, 18, 0.4);
        }

        .btn-purple {
            background: linear-gradient(135deg, var(--purple), #8e44ad);
            box-shadow: 0 3px 12px rgba(155, 89, 182, 0.4);
        }

        .btn-check {
            background: linear-gradient(135deg, var(--check-color), #8e44ad);
            box-shadow: 0 3px 12px rgba(155, 89, 182, 0.4);
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--danger), #c0392b);
            box-shadow: 0 3px 12px rgba(231, 76, 60, 0.4);
        }

        .btn-teal {
            background: linear-gradient(135deg, var(--teal), #16a085);
            box-shadow: 0 3px 12px rgba(26, 188, 156, 0.4);
        }

        .btn-orange {
            background: linear-gradient(135deg, #e67e22, #d35400);
            box-shadow: 0 3px 12px rgba(230, 126, 34, 0.4);
        }

        .success-message {
            background: var(--success);
            color: white;
            padding: 12px;
            border-radius: 8px;
            text-align: center;
            margin: 12px 0;
            font-weight: 700;
            box-shadow: 0 3px 12px rgba(46, 204, 113, 0.5);
            animation: slideIn 0.5s ease-out;
            font-size: 0.8em;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-8px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .production-result {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            padding: 15px;
            border-radius: 12px;
            margin: 15px 0;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .production-title {
            font-size: 1em;
            font-weight: 800;
            margin-bottom: 12px;
            text-align: center;
        }

        .cost-breakdown {
            background: rgba(255, 255, 255, 0.2);
            padding: 12px;
            border-radius: 10px;
            margin: 12px 0;
        }

        .cost-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
        }

        .cost-item:last-child {
            border-bottom: none;
        }

        .cost-label {
            font-weight: 700;
            font-size: 0.9em;
        }

        .cost-value {
            font-weight: 800;
            font-size: 1em;
        }

        .final-price-section {
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            border: 2px solid white;
        }

        .price-label {
            font-size: 1em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .price-amount {
            font-size: 1.6em;
            font-weight: 900;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
        }

        .advice-section {
            background: #e8f6ef;
            border: 2px solid var(--primary);
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
        }

        .advice-title {
            color: var(--dark);
            font-weight: 800;
            margin-bottom: 10px;
            font-size: 1em;
        }

        .advice-content {
            color: #2c3e50;
            line-height: 1.5;
            font-size: 0.85em;
        }

        .chart-container {
            background: white;
            padding: 15px;
            border-radius: 12px;
            box-shadow: 0 3px 15px rgba(0, 0, 0, 0.1);
            margin: 15px 0;
            height: 250px;
        }

        .nav-bottom {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            display: flex;
            justify-content: space-around;
            padding: 8px 6px;
            box-shadow: 0 -3px 15px rgba(0, 0, 0, 0.1);
            border-top: 1px solid #e0e0e0;
            z-index: 1000;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            flex: 1;
            padding: 6px 4px;
            border-radius: 10px;
            transition: all 0.3s;
            cursor: pointer;
            color: #7f8c8d;
            max-width: 70px;
            text-decoration: none;
        }

        .nav-item.active {
            background: linear-gradient(135deg, rgba(39, 174, 96, 0.15), rgba(52, 152, 219, 0.15));
            color: var(--primary);
            transform: translateY(-2px);
        }

        .nav-icon {
            font-size: 1.3em;
            margin-bottom: 3px;
        }

        .nav-label {
            font-size: 0.6em;
            font-weight: 700;
        }

        .transaction-list {
            margin-top: 15px;
        }

        .transaction-item {
            background: white;
            padding: 12px;
            margin-bottom: 8px;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            border-right: 3px solid var(--primary);
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: transform 0.3s;
        }

        .transaction-item:hover {
            transform: translateX(-2px);
        }

        .transaction-details {
            flex: 1;
        }

        .transaction-title {
            font-weight: 800;
            margin-bottom: 4px;
            color: var(--dark);
            font-size: 0.9em;
        }

        .transaction-meta {
            font-size: 0.7em;
            color: #7f8c8d;
        }

        .transaction-amount {
            font-weight: 800;
            font-size: 1em;
        }

        .income {
            color: var(--primary);
        }

        .expense {
            color: var(--danger);
        }

        .summary-cards {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 15px;
        }

        .summary-card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 3px 12px rgba(0, 0, 0, 0.1);
            text-align: center;
            transition: transform 0.3s;
        }

        .summary-card:hover {
            transform: translateY(-2px);
        }

        .summary-card h3 {
            font-size: 0.75em;
            margin-bottom: 6px;
            color: #7f8c8d;
        }

        .summary-card .amount {
            font-size: 1.2em;
            font-weight: 800;
        }

        .cost-inputs {
            margin-bottom: 15px;
        }

        .cost-input-group {
            display: flex;
            gap: 6px;
            margin-bottom: 8px;
        }

        .cost-input-group input {
            flex: 1;
        }

        .add-cost-btn {
            background: var(--secondary);
            color: white;
            border: none;
            padding: 6px 10px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.75em;
            display: flex;
            align-items: center;
            gap: 4px;
            transition: all 0.3s;
        }

        .add-cost-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 6px rgba(52, 152, 219, 0.4);
        }

        .profit-display {
            background: linear-gradient(135deg, var(--gold), #f39c12);
            color: white;
            padding: 12px;
            border-radius: 10px;
            margin: 12px 0;
            text-align: center;
            box-shadow: 0 4px 12px rgba(243, 156, 18, 0.4);
        }

        .profit-title {
            font-size: 1em;
            font-weight: 800;
            margin-bottom: 6px;
        }

        .profit-amount {
            font-size: 1.5em;
            font-weight: 900;
        }

        .info-message {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin: 12px 0;
            box-shadow: 0 4px 12px rgba(52, 152, 219, 0.4);
            text-align: center;
            border: 1px solid white;
        }

        .info-title {
            font-size: 1em;
            font-weight: 800;
            margin-bottom: 8px;
        }

        .info-content {
            font-size: 0.85em;
            line-height: 1.4;
            opacity: 0.95;
        }

        .accounting-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            margin-bottom: 15px;
        }

        .accounting-stat {
            background: white;
            padding: 12px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .accounting-stat .value {
            font-size: 1.1em;
            font-weight: 800;
            margin: 5px 0;
        }

        .accounting-stat .label {
            font-size: 0.7em;
            color: #7f8c8d;
        }

        .signature-pad {
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background: white;
            margin-bottom: 12px;
            height: 150px;
            width: 100%;
        }

        .invoice-preview {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            box-shadow: 0 3px 15px rgba(0, 0, 0, 0.1);
        }

        .invoice-header {
            text-align: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--primary);
        }

        .invoice-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 15px;
        }

        .invoice-items {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 15px;
        }

        .invoice-items th, .invoice-items td {
            border: 1px solid #e0e0e0;
            padding: 8px;
            text-align: center;
        }

        .invoice-items th {
            background: #f5f5f5;
            font-weight: 700;
        }

        .invoice-total {
            text-align: left;
            font-weight: 800;
            font-size: 1.1em;
            margin-top: 10px;
        }

        .invoice-signatures {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .signature-box {
            text-align: center;
            width: 45%;
        }

        .signature-line {
            border-top: 1px solid #333;
            margin-top: 40px;
            padding-top: 5px;
        }

        .assets-list {
            margin-top: 15px;
        }

        .asset-item {
            background: white;
            padding: 12px;
            margin-bottom: 8px;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            border-right: 3px solid var(--secondary);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .asset-controls {
            display: flex;
            gap: 5px;
        }

        .asset-control-btn {
            background: var(--secondary);
            color: white;
            border: none;
            padding: 4px 8px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.7em;
        }

        .asset-control-btn.danger {
            background: var(--danger);
        }

        .employee-list {
            margin-top: 15px;
        }

        .employee-item {
            background: white;
            padding: 12px;
            margin-bottom: 8px;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            border-right: 3px solid var(--purple);
        }

        .employee-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .employee-name {
            font-weight: 800;
            font-size: 1em;
        }

        .employee-salary {
            font-weight: 700;
            color: var(--success);
        }

        .employee-details {
            font-size: 0.8em;
            color: #7f8c8d;
            margin-bottom: 8px;
        }

        .employee-controls {
            display: flex;
            gap: 5px;
        }

        .card-number {
            background: #f5f5f5;
            padding: 10px;
            border-radius: 8px;
            font-family: monospace;
            font-size: 1.1em;
            text-align: center;
            margin: 10px 0;
            cursor: pointer;
            transition: all 0.3s;
        }

        .card-number:hover {
            background: #e0e0e0;
        }

        .help-content {
            line-height: 1.6;
            font-size: 0.9em;
        }

        .help-section {
            margin-bottom: 15px;
        }

        .help-title {
            font-weight: 800;
            margin-bottom: 8px;
            color: var(--dark);
            font-size: 1em;
        }

        .crypto-list {
            margin-top: 15px;
        }

        .crypto-item {
            background: white;
            padding: 12px;
            margin-bottom: 8px;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            border-right: 3px solid var(--gold);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .crypto-details {
            flex: 1;
        }

        .crypto-name {
            font-weight: 800;
            font-size: 0.9em;
            margin-bottom: 4px;
        }

        .crypto-symbol {
            font-size: 0.7em;
            color: #7f8c8d;
        }

        .crypto-price {
            font-weight: 800;
            font-size: 1em;
            color: var(--success);
        }

        .income-methods {
            margin-top: 15px;
        }

        .income-method {
            background: white;
            padding: 12px;
            margin-bottom: 8px;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            border-right: 3px solid var(--teal);
        }

        .income-title {
            font-weight: 800;
            font-size: 0.9em;
            margin-bottom: 6px;
            color: var(--dark);
        }

        .income-description {
            font-size: 0.8em;
            color: #7f8c8d;
            line-height: 1.4;
        }

        .reminder-notification {
            background: linear-gradient(135deg, var(--success), #27ae60);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            box-shadow: 0 4px 12px rgba(39, 174, 96, 0.4);
            border: 2px solid white;
            animation: pulse 2s infinite;
        }

        .reminder-notification-title {
            font-weight: 800;
            font-size: 1em;
            margin-bottom: 8px;
            text-align: center;
        }

        .reminder-notification-content {
            font-size: 0.85em;
            line-height: 1.5;
            text-align: center;
        }

        @media (min-width: 768px) {
            .container {
                max-width: 800px;
                margin: 15px auto;
                min-height: calc(100vh - 30px);
                border-radius: 15px;
                overflow: hidden;
            }
            
            .nav-bottom {
                left: 50%;
                right: auto;
                width: 800px;
                transform: translateX(-50%);
                border-bottom-left-radius: 15px;
                border-bottom-right-radius: 15px;
            }
            
            .main-content {
                padding-bottom: 80px;
            }
        }

        @media (max-width: 480px) {
            .main-content {
                padding-bottom: 70px;
            }
        }

        @media (max-width: 360px) {
            .top-header {
                padding: 8px 12px;
            }
            
            .logo-text {
                font-size: 0.8em;
            }
            
            .main-content {
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="top-header">
            <div class="logo">
                <div class="logo-icon">🚀</div>
                <div class="logo-text">سیستم حساب داری</div>
            </div>
            <div class="header-controls">
                <div class="hamburger-menu" onclick="toggleMenu()">☰</div>
                <div class="dropdown-menu" id="dropdownMenu">
                    <div class="dropdown-item" onclick="showSection('employees')">
                        <span>👥</span> مدیریت کارمندان
                    </div>
                    <div class="dropdown-item" onclick="showSection('invoice')">
                        <span>🧾</span> ایجاد فاکتور
                    </div>
                    <div class="dropdown-item" onclick="showSection('assets')">
                        <span>💰</span> گاو صندوق / دارایی
                    </div>
                    <div class="dropdown-item" onclick="showSection('tax')">
                        <span>🧮</span> محاسبه مالیات
                    </div>
                    <div class="dropdown-item" onclick="showSection('budget')">
                        <span>📅</span> بودجه‌بندی
                    </div>
                    <div class="dropdown-item" onclick="showSection('reports')">
                        <span>📊</span> گزارش‌های پیشرفته
                    </div>
                    <div class="dropdown-item" onclick="showSection('reminders')">
                        <span>⏰</span> یادآوری‌ها
                    </div>
                    <div class="dropdown-item" onclick="showSection('crypto')">
                        <span>₿</span> سبد خرید ارز دیجیتال
                    </div>
                    <div class="dropdown-item" onclick="showSection('income')">
                        <span>💸</span> راه‌های کسب درآمد
                    </div>
                    <div class="dropdown-item" onclick="showSection('help')">
                        <span>❓</span> راهنمایی استفاده
                    </div>
                    <div class="dropdown-item" onclick="showSection('donate')">
                        <span>❤️</span> حمایت مالی
                    </div>
                    <div class="dropdown-item" onclick="resetAllData()" style="color: var(--danger);">
                        <span>🗑️</span> ریست تمام داده‌ها
                    </div>
                </div>
                <a href="mk.html" class="notification-bell">
                    <div class="notification-dot"></div>
                    🔔اطلاعیه
                </a>
            </div>
        </div>

        <!-- اسلایدر رسانه -->
        <div class="media-slider">
            <div class="media-item">
                <img src="m1.jpg" alt="تصویر تبلیغاتی" onerror="this.style.display='none'">
            </div>
            <div class="media-item">
                <img src="m1.webp" alt="ویدیو تبلیغاتی" onerror="this.style.display='none'">
            </div>
            <div class="media-item">
                <img src="b.jpg" alt="بنر تبلیغاتی" onerror="this.style.display='none'">
            </div>
        </div>

        <div class="main-content">
            <!-- بخش مدیریت مالی -->
            <div id="finance" class="section active">
                <div class="form-container">
                    <h2 class="form-title">💰 مدیریت مالی</h2>
                    
                    <div class="form-group">
                        <label for="finance-type">نوع تراکنش:</label>
                        <select id="finance-type">
                            <option value="income">درآمد</option>
                            <option value="expense">هزینه</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="finance-amount">مبلغ (تومان):</label>
                        <input type="number" id="finance-amount" placeholder="مبلغ را وارد کنید">
                    </div>

                    <div class="form-group">
                        <label for="finance-description">توضیحات:</label>
                        <input type="text" id="finance-description" placeholder="شرح تراکنش">
                    </div>

                    <div class="form-group">
                        <label for="finance-category">دسته‌بندی:</label>
                        <select id="finance-category">
                            <option value="salary">حقوق</option>
                            <option value="business">کسب و کار</option>
                            <option value="investment">سرمایه‌گذاری</option>
                            <option value="food">خوراکی</option>
                            <option value="transport">حمل و نقل</option>
                            <option value="shopping">خرید</option>
                            <option value="bills">قبض</option>
                            <option value="entertainment">سرگرمی</option>
                            <option value="health">سلامت</option>
                            <option value="other">متفرقه</option>
                        </select>
                    </div>

                    <button class="btn" onclick="addFinanceTransaction()">
                        <span>💾</span> ثبت تراکنش
                    </button>
                    
                    <button class="btn btn-danger" onclick="clearFinanceData()" style="margin-top: 10px;">
                        <span>🗑️</span> حذف تمام تراکنش‌ها
                    </button>
                </div>

                <div class="form-container">
                    <h2 class="form-title">📊 نمودار مالی</h2>
                    <div class="chart-container">
                        <canvas id="financeChart"></canvas>
                    </div>
                </div>

                <div class="transaction-list" id="finance-transactions">
                    <!-- تراکنش‌ها اینجا نمایش داده می‌شوند -->
                </div>
            </div>

            <!-- بخش حسابرسی تولیدی -->
            <div id="production" class="section">
                <div class="form-container">
                    <h2 class="form-title">🏭 حسابرسی تولیدی</h2>
                    
                    <div class="form-group">
                        <label for="product-name">نام محصول:</label>
                        <input type="text" id="product-name" placeholder="نام محصول را وارد کنید">
                    </div>

                    <div class="form-group">
                        <label for="material-cost">هزینه کل مواد اولیه (تومان):</label>
                        <input type="number" id="material-cost" placeholder="مثلاً 50000000 برای 50 میلیون">
                    </div>

                    <div class="form-group">
                        <label for="production-quantity">تعداد تولید شده:</label>
                        <input type="number" id="production-quantity" placeholder="تعداد تولید شده">
                    </div>

                    <div class="cost-inputs">
                        <h3 style="margin-bottom: 12px; color: var(--dark); font-weight: 800;">💰 هزینه‌های اضافی تولید:</h3>
                        <div id="additional-costs">
                            <!-- هزینه‌های اضافی اینجا اضافه می‌شوند -->
                        </div>
                        <button type="button" class="add-cost-btn" onclick="addCostField()">
                            <span>➕</span> افزودن هزینه جدید
                        </button>
                    </div>

                    <div class="form-group">
                        <label for="desired-profit">سود مورد نظر شما (درصد):</label>
                        <input type="number" id="desired-profit" placeholder="مثلاً 30 برای 30% سود">
                    </div>

                    <button class="btn btn-purple" onclick="calculateProduction()">
                        <span>🧮</span> محاسبه قیمت تمام شده
                    </button>
                    
                    <button class="btn btn-danger" onclick="clearProductionData()" style="margin-top: 10px;">
                        <span>🗑️</span> حذف تمام داده‌های تولیدی
                    </button>
                </div>

                <div id="production-result" class="production-result" style="display: none;">
                    <h2 class="production-title">📊 نتایج محاسبات تولید</h2>
                    <div class="cost-breakdown">
                        <div class="cost-item">
                            <span class="cost-label">هزینه مواد اولیه:</span>
                            <span class="cost-value" id="result-material-cost">0 تومان</span>
                        </div>
                        <div class="cost-item">
                            <span class="cost-label">هزینه‌های اضافی:</span>
                            <span class="cost-value" id="result-additional-costs">0 تومان</span>
                        </div>
                        <div class="cost-item">
                            <span class="cost-label">هزینه کل تولید:</span>
                            <span class="cost-value" id="result-total-cost">0 تومان</span>
                        </div>
                        <div class="cost-item">
                            <span class="cost-label">هزینه هر واحد:</span>
                            <span class="cost-value" id="result-unit-cost">0 تومان</span>
                        </div>
                    </div>
                    
                    <div class="final-price-section">
                        <div class="price-label">💰 قیمت فروش هر واحد با سود دلخواه:</div>
                        <div class="price-amount" id="result-final-price">0 تومان</div>
                    </div>

                    <div class="profit-display">
                        <div class="profit-title">💵 سود خالص شما:</div>
                        <div class="profit-amount" id="result-total-profit">0 تومان</div>
                    </div>

                    <div class="advice-section">
                        <div class="advice-title">💡 توصیه‌های مدیریتی:</div>
                        <div class="advice-content" id="production-advice">
                            محاسبات شما در اینجا نمایش داده خواهد شد.
                        </div>
                    </div>
                </div>
            </div>

            <!-- بخش چک و سفته -->
            <div id="checks" class="section">
                <div class="form-container">
                    <h2 class="form-title">🧾 مدیریت چک و سفته</h2>
                    
                    <div class="form-group">
                        <label for="check-type">نوع سند:</label>
                        <select id="check-type">
                            <option value="check">چک</option>
                            <option value="promissory">سفته</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="check-amount">مبلغ (تومان):</label>
                        <input type="number" id="check-amount" placeholder="مبلغ سند">
                    </div>

                    <div class="form-group">
                        <label for="check-due-date">تاریخ سررسید:</label>
                        <input type="date" id="check-due-date">
                    </div>

                    <div class="form-group">
                        <label for="check-issuer">صادرکننده:</label>
                        <input type="text" id="check-issuer" placeholder="نام صادرکننده">
                    </div>

                    <div class="form-group">
                        <label for="check-recipient">ذینفع:</label>
                        <input type="text" id="check-recipient" placeholder="نام ذینفع">
                    </div>

                    <div class="form-group">
                        <label for="check-description">توضیحات:</label>
                        <textarea id="check-description" rows="3" placeholder="توضیحات اضافی"></textarea>
                    </div>

                    <button class="btn btn-check" onclick="addCheck()">
                        <span>💾</span> ثبت سند
                    </button>
                    
                    <button class="btn btn-danger" onclick="clearAllChecks()" style="margin-top: 10px;">
                        <span>🗑️</span> حذف تمام چک‌ها و سفته‌ها
                    </button>
                </div>

                <div class="info-message">
                    <div class="info-title">📋 لیست چک‌ها و سفته‌ها</div>
                    <div class="info-content">
                        در این بخش می‌توانید تمام اسناد مالی خود را مدیریت کنید.
                    </div>
                </div>

                <div class="transaction-list" id="checks-list">
                    <!-- چک‌ها و سفته‌ها اینجا نمایش داده می‌شوند -->
                </div>
            </div>

            <!-- بخش مدیریت کارمندان -->
            <div id="employees" class="section">
                <div class="form-container">
                    <h2 class="form-title">👥 مدیریت کارمندان</h2>
                    
                    <div class="form-group">
                        <label for="employee-name">نام کارمند:</label>
                        <input type="text" id="employee-name" placeholder="نام کامل کارمند">
                    </div>

                    <div class="form-group">
                        <label for="employee-position">سمت:</label>
                        <input type="text" id="employee-position" placeholder="سمت سازمانی">
                    </div>

                    <div class="form-group">
                        <label for="employee-salary-type">نوع حقوق:</label>
                        <select id="employee-salary-type" onchange="toggleSalaryFields()">
                            <option value="fixed">ثابت ماهیانه</option>
                            <option value="percentage">درصدی از فروش</option>
                            <option value="piecework">قطعه‌کاری</option>
                        </select>
                    </div>

                    <div class="form-group" id="fixed-salary-field">
                        <label for="employee-salary">حقوق ماهیانه (تومان):</label>
                        <input type="number" id="employee-salary" placeholder="مبلغ حقوق">
                    </div>

                    <div class="form-group" id="percentage-salary-field" style="display: none;">
                        <label for="employee-percentage">درصد از فروش:</label>
                        <input type="number" id="employee-percentage" placeholder="مثلاً 10 برای 10%" min="0" max="100">
                    </div>

                    <div class="form-group" id="piecework-salary-field" style="display: none;">
                        <label for="employee-piece-rate">نرخ قطعه‌کاری (تومان):</label>
                        <input type="number" id="employee-piece-rate" placeholder="مبلغ برای هر قطعه">
                    </div>

                    <div class="form-group">
                        <label for="employee-join-date">تاریخ استخدام:</label>
                        <input type="date" id="employee-join-date">
                    </div>

                    <div class="form-group">
                        <label for="employee-contact">اطلاعات تماس:</label>
                        <input type="text" id="employee-contact" placeholder="شماره تماس یا ایمیل">
                    </div>

                    <button class="btn" onclick="addEmployee()">
                        <span>➕</span> افزودن کارمند
                    </button>
                    
                    <button class="btn btn-danger" onclick="clearAllEmployees()" style="margin-top: 10px;">
                        <span>🗑️</span> حذف تمام کارمندان
                    </button>
                </div>

                <div class="employee-list" id="employees-list">
                    <!-- لیست کارمندان اینجا نمایش داده می‌شود -->
                </div>
            </div>

            <!-- بخش گاو صندوق / دارایی -->
            <div id="assets" class="section">
                <div class="form-container">
                    <h2 class="form-title">💰 گاو صندوق / دارایی</h2>
                    
                    <div class="form-group">
                        <label for="asset-name">نام دارایی:</label>
                        <input type="text" id="asset-name" placeholder="نام دارایی (مثلاً: نقدی، طلا، ملک)">
                    </div>

                    <div class="form-group">
                        <label for="asset-value">ارزش دارایی (تومان):</label>
                        <input type="number" id="asset-value" placeholder="ارزش فعلی دارایی">
                    </div>

                    <div class="form-group">
                        <label for="asset-type">نوع دارایی:</label>
                        <select id="asset-type">
                            <option value="cash">نقدی</option>
                            <option value="bank">حساب بانکی</option>
                            <option value="property">املاک</option>
                            <option value="vehicle">وسیله نقلیه</option>
                            <option value="gold">طلا و جواهرات</option>
                            <option value="investment">سرمایه‌گذاری</option>
                            <option value="other">سایر</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="asset-description">توضیحات:</label>
                        <textarea id="asset-description" rows="3" placeholder="توضیحات درباره دارایی"></textarea>
                    </div>

                    <button class="btn" onclick="addAsset()">
                        <span>➕</span> افزودن دارایی
                    </button>
                    
                    <button class="btn btn-danger" onclick="clearAllAssets()" style="margin-top: 10px;">
                        <span>🗑️</span> حذف تمام دارایی‌ها
                    </button>
                </div>

                <div class="assets-list" id="assets-list">
                    <!-- لیست دارایی‌ها اینجا نمایش داده می‌شود -->
                </div>
            </div>

            <!-- بخش ایجاد فاکتور -->
            <div id="invoice" class="section">
                <div class="form-container">
                    <h2 class="form-title">🧾 ایجاد فاکتور</h2>
                    
                    <div class="form-group">
                        <label for="invoice-type">نوع فاکتور:</label>
                        <select id="invoice-type">
                            <option value="sale">فروش</option>
                            <option value="purchase">خرید</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="invoice-seller">فروشنده:</label>
                        <input type="text" id="invoice-seller" placeholder="نام فروشنده">
                    </div>

                    <div class="form-group">
                        <label for="invoice-buyer">خریدار:</label>
                        <input type="text" id="invoice-buyer" placeholder="نام خریدار">
                    </div>

                    <div class="form-group">
                        <label for="invoice-date">تاریخ:</label>
                        <input type="date" id="invoice-date">
                    </div>

                    <h3 style="margin: 15px 0 10px; color: var(--dark);">🛍️ اقلام فاکتور</h3>
                    <div id="invoice-items">
                        <div class="invoice-item-row">
                            <div style="display: flex; gap: 8px; margin-bottom: 8px;">
                                <input type="text" placeholder="نام کالا" class="item-name">
                                <input type="number" placeholder="تعداد" class="item-quantity" style="width: 80px;">
                                <input type="number" placeholder="قیمت واحد" class="item-price" style="width: 120px;">
                                <button type="button" class="add-cost-btn danger" onclick="removeInvoiceItem(this)">✕</button>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="add-cost-btn" onclick="addInvoiceItem()">
                        <span>➕</span> افزودن کالا
                    </button>

                    <div class="form-group" style="margin-top: 15px;">
                        <label for="invoice-notes">توضیحات:</label>
                        <textarea id="invoice-notes" rows="3" placeholder="توضیحات اضافی"></textarea>
                    </div>

                    <h3 style="margin: 15px 0 10px; color: var(--dark);">✍️ امضا</h3>
                    <div class="signature-pad-container">
                        <canvas class="signature-pad" id="signature-pad"></canvas>
                        <button type="button" class="add-cost-btn danger" onclick="clearSignature()" style="margin-bottom: 10px;">
                            <span>🗑️</span> پاک کردن امضا
                        </button>
                    </div>

                    <button class="btn btn-purple" onclick="generateInvoice()">
                        <span>🧾</span> ایجاد فاکتور
                    </button>
                </div>

                <div class="invoice-preview" id="invoice-preview" style="display: none;">
                    <!-- پیش‌نمایش فاکتور اینجا نمایش داده می‌شود -->
                </div>
            </div>

            <!-- بخش محاسبه مالیات -->
            <div id="tax" class="section">
                <div class="form-container">
                    <h2 class="form-title">🧮 محاسبه مالیات</h2>
                    
                    <div class="form-group">
                        <label for="tax-income">درآمد سالانه (تومان):</label>
                        <input type="number" id="tax-income" placeholder="درآمد سالانه خود را وارد کنید">
                    </div>

                    <div class="form-group">
                        <label for="tax-deductions">کسورات قانونی (تومان):</label>
                        <input type="number" id="tax-deductions" placeholder="مبلغ کسورات قانونی">
                    </div>

                    <div class="form-group">
                        <label for="tax-type">نوع فعالیت:</label>
                        <select id="tax-type">
                            <option value="individual">فردی</option>
                            <option value="company">شرکتی</option>
                            <option value="freelance">آزاد</option>
                        </select>
                    </div>

                    <button class="btn btn-teal" onclick="calculateTax()">
                        <span>🧮</span> محاسبه مالیات
                    </button>
                </div>

                <div id="tax-result">
                    <!-- نتایج محاسبه مالیات اینجا نمایش داده می‌شوند -->
                </div>
            </div>

            <!-- بخش بودجه‌بندی -->
            <div id="budget" class="section">
                <div class="form-container">
                    <h2 class="form-title">📅 بودجه‌بندی ماهانه</h2>
                    
                    <div class="form-group">
                        <label for="budget-month">ماه:</label>
                        <select id="budget-month">
                            <option value="1">فروردین</option>
                            <option value="2">اردیبهشت</option>
                            <option value="3">خرداد</option>
                            <option value="4">تیر</option>
                            <option value="5">مرداد</option>
                            <option value="6">شهریور</option>
                            <option value="7">مهر</option>
                            <option value="8">آبان</option>
                            <option value="9">آذر</option>
                            <option value="10">دی</option>
                            <option value="11">بهمن</option>
                            <option value="12">اسفند</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="budget-year">سال:</label>
                        <input type="number" id="budget-year" placeholder="۱۴۰۳" value="1403">
                    </div>

                    <div class="form-group">
                        <label for="budget-income">درآمد پیش‌بینی شده (تومان):</label>
                        <input type="number" id="budget-income" placeholder="درآمد ماهانه">
                    </div>

                    <div class="form-group">
                        <label for="budget-expenses">هزینه‌های پیش‌بینی شده (تومان):</label>
                        <input type="number" id="budget-expenses" placeholder="هزینه‌های ماهانه">
                    </div>

                    <button class="btn btn-teal" onclick="createBudget()">
                        <span>💾</span> ثبت بودجه
                    </button>
                </div>

                <div class="form-container">
                    <h2 class="form-title">📊 بودجه‌های ثبت شده</h2>
                    <div id="budget-list">
                        <!-- لیست بودجه‌ها اینجا نمایش داده می‌شود -->
                    </div>
                </div>
            </div>

            <!-- بخش گزارش‌های پیشرفته -->
            <div id="reports" class="section">
                <div class="form-container">
                    <h2 class="form-title">📊 گزارش‌های پیشرفته</h2>
                    
                    <div class="form-group">
                        <label for="report-type">نوع گزارش:</label>
                        <select id="report-type">
                            <option value="financial">گزارش مالی جامع</option>
                            <option value="tax">گزارش مالیاتی</option>
                            <option value="performance">گزارش عملکرد</option>
                            <option value="inventory">گزارش موجودی</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="report-period">بازه زمانی:</label>
                        <select id="report-period">
                            <option value="monthly">ماهانه</option>
                            <option value="quarterly">سه‌ماهه</option>
                            <option value="yearly">سالانه</option>
                            <option value="custom">سفارشی</option>
                        </select>
                    </div>

                    <div id="custom-date-range" style="display: none;">
                        <div class="form-group">
                            <label for="report-start-date">تاریخ شروع:</label>
                            <input type="date" id="report-start-date">
                        </div>
                        <div class="form-group">
                            <label for="report-end-date">تاریخ پایان:</label>
                            <input type="date" id="report-end-date">
                        </div>
                    </div>

                    <button class="btn btn-purple" onclick="generateAdvancedReport()">
                        <span>📈</span> ایجاد گزارش
                    </button>
                </div>

                <div id="advanced-report-result">
                    <!-- نتایج گزارش پیشرفته اینجا نمایش داده می‌شوند -->
                </div>
            </div>

            <!-- بخش یادآوری‌ها -->
            <div id="reminders" class="section">
                <div class="form-container">
                    <h2 class="form-title">⏰ سیستم یادآوری</h2>
                    
                    <div class="form-group">
                        <label for="reminder-title">عنوان یادآوری:</label>
                        <input type="text" id="reminder-title" placeholder="عنوان یادآوری">
                    </div>

                    <div class="form-group">
                        <label for="reminder-description">توضیحات:</label>
                        <textarea id="reminder-description" rows="3" placeholder="توضیحات یادآوری"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="reminder-date">تاریخ یادآوری:</label>
                        <input type="datetime-local" id="reminder-date">
                    </div>

                    <div class="form-group">
                        <label for="reminder-priority">اولویت:</label>
                        <select id="reminder-priority">
                            <option value="low">کم</option>
                            <option value="medium">متوسط</option>
                            <option value="high">بالا</option>
                        </select>
                    </div>

                    <button class="btn btn-warning" onclick="addReminder()">
                        <span>➕</span> افزودن یادآوری
                    </button>
                </div>

                <div class="form-container">
                    <h2 class="form-title">📋 یادآوری‌های فعال</h2>
                    <div id="reminders-list">
                        <!-- لیست یادآوری‌ها اینجا نمایش داده می‌شود -->
                    </div>
                </div>

                <!-- اعلان یادآوری در صفحه اصلی -->
                <div id="reminder-notification" style="display: none;">
                    <!-- اعلان‌ها اینجا نمایش داده می‌شوند -->
                </div>
            </div>

            <!-- بخش سبد خرید ارز دیجیتال -->
            <div id="crypto" class="section">
                <div class="form-container">
                    <h2 class="form-title">₿ سبد خرید ارز دیجیتال</h2>
                    
                    <div class="info-message">
                        <div class="info-title">💡 استراتژی معاملاتی پیشنهادی</div>
                        <div class="info-content">
                            <strong>روش ۲٪:</strong> هر ارز اگر ۲٪ کاهش قیمت داشت، ۲۰ میلیون تومان بخرید. وقتی ۲٪ افزایش قیمت داشت، بفروشید. این روند را هر روز تکرار کنید.
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="crypto-investment-amount">مبلغ سرمایه‌گذاری برای هر ارز (تومان):</label>
                        <input type="number" id="crypto-investment-amount" placeholder="۲۰۰۰۰۰۰۰" value="20000000">
                    </div>

                    <button class="btn btn-orange" onclick="generateCryptoRecommendations()">
                        <span>🎯</span> دریافت پیشنهادات امروز
                    </button>

                    <div style="text-align: center; margin: 15px 0;">
                        <a href="https://tabdeal.org/auth/register-req?refcode=1btx55" target="_blank" class="btn btn-teal">
                            <span>💳</span> ثبت‌نام در صرافی تبادل
                        </a>
                    </div>
                </div>

                <div class="form-container">
                    <h2 class="form-title">📊 پیشنهادات سرمایه‌گذاری امروز</h2>
                    <div class="crypto-list" id="crypto-recommendations">
                        <!-- پیشنهادات اینجا نمایش داده می‌شوند -->
                    </div>
                </div>

                <div class="form-container">
                    <h2 class="form-title">💰 ۵۰ ارز دیجیتال برتر</h2>
                    <div class="crypto-list" id="crypto-list">
                        <!-- لیست ارزهای دیجیتال اینجا نمایش داده می‌شود -->
                    </div>
                </div>
            </div>

            <!-- بخش راه‌های کسب درآمد -->
            <div id="income" class="section">
                <div class="form-container">
                    <h2 class="form-title">💸 ۲۰ روش اثبات‌شده کسب درآمد</h2>
                    
                    <div class="info-message">
                        <div class="info-title">🚀 روش‌های واقعی و قابل اجرا</div>
                        <div class="info-content">
                            این روش‌ها بر اساس تجربیات واقعی و تحقیقات گسترده جمع‌آوری شده‌اند و قابل اجرا هستند.
                        </div>
                    </div>

                    <div class="income-methods" id="income-methods">
                        <!-- لیست روش‌های کسب درآمد اینجا نمایش داده می‌شود -->
                    </div>
                </div>
            </div>

            <!-- سایر بخش‌ها -->
            <div id="help" class="section">
                <div class="form-container">
                    <h2 class="form-title">❓ راهنمایی استفاده از پلتفرم</h2>
                    <div class="help-content">
                        <!-- محتوای راهنما -->
                    </div>
                </div>
            </div>

            <div id="donate" class="section">
                <div class="form-container">
                    <h2 class="form-title">❤️ حمایت مالی</h2>
                    <!-- محتوای حمایت مالی -->
                </div>
            </div>
        </div>

        <!-- ناوبری پایین -->
        <div class="nav-bottom">
            <div class="nav-item active" onclick="showSection('finance')">
                <div class="nav-icon">💰</div>
                <div class="nav-label">مالی</div>
            </div>
            <div class="nav-item" onclick="showSection('production')">
                <div class="nav-icon">🏭</div>
                <div class="nav-label">تولیدی</div>
            </div>
            <div class="nav-item" onclick="showSection('checks')">
                <div class="nav-icon">🧾</div>
                <div class="nav-label">چک‌ها</div>
            </div>
            <div class="nav-item" onclick="showSection('employees')">
                <div class="nav-icon">👥</div>
                <div class="nav-label">کارمندان</div>
            </div>
            <div class="nav-item" onclick="showSection('assets')">
                <div class="nav-icon">💼</div>
                <div class="nav-label">دارایی</div>
            </div>
        </div>
    </div>

    <script>
        // مدیریت نمایش بخش‌ها
        function showSection(sectionId) {
            // مخفی کردن تمام بخش‌ها
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // نمایش بخش انتخاب شده
            document.getElementById(sectionId).classList.add('active');
            
            // به‌روزرسانی ناوبری پایین
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // پیدا کردن آیتم ناوبری مربوطه و فعال کردن آن
            const navItems = document.querySelectorAll('.nav-item');
            for (let i = 0; i < navItems.length; i++) {
                if (navItems[i].onclick && navItems[i].onclick.toString().includes(sectionId)) {
                    navItems[i].classList.add('active');
                    break;
                }
            }
            
            // بستن منوی کشویی
            document.getElementById('dropdownMenu').classList.remove('active');

            // اگر بخش فاکتور است، امضای دیجیتال را راه‌اندازی کن
            if (sectionId === 'invoice') {
                setTimeout(initializeSignaturePad, 100);
            }

            // اگر بخش ارز دیجیتال است، لیست ارزها را نمایش بده
            if (sectionId === 'crypto') {
                displayCryptoList();
            }

            // اگر بخش کسب درآمد است، لیست روش‌ها را نمایش بده
            if (sectionId === 'income') {
                displayIncomeMethods();
            }

            // بررسی یادآوری‌ها
            checkReminders();
        }

        // مدیریت منوی کشویی
        function toggleMenu() {
            const menu = document.getElementById('dropdownMenu');
            menu.classList.toggle('active');
        }

        // بستن منوی کشویی با کلیک خارج از آن
        document.addEventListener('click', function(event) {
            const menu = document.getElementById('dropdownMenu');
            const hamburger = document.querySelector('.hamburger-menu');
            
            if (!menu.contains(event.target) && !hamburger.contains(event.target)) {
                menu.classList.remove('active');
            }
        });

        // ========== امضای دیجیتال ==========
        let signaturePad = null;

        function initializeSignaturePad() {
            const canvas = document.getElementById('signature-pad');
            if (canvas && !signaturePad) {
                signaturePad = new SignaturePad(canvas, {
                    backgroundColor: 'white',
                    penColor: 'rgb(0, 0, 0)'
                });
                
                // تنظیم سایز کانواس
                canvas.style.width = '100%';
                canvas.style.height = '150px';
            }
        }

        function clearSignature() {
            if (signaturePad) {
                signaturePad.clear();
            }
        }

        // ========== مدیریت داده‌ها ==========
        let financeTransactions = JSON.parse(localStorage.getItem('financeTransactions')) || [];
        let productionData = JSON.parse(localStorage.getItem('productionData')) || [];
        let checks = JSON.parse(localStorage.getItem('checks')) || [];
        let employees = JSON.parse(localStorage.getItem('employees')) || [];
        let assets = JSON.parse(localStorage.getItem('assets')) || [];
        let invoices = JSON.parse(localStorage.getItem('invoices')) || [];
        let taxData = JSON.parse(localStorage.getItem('taxData')) || [];
        let budgetData = JSON.parse(localStorage.getItem('budgetData')) || [];
        let reports = JSON.parse(localStorage.getItem('reports')) || [];
        let reminders = JSON.parse(localStorage.getItem('reminders')) || [];
        let cryptoData = JSON.parse(localStorage.getItem('cryptoData')) || [];

        // ذخیره داده‌ها در localStorage
        function saveFinanceData() {
            localStorage.setItem('financeTransactions', JSON.stringify(financeTransactions));
        }

        function saveProductionData() {
            localStorage.setItem('productionData', JSON.stringify(productionData));
        }

        function saveChecks() {
            localStorage.setItem('checks', JSON.stringify(checks));
        }

        function saveEmployees() {
            localStorage.setItem('employees', JSON.stringify(employees));
        }

        function saveAssets() {
            localStorage.setItem('assets', JSON.stringify(assets));
        }

        function saveInvoices() {
            localStorage.setItem('invoices', JSON.stringify(invoices));
        }

        function saveTaxData() {
            localStorage.setItem('taxData', JSON.stringify(taxData));
        }

        function saveBudgetData() {
            localStorage.setItem('budgetData', JSON.stringify(budgetData));
        }

        function saveReminders() {
            localStorage.setItem('reminders', JSON.stringify(reminders));
        }

        // بارگذاری داده‌ها هنگام لود صفحه
        window.onload = function() {
            renderFinanceTransactions();
            renderChecks();
            renderEmployees();
            renderAssets();
            renderBudget();
            renderReminders();
            initFinanceChart();
            displayCryptoList();
            displayIncomeMethods();
            
            // تنظیم تاریخ امروز
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('invoice-date').value = today;
            document.getElementById('employee-join-date').value = today;
            document.getElementById('check-due-date').value = today;
            document.getElementById('report-start-date').value = today;
            document.getElementById('report-end-date').value = today;
            
            // بررسی یادآوری‌ها
            checkReminders();
        };

        // ========== بخش مدیریت مالی ==========
        function addFinanceTransaction() {
            const type = document.getElementById('finance-type').value;
            const amount = parseInt(document.getElementById('finance-amount').value);
            const description = document.getElementById('finance-description').value;
            const category = document.getElementById('finance-category').value;
            
            if (!amount || !description) {
                alert('لطفاً تمام فیلدها را پر کنید');
                return;
            }
            
            const transaction = {
                id: Date.now(),
                type,
                amount,
                description,
                category,
                date: new Date().toLocaleDateString('fa-IR')
            };
            
            financeTransactions.push(transaction);
            saveFinanceData();
            renderFinanceTransactions();
            updateFinanceChart();
            
            showSuccessMessage('تراکنش با موفقیت ثبت شد');
            
            // ریست کردن فرم
            document.getElementById('finance-amount').value = '';
            document.getElementById('finance-description').value = '';
        }

        function renderFinanceTransactions() {
            const container = document.getElementById('finance-transactions');
            container.innerHTML = '';
            
            if (financeTransactions.length === 0) {
                container.innerHTML = '<div class="info-message">هنوز هیچ تراکنشی ثبت نشده است</div>';
                return;
            }
            
            financeTransactions.forEach(transaction => {
                const transactionEl = document.createElement('div');
                transactionEl.className = 'transaction-item';
                transactionEl.innerHTML = `
                    <div class="transaction-details">
                        <div class="transaction-title">${transaction.description}</div>
                        <div class="transaction-meta">${transaction.date} | ${getCategoryName(transaction.category)}</div>
                    </div>
                    <div class="transaction-amount ${transaction.type}">
                        ${transaction.type === 'income' ? '+' : '-'} ${transaction.amount.toLocaleString()} تومان
                    </div>
                `;
                container.appendChild(transactionEl);
            });
        }

        function clearFinanceData() {
            if (confirm('آیا از حذف تمام تراکنش‌های مالی اطمینان دارید؟ این عمل غیرقابل بازگشت است.')) {
                financeTransactions = [];
                saveFinanceData();
                renderFinanceTransactions();
                updateFinanceChart();
                showSuccessMessage('تمام تراکنش‌های مالی حذف شدند');
            }
        }

        function getCategoryName(category) {
            const categories = {
                'salary': 'حقوق',
                'business': 'کسب و کار',
                'investment': 'سرمایه‌گذاری',
                'food': 'خوراکی',
                'transport': 'حمل و نقل',
                'shopping': 'خرید',
                'bills': 'قبض',
                'entertainment': 'سرگرمی',
                'health': 'سلامت',
                'other': 'متفرقه'
            };
            return categories[category] || 'سایر';
        }

        // ========== بخش حسابرسی تولیدی ==========
        let additionalCosts = [];

        function addCostField() {
            const container = document.getElementById('additional-costs');
            const costId = Date.now();
            
            const costField = document.createElement('div');
            costField.className = 'cost-input-group';
            costField.innerHTML = `
                <input type="text" id="cost-name-${costId}" placeholder="عنوان هزینه (مثلاً: دستمزد کارگران)" style="flex: 2;">
                <input type="number" id="cost-amount-${costId}" placeholder="مبلغ (تومان)" style="flex: 1;">
                <button type="button" class="add-cost-btn" style="background: var(--danger);" onclick="removeCostField(${costId})">
                    <span>✕</span> حذف
                </button>
            `;
            container.appendChild(costField);
            
            additionalCosts.push({ id: costId, name: '', amount: 0 });
        }

        function removeCostField(id) {
            const field = document.getElementById(`cost-name-${id}`).parentElement;
            field.remove();
            
            additionalCosts = additionalCosts.filter(cost => cost.id !== id);
        }

        function calculateProduction() {
            const productName = document.getElementById('product-name').value;
            const materialCost = parseInt(document.getElementById('material-cost').value) || 0;
            const quantity = parseInt(document.getElementById('production-quantity').value) || 0;
            const desiredProfit = parseInt(document.getElementById('desired-profit').value) || 0;
            
            if (!productName || !materialCost || !quantity) {
                alert('لطفاً فیلدهای ضروری را پر کنید');
                return;
            }
            
            // جمع‌آوری هزینه‌های اضافی
            let totalAdditionalCosts = 0;
            additionalCosts.forEach(cost => {
                const amount = parseInt(document.getElementById(`cost-amount-${cost.id}`).value) || 0;
                totalAdditionalCosts += amount;
            });
            
            const totalCost = materialCost + totalAdditionalCosts;
            const unitCost = totalCost / quantity;
            const finalPrice = unitCost * (1 + desiredProfit / 100);
            const totalProfit = (finalPrice - unitCost) * quantity;
            
            // نمایش نتایج
            document.getElementById('result-material-cost').textContent = materialCost.toLocaleString() + ' تومان';
            document.getElementById('result-additional-costs').textContent = totalAdditionalCosts.toLocaleString() + ' تومان';
            document.getElementById('result-total-cost').textContent = totalCost.toLocaleString() + ' تومان';
            document.getElementById('result-unit-cost').textContent = Math.round(unitCost).toLocaleString() + ' تومان';
            document.getElementById('result-final-price').textContent = Math.round(finalPrice).toLocaleString() + ' تومان';
            document.getElementById('result-total-profit').textContent = Math.round(totalProfit).toLocaleString() + ' تومان';
            
            // تولید توصیه‌ها
            let advice = '';
            if (desiredProfit < 20) {
                advice = '💡 سود شما پایین است. برای پوشش ریسک‌های احتمالی، سود بالاتری در نظر بگیرید.';
            } else if (desiredProfit > 50) {
                advice = '💡 سود شما بالا است. بررسی کنید که قیمت نهایی رقابتی باشد.';
            } else {
                advice = '💡 سود شما در محدوده معقولی قرار دارد.';
            }
            
            if (totalAdditionalCosts > materialCost) {
                advice += '\n⚠️ هزینه‌های اضافی شما از هزینه مواد اولیه بیشتر است. این موضوع می‌تواند سودآوری شما را کاهش دهد.';
            }
            
            if (quantity < 100) {
                advice += '\n📈 برای کاهش هزینه واحد، تولید در مقیاس بزرگتر را در نظر بگیرید.';
            }
            
            document.getElementById('production-advice').textContent = advice;
            document.getElementById('production-result').style.display = 'block';
            
            // ذخیره داده‌های تولیدی
            const productionRecord = {
                id: Date.now(),
                productName,
                materialCost,
                quantity,
                additionalCosts: totalAdditionalCosts,
                desiredProfit,
                finalPrice: Math.round(finalPrice),
                date: new Date().toLocaleDateString('fa-IR')
            };
            
            productionData.push(productionRecord);
            saveProductionData();
            
            showSuccessMessage('محاسبات با موفقیت انجام شد');
        }

        function clearProductionData() {
            if (confirm('آیا از حذف تمام داده‌های تولیدی اطمینان دارید؟ این عمل غیرقابل بازگشت است.')) {
                productionData = [];
                saveProductionData();
                document.getElementById('additional-costs').innerHTML = '';
                additionalCosts = [];
                document.getElementById('production-result').style.display = 'none';
                showSuccessMessage('تمام داده‌های تولیدی حذف شدند');
            }
        }

        // ========== بخش چک و سفته ==========
        function addCheck() {
            const type = document.getElementById('check-type').value;
            const amount = parseInt(document.getElementById('check-amount').value);
            const dueDate = document.getElementById('check-due-date').value;
            const issuer = document.getElementById('check-issuer').value;
            const recipient = document.getElementById('check-recipient').value;
            const description = document.getElementById('check-description').value;
            
            if (!amount || !dueDate || !issuer) {
                alert('لطفاً فیلدهای ضروری را پر کنید');
                return;
            }
            
            const check = {
                id: Date.now(),
                type,
                amount,
                dueDate,
                issuer,
                recipient,
                description,
                status: 'pending',
                date: new Date().toLocaleDateString('fa-IR')
            };
            
            checks.push(check);
            saveChecks();
            renderChecks();
            
            showSuccessMessage('سند با موفقیت ثبت شد');
            
            // ریست کردن فرم
            document.getElementById('check-amount').value = '';
            document.getElementById('check-due-date').value = '';
            document.getElementById('check-issuer').value = '';
            document.getElementById('check-recipient').value = '';
            document.getElementById('check-description').value = '';
        }

        function renderChecks() {
            const container = document.getElementById('checks-list');
            container.innerHTML = '';
            
            if (checks.length === 0) {
                container.innerHTML = '<div class="info-message">هنوز هیچ چک یا سفته‌ای ثبت نشده است</div>';
                return;
            }
            
            checks.forEach(check => {
                const checkEl = document.createElement('div');
                checkEl.className = 'transaction-item';
                checkEl.innerHTML = `
                    <div class="transaction-details">
                        <div class="transaction-title">${check.type === 'check' ? 'چک' : 'سفته'} - ${check.issuer}</div>
                        <div class="transaction-meta">سررسید: ${check.dueDate} | ذینفع: ${check.recipient || 'ندارد'}</div>
                        <div class="transaction-meta">${check.description || 'بدون توضیح'}</div>
                    </div>
                    <div class="transaction-amount ${check.status}">
                        ${check.amount.toLocaleString()} تومان
                        <div style="margin-top: 5px; font-size: 0.7em; color: ${check.status === 'pending' ? 'var(--warning)' : 'var(--success)'}">
                            ${check.status === 'pending' ? 'در انتظار' : 'وصول شده'}
                        </div>
                    </div>
                `;
                container.appendChild(checkEl);
            });
        }

        function clearAllChecks() {
            if (confirm('آیا از حذف تمام چک‌ها و سفته‌ها اطمینان دارید؟ این عمل غیرقابل بازگشت است.')) {
                checks = [];
                saveChecks();
                renderChecks();
                showSuccessMessage('تمام چک‌ها و سفته‌ها حذف شدند');
            }
        }

        // ========== بخش مدیریت کارمندان ==========
        function toggleSalaryFields() {
            const salaryType = document.getElementById('employee-salary-type').value;
            
            document.getElementById('fixed-salary-field').style.display = salaryType === 'fixed' ? 'block' : 'none';
            document.getElementById('percentage-salary-field').style.display = salaryType === 'percentage' ? 'block' : 'none';
            document.getElementById('piecework-salary-field').style.display = salaryType === 'piecework' ? 'block' : 'none';
        }

        function addEmployee() {
            const name = document.getElementById('employee-name').value;
            const position = document.getElementById('employee-position').value;
            const salaryType = document.getElementById('employee-salary-type').value;
            const joinDate = document.getElementById('employee-join-date').value;
            const contact = document.getElementById('employee-contact').value;
            
            let salaryData = {};
            
            if (salaryType === 'fixed') {
                const salary = parseInt(document.getElementById('employee-salary').value);
                if (!salary) {
                    alert('لطفاً حقوق ثابت را وارد کنید');
                    return;
                }
                salaryData = { type: 'fixed', amount: salary };
            }
            else if (salaryType === 'percentage') {
                const percentage = parseInt(document.getElementById('employee-percentage').value);
                if (!percentage) {
                    alert('لطفاً درصد را وارد کنید');
                    return;
                }
                salaryData = { type: 'percentage', amount: percentage };
            }
            else if (salaryType === 'piecework') {
                const pieceRate = parseInt(document.getElementById('employee-piece-rate').value);
                if (!pieceRate) {
                    alert('لطفاً نرخ قطعه‌کاری را وارد کنید');
                    return;
                }
                salaryData = { type: 'piecework', amount: pieceRate };
            }
            
            if (!name || !position || !joinDate) {
                alert('لطفاً فیلدهای ضروری را پر کنید');
                return;
            }
            
            const employee = {
                id: Date.now(),
                name,
                position,
                salary: salaryData,
                joinDate,
                contact,
                date: new Date().toLocaleDateString('fa-IR')
            };
            
            employees.push(employee);
            saveEmployees();
            renderEmployees();
            
            showSuccessMessage('کارمند با موفقیت اضافه شد');
            
            // ریست کردن فرم
            document.getElementById('employee-name').value = '';
            document.getElementById('employee-position').value = '';
            document.getElementById('employee-salary').value = '';
            document.getElementById('employee-percentage').value = '';
            document.getElementById('employee-piece-rate').value = '';
            document.getElementById('employee-join-date').value = '';
            document.getElementById('employee-contact').value = '';
        }

        function renderEmployees() {
            const container = document.getElementById('employees-list');
            container.innerHTML = '';
            
            if (employees.length === 0) {
                container.innerHTML = '<div class="info-message">هنوز هیچ کارمندی ثبت نشده است</div>';
                return;
            }
            
            employees.forEach(employee => {
                let salaryText = '';
                if (employee.salary.type === 'fixed') {
                    salaryText = `${employee.salary.amount.toLocaleString()} تومان (ثابت)`;
                } else if (employee.salary.type === 'percentage') {
                    salaryText = `${employee.salary.amount}% از فروش`;
                } else if (employee.salary.type === 'piecework') {
                    salaryText = `${employee.salary.amount.toLocaleString()} تومان (قطعه‌کاری)`;
                }
                
                const employeeEl = document.createElement('div');
                employeeEl.className = 'employee-item';
                employeeEl.innerHTML = `
                    <div class="employee-header">
                        <div class="employee-name">${employee.name}</div>
                        <div class="employee-salary">${salaryText}</div>
                    </div>
                    <div class="employee-details">
                        <div>سمت: ${employee.position}</div>
                        <div>تاریخ استخدام: ${employee.joinDate}</div>
                        <div>تماس: ${employee.contact || 'ندارد'}</div>
                        <div>نوع حقوق: ${getSalaryTypeName(employee.salary.type)}</div>
                    </div>
                    <div class="employee-controls">
                        <button class="asset-control-btn" onclick="editEmployee(${employee.id})">ویرایش</button>
                        <button class="asset-control-btn danger" onclick="deleteEmployee(${employee.id})">حذف</button>
                    </div>
                `;
                container.appendChild(employeeEl);
            });
        }

        function getSalaryTypeName(type) {
            const types = {
                'fixed': 'ثابت ماهیانه',
                'percentage': 'درصدی از فروش',
                'piecework': 'قطعه‌کاری'
            };
            return types[type] || 'نامشخص';
        }

        function deleteEmployee(id) {
            if (confirm('آیا از حذف این کارمند اطمینان دارید؟')) {
                employees = employees.filter(employee => employee.id !== id);
                saveEmployees();
                renderEmployees();
                showSuccessMessage('کارمند با موفقیت حذف شد');
            }
        }

        function clearAllEmployees() {
            if (confirm('آیا از حذف تمام کارمندان اطمینان دارید؟ این عمل غیرقابل بازگشت است.')) {
                employees = [];
                saveEmployees();
                renderEmployees();
                showSuccessMessage('تمام کارمندان حذف شدند');
            }
        }

        // ========== بخش گاو صندوق / دارایی ==========
        function addAsset() {
            const name = document.getElementById('asset-name').value;
            const value = parseInt(document.getElementById('asset-value').value);
            const type = document.getElementById('asset-type').value;
            const description = document.getElementById('asset-description').value;
            
            if (!name || !value) {
                alert('لطفاً فیلدهای ضروری را پر کنید');
                return;
            }
            
            const asset = {
                id: Date.now(),
                name,
                value,
                type,
                description,
                date: new Date().toLocaleDateString('fa-IR')
            };
            
            assets.push(asset);
            saveAssets();
            renderAssets();
            
            showSuccessMessage('دارایی با موفقیت اضافه شد');
            
            // ریست کردن فرم
            document.getElementById('asset-name').value = '';
            document.getElementById('asset-value').value = '';
            document.getElementById('asset-description').value = '';
        }

        function renderAssets() {
            const container = document.getElementById('assets-list');
            container.innerHTML = '';
            
            if (assets.length === 0) {
                container.innerHTML = '<div class="info-message">هنوز هیچ دارایی ثبت نشده است</div>';
                return;
            }
            
            let totalValue = 0;
            
            assets.forEach(asset => {
                totalValue += asset.value;
                
                const assetEl = document.createElement('div');
                assetEl.className = 'asset-item';
                assetEl.innerHTML = `
                    <div class="transaction-details">
                        <div class="transaction-title">${asset.name}</div>
                        <div class="transaction-meta">نوع: ${getAssetTypeName(asset.type)} | تاریخ ثبت: ${asset.date}</div>
                        <div class="transaction-meta">${asset.description || 'بدون توضیح'}</div>
                    </div>
                    <div class="transaction-amount income">
                        ${asset.value.toLocaleString()} تومان
                        <div class="asset-controls" style="margin-top: 5px;">
                            <button class="asset-control-btn" onclick="editAsset(${asset.id})">ویرایش</button>
                            <button class="asset-control-btn danger" onclick="deleteAsset(${asset.id})">حذف</button>
                        </div>
                    </div>
                `;
                container.appendChild(assetEl);
            });
            
            // نمایش مجموع دارایی‌ها
            const totalEl = document.createElement('div');
            totalEl.className = 'profit-display';
            totalEl.innerHTML = `
                <div class="profit-title">💰 مجموع دارایی‌های شما:</div>
                <div class="profit-amount">${totalValue.toLocaleString()} تومان</div>
            `;
            container.insertBefore(totalEl, container.firstChild);
        }

        function getAssetTypeName(type) {
            const types = {
                'cash': 'نقدی',
                'bank': 'حساب بانکی',
                'property': 'املاک',
                'vehicle': 'وسیله نقلیه',
                'gold': 'طلا و جواهرات',
                'investment': 'سرمایه‌گذاری',
                'other': 'سایر'
            };
            return types[type] || 'سایر';
        }

        function deleteAsset(id) {
            if (confirm('آیا از حذف این دارایی اطمینان دارید؟')) {
                assets = assets.filter(asset => asset.id !== id);
                saveAssets();
                renderAssets();
                showSuccessMessage('دارایی با موفقیت حذف شد');
            }
        }

        function clearAllAssets() {
            if (confirm('آیا از حذف تمام دارایی‌ها اطمینان دارید؟ این عمل غیرقابل بازگشت است.')) {
                assets = [];
                saveAssets();
                renderAssets();
                showSuccessMessage('تمام دارایی‌ها حذف شدند');
            }
        }

        // ========== بخش فاکتور ==========
        function addInvoiceItem() {
            const itemsContainer = document.getElementById('invoice-items');
            const itemRow = document.createElement('div');
            itemRow.className = 'invoice-item-row';
            itemRow.innerHTML = `
                <div style="display: flex; gap: 8px; margin-bottom: 8px;">
                    <input type="text" placeholder="نام کالا" class="item-name">
                    <input type="number" placeholder="تعداد" class="item-quantity" style="width: 80px;">
                    <input type="number" placeholder="قیمت واحد" class="item-price" style="width: 120px;">
                    <button type="button" class="add-cost-btn danger" onclick="removeInvoiceItem(this)">✕</button>
                </div>
            `;
            itemsContainer.appendChild(itemRow);
        }

        function removeInvoiceItem(button) {
            button.closest('.invoice-item-row').remove();
        }

        function generateInvoice() {
            const type = document.getElementById('invoice-type').value;
            const seller = document.getElementById('invoice-seller').value;
            const buyer = document.getElementById('invoice-buyer').value;
            const date = document.getElementById('invoice-date').value;
            const notes = document.getElementById('invoice-notes').value;
            
            if (!seller || !buyer) {
                alert('لطفاً اطلاعات فروشنده و خریدار را وارد کنید');
                return;
            }
            
            // جمع‌آوری اقلام فاکتور
            const items = [];
            let total = 0;
            
            document.querySelectorAll('.invoice-item-row').forEach(row => {
                const name = row.querySelector('.item-name').value;
                const quantity = parseInt(row.querySelector('.item-quantity').value) || 0;
                const price = parseInt(row.querySelector('.item-price').value) || 0;
                
                if (name && quantity > 0 && price > 0) {
                    const itemTotal = quantity * price;
                    total += itemTotal;
                    
                    items.push({
                        name,
                        quantity,
                        price,
                        total: itemTotal
                    });
                }
            });
            
            if (items.length === 0) {
                alert('لطفاً حداقل یک کالا به فاکتور اضافه کنید');
                return;
            }
            
            // گرفتن امضا
            let signatureData = null;
            if (signaturePad && !signaturePad.isEmpty()) {
                signatureData = signaturePad.toDataURL();
            }
            
            // ایجاد پیش‌نمایش فاکتور
            const previewContainer = document.getElementById('invoice-preview');
            previewContainer.style.display = 'block';
            
            previewContainer.innerHTML = `
                <div class="invoice-header">
                    <h2>فاکتور ${type === 'sale' ? 'فروش' : 'خرید'}</h2>
                    <p>شماره: ${Date.now()}</p>
                    <p>تاریخ: ${date}</p>
                </div>
                
                <div class="invoice-details">
                    <div>
                        <strong>فروشنده:</strong> ${seller}
                    </div>
                    <div>
                        <strong>خریدار:</strong> ${buyer}
                    </div>
                </div>
                
                <table class="invoice-items">
                    <thead>
                        <tr>
                            <th>ردیف</th>
                            <th>نام کالا</th>
                            <th>تعداد</th>
                            <th>قیمت واحد (تومان)</th>
                            <th>جمع (تومان)</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${items.map((item, index) => `
                            <tr>
                                <td>${index + 1}</td>
                                <td>${item.name}</td>
                                <td>${item.quantity}</td>
                                <td>${item.price.toLocaleString()}</td>
                                <td>${item.total.toLocaleString()}</td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
                
                <div class="invoice-total">
                    <strong>مبلغ کل فاکتور: ${total.toLocaleString()} تومان</strong>
                </div>
                
                ${notes ? `<div style="margin-top: 15px;"><strong>توضیحات:</strong> ${notes}</div>` : ''}
                
                <div class="invoice-signatures">
                    <div class="signature-box">
                        <div>امضا فروشنده</div>
                        ${signatureData ? `<img src="${signatureData}" style="max-width: 200px; max-height: 80px; margin-top: 10px; border: 1px solid #ccc;">` : '<div class="signature-line"></div>'}
                    </div>
                    <div class="signature-box">
                        <div>امضا خریدار</div>
                        <div class="signature-line"></div>
                    </div>
                </div>
                
                <div style="margin-top: 20px; text-align: center;">
                    <button class="btn" onclick="downloadInvoiceAsPDF()">
                        <span>📥</span> دانلود فاکتور (PDF)
                    </button>
                </div>
            `;
            
            // ذخیره فاکتور
            const invoice = {
                id: Date.now(),
                type,
                seller,
                buyer,
                date,
                items,
                total,
                notes,
                signature: signatureData
            };
            
            invoices.push(invoice);
            saveInvoices();
            
            showSuccessMessage('فاکتور با موفقیت ایجاد شد');
        }

        // ========== دانلود فاکتور به صورت PDF ==========
        function downloadInvoiceAsPDF() {
            const { jsPDF } = window.jspdf;
            
            // ایجاد PDF جدید
            const doc = new jsPDF();
            
            // محتوای فاکتور
            const invoiceContent = document.getElementById('invoice-preview');
            
            // استفاده از html2canvas برای گرفتن اسکرین‌شات
            html2canvas(invoiceContent, {
                scale: 2,
                useCORS: true,
                logging: false
            }).then(canvas => {
                const imgData = canvas.toDataURL('image/png');
                const imgWidth = 190;
                const pageHeight = 290;
                const imgHeight = canvas.height * imgWidth / canvas.width;
                let heightLeft = imgHeight;
                
                let position = 10;
                
                // اضافه کردن تصویر به PDF
                doc.addImage(imgData, 'PNG', 10, position, imgWidth, imgHeight);
                heightLeft -= pageHeight;
                
                // اضافه کردن صفحات بیشتر در صورت نیاز
                while (heightLeft >= 0) {
                    position = heightLeft - imgHeight;
                    doc.addPage();
                    doc.addImage(imgData, 'PNG', 10, position, imgWidth, imgHeight);
                    heightLeft -= pageHeight;
                }
                
                // ذخیره فایل
                doc.save(`فاکتور_${Date.now()}.pdf`);
                showSuccessMessage('فاکتور با موفقیت دانلود شد');
            }).catch(error => {
                console.error('خطا در ایجاد PDF:', error);
                alert('خطا در ایجاد فایل PDF. لطفاً دوباره تلاش کنید.');
            });
        }

        // ========== بخش مالیات ==========
        function calculateTax() {
            const income = parseInt(document.getElementById('tax-income').value) || 0;
            const deductions = parseInt(document.getElementById('tax-deductions').value) || 0;
            const type = document.getElementById('tax-type').value;
            
            if (income <= 0) {
                alert('لطفاً درآمد معتبر وارد کنید');
                return;
            }
            
            // محاسبه مالیات بر اساس نوع فعالیت
            let taxRate = 0;
            
            switch(type) {
                case 'individual':
                    if (income <= 56000000) {
                        taxRate = 0;
                    } else if (income <= 150000000) {
                        taxRate = 10;
                    } else if (income <= 250000000) {
                        taxRate = 15;
                    } else if (income <= 350000000) {
                        taxRate = 20;
                    } else {
                        taxRate = 25;
                    }
                    break;
                    
                case 'company':
                    taxRate = 25;
                    break;
                    
                case 'freelance':
                    taxRate = 15;
                    break;
            }
            
            // محاسبه مبلغ مالیات
            const taxableIncome = Math.max(0, income - deductions);
            const taxAmount = (taxableIncome * taxRate) / 100;
            
            // نمایش نتایج
            const resultContainer = document.getElementById('tax-result');
            resultContainer.innerHTML = `
                <div class="production-result">
                    <div class="production-title">🧮 نتایج محاسبه مالیات</div>
                    
                    <div class="cost-breakdown">
                        <div class="cost-item">
                            <span class="cost-label">درآمد سالانه:</span>
                            <span class="cost-value">${income.toLocaleString()} تومان</span>
                        </div>
                        <div class="cost-item">
                            <span class="cost-label">کسورات قانونی:</span>
                            <span class="cost-value">${deductions.toLocaleString()} تومان</span>
                        </div>
                        <div class="cost-item">
                            <span class="cost-label">درآمد مشمول مالیات:</span>
                            <span class="cost-value">${taxableIncome.toLocaleString()} تومان</span>
                        </div>
                        <div class="cost-item">
                            <span class="cost-label">نرخ مالیات:</span>
                            <span class="cost-value">${taxRate}%</span>
                        </div>
                    </div>
                    
                    <div class="final-price-section">
                        <div class="price-label">💰 مبلغ مالیات قابل پرداخت:</div>
                        <div class="price-amount">${Math.round(taxAmount).toLocaleString()} تومان</div>
                    </div>
                </div>
            `;
            
            // ذخیره داده‌های مالیاتی
            taxData.push({
                income,
                deductions,
                type,
                taxRate,
                taxAmount: Math.round(taxAmount),
                date: new Date().toLocaleDateString('fa-IR')
            });
            
            saveTaxData();
            
            showSuccessMessage('مالیات با موفقیت محاسبه شد');
        }

        // ========== بخش بودجه‌بندی ==========
        function createBudget() {
            const month = document.getElementById('budget-month').value;
            const year = parseInt(document.getElementById('budget-year').value) || 1403;
            const income = parseInt(document.getElementById('budget-income').value) || 0;
            const expenses = parseInt(document.getElementById('budget-expenses').value) || 0;
            
            if (income <= 0 || expenses <= 0) {
                alert('لطفاً مقادیر معتبر وارد کنید');
                return;
            }
            
            const budget = {
                id: Date.now(),
                month,
                year,
                income,
                expenses,
                balance: income - expenses,
                date: new Date().toLocaleDateString('fa-IR')
            };
            
            budgetData.push(budget);
            saveBudgetData();
            renderBudget();
            
            showSuccessMessage('بودجه با موفقیت ثبت شد');
        }

        function renderBudget() {
            const container = document.getElementById('budget-list');
            container.innerHTML = '';
            
            if (budgetData.length === 0) {
                container.innerHTML = '<div class="info-message">هنوز هیچ بودجه‌ای ثبت نشده است</div>';
                return;
            }
            
            budgetData.forEach(budget => {
                const monthNames = [
                    'فروردین', 'اردیبهشت', 'خرداد', 'تیر', 'مرداد', 'شهریور',
                    'مهر', 'آبان', 'آذر', 'دی', 'بهمن', 'اسفند'
                ];
                
                const budgetElement = document.createElement('div');
                budgetElement.className = 'transaction-item';
                budgetElement.innerHTML = `
                    <div class="transaction-details">
                        <div class="transaction-title">بودجه ${monthNames[budget.month - 1]} ${budget.year}</div>
                        <div class="transaction-meta">
                            درآمد: ${budget.income.toLocaleString()} تومان | 
                            هزینه: ${budget.expenses.toLocaleString()} تومان
                        </div>
                    </div>
                    <div class="transaction-amount ${budget.balance >= 0 ? 'income' : 'expense'}">
                        ${budget.balance >= 0 ? '+' : ''}${budget.balance.toLocaleString()} تومان
                    </div>
                `;
                container.appendChild(budgetElement);
            });
        }

        // ========== بخش گزارش‌ها ==========
        function generateAdvancedReport() {
            const reportType = document.getElementById('report-type').value;
            const period = document.getElementById('report-period').value;
            
            let reportContent = '';
            
            switch(reportType) {
                case 'financial':
                    reportContent = generateFinancialReport();
                    break;
                case 'tax':
                    reportContent = generateTaxReport();
                    break;
                case 'performance':
                    reportContent = generatePerformanceReport();
                    break;
                case 'inventory':
                    reportContent = generateInventoryReport();
                    break;
            }
            
            const resultContainer = document.getElementById('advanced-report-result');
            resultContainer.innerHTML = reportContent;
            
            showSuccessMessage('گزارش پیشرفته ایجاد شد');
        }

        function generateFinancialReport() {
            const totalIncome = financeTransactions
                .filter(t => t.type === 'income')
                .reduce((sum, t) => sum + t.amount, 0);
                
            const totalExpense = financeTransactions
                .filter(t => t.type === 'expense')
                .reduce((sum, t) => sum + t.amount, 0);
            
            return `
                <div class="production-result">
                    <div class="production-title">📊 گزارش مالی جامع</div>
                    
                    <div class="cost-breakdown">
                        <div class="cost-item">
                            <span class="cost-label">تعداد تراکنش‌ها:</span>
                            <span class="cost-value">${financeTransactions.length}</span>
                        </div>
                        <div class="cost-item">
                            <span class="cost-label">کل درآمد:</span>
                            <span class="cost-value">${totalIncome.toLocaleString()} تومان</span>
                        </div>
                        <div class="cost-item">
                            <span class="cost-label">کل هزینه:</span>
                            <span class="cost-value">${totalExpense.toLocaleString()} تومان</span>
                        </div>
                        <div class="cost-item">
                            <span class="cost-label">سود خالص:</span>
                            <span class="cost-value">${(totalIncome - totalExpense).toLocaleString()} تومان</span>
                        </div>
                    </div>
                </div>
            `;
        }

        // ========== بخش یادآوری‌ها ==========
        function addReminder() {
            const title = document.getElementById('reminder-title').value;
            const description = document.getElementById('reminder-description').value;
            const date = document.getElementById('reminder-date').value;
            const priority = document.getElementById('reminder-priority').value;
            
            if (!title || !date) {
                alert('لطفاً عنوان و تاریخ یادآوری را وارد کنید');
                return;
            }
            
            const reminder = {
                id: Date.now(),
                title,
                description,
                date,
                priority,
                status: 'active',
                created: new Date().toLocaleDateString('fa-IR')
            };
            
            reminders.push(reminder);
            saveReminders();
            renderReminders();
            
            showSuccessMessage('یادآوری با موفقیت اضافه شد');
        }

        function renderReminders() {
            const container = document.getElementById('reminders-list');
            container.innerHTML = '';
            
            if (reminders.length === 0) {
                container.innerHTML = '<div class="info-message">هنوز هیچ یادآوری ثبت نشده است</div>';
                return;
            }
            
            // مرتب‌سازی یادآوری‌ها بر اساس تاریخ
            const sortedReminders = [...reminders].sort((a, b) => new Date(a.date) - new Date(b.date));
            
            sortedReminders.forEach(reminder => {
                const priorityColors = {
                    low: '#27ae60',
                    medium: '#f39c12',
                    high: '#e74c3c'
                };
                
                const reminderElement = document.createElement('div');
                reminderElement.className = 'transaction-item';
                reminderElement.style.borderRightColor = priorityColors[reminder.priority];
                reminderElement.innerHTML = `
                    <div class="transaction-details">
                        <div class="transaction-title">${reminder.title}</div>
                        <div class="transaction-meta">
                            ${reminder.description} | 
                            تاریخ: ${reminder.date} | 
                            اولویت: <span style="color: ${priorityColors[reminder.priority]}">${reminder.priority === 'low' ? 'کم' : reminder.priority === 'medium' ? 'متوسط' : 'بالا'}</span>
                        </div>
                    </div>
                    <div class="asset-controls">
                        <button class="asset-control-btn danger" onclick="deleteReminder(${reminder.id})">🗑️</button>
                    </div>
                `;
                container.appendChild(reminderElement);
            });
        }

        function deleteReminder(id) {
            if (confirm('آیا از حذف این یادآوری اطمینان دارید؟')) {
                reminders = reminders.filter(reminder => reminder.id !== id);
                saveReminders();
                renderReminders();
                showSuccessMessage('یادآوری با موفقیت حذف شد');
            }
        }

        // ========== بررسی و نمایش یادآوری‌ها ==========
        function checkReminders() {
            const now = new Date();
            const notificationContainer = document.getElementById('reminder-notification');
            notificationContainer.innerHTML = '';
            
            let hasActiveReminders = false;
            
            reminders.forEach(reminder => {
                const reminderDate = new Date(reminder.date);
                const timeDiff = reminderDate - now;
                const hoursDiff = timeDiff / (1000 * 60 * 60);
                
                // اگر یادآوری در 24 ساعت آینده است
                if (hoursDiff <= 24 && hoursDiff >= 0) {
                    hasActiveReminders = true;
                    
                    const notification = document.createElement('div');
                    notification.className = 'reminder-notification';
                    notification.innerHTML = `
                        <div class="reminder-notification-title">⏰ ${reminder.title}</div>
                        <div class="reminder-notification-content">
                            ${reminder.description}<br>
                            <strong>زمان: ${reminder.date}</strong><br>
                            ${getReminderMessage()}
                        </div>
                    `;
                    notificationContainer.appendChild(notification);
                }
            });
            
            if (hasActiveReminders) {
                notificationContainer.style.display = 'block';
            } else {
                notificationContainer.style.display = 'none';
            }
        }

        function getReminderMessage() {
            return `📝 پیام مهم: برنامه‌ریزی و نظم، کلید موفقیت در مدیریت مالی است. 
همیشه هزینه‌های خود را پیگیری کنید، برای آینده برنامه‌ریزی مالی داشته باشید، 
و از فرصت‌های سرمایه‌گذاری هوشمندانه استفاده نمایید. موفقیت مالی نیاز به 
مدیریت دقیق، صبر و یادگیری مستمر دارد. هر روز قدم‌های کوچک اما مستمر 
بردارید و شاهد رشد چشمگیر财务状况 خود باشید.`;
        }

        // ========== بخش ارز دیجیتال ==========
        function displayCryptoList() {
            const cryptoCurrencies = [
                // ارزهای پرپتانسیل
                { name: "بیت‌کوین", symbol: "BTC", category: "پرپتانسیل", potential: "عالی" },
                { name: "اتریوم", symbol: "ETH", category: "پرپتانسیل", potential: "عالی" },
                { name: "پولکادات", symbol: "DOT", category: "پرپتانسیل", potential: "عالی" },
                { name: "سولانا", symbol: "SOL", category: "پرپتانسیل", potential: "عالی" },
                { name: "کازماس", symbol: "ATOM", category: "پرپتانسیل", potential: "عالی" },
                
                // ارزهای متوسط
                { name: "کاردانو", symbol: "ADA", category: "متوسط", potential: "خوب" },
                { name: "چین لینک", symbol: "LINK", category: "متوسط", potential: "خوب" },
                { name: "لایت‌کوین", symbol: "LTC", category: "متوسط", potential: "خوب" },
                { name: "استلار", symbol: "XLM", category: "متوسط", potential: "خوب" },
                { name: "مونرو", symbol: "XMR", category: "متوسط", potential: "خوب" },
                
                // سایر ارزها
                { name: "دوج‌کوین", symbol: "DOGE", category: "سایر", potential: "متوسط" },
                { name: "شیبا اینو", symbol: "SHIB", category: "سایر", potential: "متوسط" },
                { name: "آوالانچ", symbol: "AVAX", category: "سایر", potential: "متوسط" },
                { name: "الگوراند", symbol: "ALGO", category: "سایر", potential: "متوسط" },
                { name: "ترون", symbol: "TRX", category: "سایر", potential: "متوسط" }
            ];
            
            const cryptoContainer = document.getElementById('crypto-list');
            cryptoContainer.innerHTML = '';
            
            // گروه‌بندی ارزها بر اساس دسته‌بندی
            const groupedCryptos = {};
            cryptoCurrencies.forEach(crypto => {
                if (!groupedCryptos[crypto.category]) {
                    groupedCryptos[crypto.category] = [];
                }
                groupedCryptos[crypto.category].push(crypto);
            });
            
            // نمایش ارزها بر اساس دسته‌بندی
            Object.keys(groupedCryptos).forEach(category => {
                const categoryTitle = document.createElement('h3');
                categoryTitle.style.margin = '15px 0 10px';
                categoryTitle.style.color = 'var(--dark)';
                categoryTitle.textContent = `دسته‌بندی: ${category}`;
                cryptoContainer.appendChild(categoryTitle);
                
                groupedCryptos[category].forEach(crypto => {
                    const cryptoElement = document.createElement('div');
                    cryptoElement.className = 'crypto-item';
                    cryptoElement.innerHTML = `
                        <div class="crypto-details">
                            <div class="crypto-name">${crypto.name}</div>
                            <div class="crypto-symbol">${crypto.symbol} - پتانسیل: ${crypto.potential}</div>
                        </div>
                        <div class="crypto-price">${crypto.category === 'پرپتانسیل' ? '⭐' : '🔹'}</div>
                    `;
                    cryptoContainer.appendChild(cryptoElement);
                });
            });
        }

        function generateCryptoRecommendations() {
            const investmentAmount = parseInt(document.getElementById('crypto-investment-amount').value) || 20000000;
            const today = new Date().toLocaleDateString('fa-IR');
            
            // ارزهای پیشنهادی امروز
            const todayRecommendations = [
                { name: "بیت‌کوین", symbol: "BTC", action: "خرید", reason: "کاهش ۲٪ در ۲۴ ساعت گذشته", amount: investmentAmount },
                { name: "اتریوم", symbol: "ETH", action: "خرید", reason: "کاهش ۱.۸٪ در ۲۴ ساعت گذشته", amount: investmentAmount },
                { name: "پولکادات", symbol: "DOT", action: "خرید", reason: "کاهش ۲.۲٪ در ۲۴ ساعت گذشته", amount: investmentAmount },
                { name: "سولانا", symbol: "SOL", action: "فروش", reason: "افزایش ۲.۵٪ در ۲۴ ساعت گذشته", amount: investmentAmount },
                { name: "کازماس", symbol: "ATOM", action: "خرید", reason: "کاهش ۱.۹٪ در ۲۴ ساعت گذشته", amount: investmentAmount }
            ];
            
            const recommendationsContainer = document.getElementById('crypto-recommendations');
            recommendationsContainer.innerHTML = '';
            
            const title = document.createElement('h3');
            title.style.margin = '0 0 15px';
            title.style.color = 'var(--dark)';
            title.style.textAlign = 'center';
            title.innerHTML = `📈 پیشنهادات سرمایه‌گذاری - ${today}`;
            recommendationsContainer.appendChild(title);
            
            const strategyInfo = document.createElement('div');
            strategyInfo.className = 'info-message';
            strategyInfo.innerHTML = `
                <div class="info-title">🎯 استراتژی معاملاتی ۲٪</div>
                <div class="info-content">
                    <strong>روش کار:</strong><br>
                    • هر ارز اگر ۲٪ کاهش قیمت داشت، ${investmentAmount.toLocaleString()} تومان بخرید<br>
                    • وقتی ۲٪ افزایش قیمت داشت، بفروشید<br>
                    • این روند را هر روز تکرار کنید<br>
                    • صرافی پیشنهادی: <a href="https://tabdeal.org/auth/register-req?refcode=1btx55" target="_blank">تبادل (Tabdeal)</a>
                </div>
            `;
            recommendationsContainer.appendChild(strategyInfo);
            
            todayRecommendations.forEach(crypto => {
                const cryptoElement = document.createElement('div');
                cryptoElement.className = 'crypto-item';
                cryptoElement.style.borderRightColor = crypto.action === 'خرید' ? 'var(--success)' : 'var(--danger)';
                cryptoElement.innerHTML = `
                    <div class="crypto-details">
                        <div class="crypto-name">${crypto.name} (${crypto.symbol})</div>
                        <div class="crypto-symbol">عمل: ${crypto.action} | دلیل: ${crypto.reason}</div>
                    </div>
                    <div class="crypto-price" style="color: ${crypto.action === 'خرید' ? 'var(--success)' : 'var(--danger)'}">
                        ${crypto.action === 'خرید' ? '🟢' : '🔴'} ${crypto.amount.toLocaleString()} تومان
                    </div>
                `;
                recommendationsContainer.appendChild(cryptoElement);
            });
            
            showSuccessMessage('پیشنهادات سرمایه‌گذاری امروز تولید شد');
        }

        // ========== بخش راه‌های کسب درآمد ==========
        function displayIncomeMethods() {
            const incomeMethods = [
                {
                    title: "۱. فروش محصولات دیجیتال",
                    description: "ایجاد و فروش کتاب‌های الکترونیکی، دوره‌های آموزشی، قالب‌های سایت و نرم‌افزارها. این روش نیاز به سرمایه اولیه کمی دارد و درآمد passively ایجاد می‌کند. می‌توانید از پلتفرم‌هایی مانند Gumroad، Teachable یا فروش مستقیم از وبسایت خود استفاده کنید."
                },
                {
                    title: "۲. کسب درآمد از یوتیوب",
                    description: "ایجاد کانال یوتیوب در حوزه‌های پرطرفدار مانند آموزش، سرگرمی، تکنولوژی و کسب درآمد از طریق تبلیغات، اسپانسرشیپ و فروش محصولات. برای موفقیت در این حوزه باید محتوای با کیفیت و منظم تولید کنید."
                },
                {
                    title: "۳. برنامه‌نویسی فریلنسری",
                    description: "انجام پروژه‌های برنامه‌نویسی برای شرکت‌ها و افراد مختلف از طریق پلتفرم‌های فریلنسری مانند پونیشا، جابینجا و Upwork. این روش برای توسعه‌دهندگان و برنامه‌نویسان بسیار مناسب است."
                },
                {
                    title: "۴. تجارت الکترونیک",
                    description: "راه‌اندازی فروشگاه اینترنتی و فروش محصولات فیزیکی یا دیجیتال. می‌توانید از پلتفرم‌هایی مانند دیجی‌کالا، آمازون یا Shopify استفاده کنید. dropshipping نیز گزینه‌ای کم‌ریسک برای شروع است."
                },
                {
                    title: "۵. مشاوره تخصصی",
                    description: "ارائه خدمات مشاوره در حوزه تخصصی خود مانند مشاوره مالی، بازاریابی، فنی یا مدیریتی به کسب‌وکارها و افراد. این روش برای متخصصان با تجربه بسیار مناسب است."
                },
                {
                    title: "۶. سرمایه‌گذاری در بورس",
                    description: "سرمایه‌گذاری در سهام شرکت‌های بزرگ و پرداخت سود. این روش نیاز به دانش تخصصی و تحلیل بازار دارد. با آموزش دیدن و شروع با سرمایه کم می‌توانید به تدریج پیشرفت کنید."
                },
                {
                    title: "۷. ایجاد اپلیکیشن موبایل",
                    description: "توسعه اپلیکیشن‌های موبایل و کسب درآمد از طریق تبلیغات، فروش درون برنامه‌ای و خریدهای premium. ایده‌های خلاقانه می‌توانند درآمد بالایی ایجاد کنند."
                },
                {
                    title: "۸. کسب درآمد از شبکه‌های اجتماعی",
                    description: "ایجاد صفحه در اینستاگرام، تلگرام یا سایر شبکه‌های اجتماعی و کسب درآمد از طریق تبلیغات، همکاری با برندها و فروش محصولات. تولید محتوای جذاب و تعامل با مخاطبان کلید موفقیت است."
                },
                {
                    title: "۹. تدریس آنلاین",
                    description: "ارائه دوره‌های آموزشی آنلاین در زمینه‌های تخصصی خود از طریق پلتفرم‌های آموزش الکترونیک. می‌توانید از مهارت‌های خود برای آموزش دیگران استفاده کنید."
                },
                {
                    title: "۱۰. ترجمه و تولید محتوا",
                    description: "ارائه خدمات ترجمه، نویسندگی و تولید محتوا برای وبسایت‌ها، مجلات و کسب‌وکارهای مختلف. این روش برای افرادی با مهارت‌های زبانی و نویسندگی مناسب است."
                },
                {
                    title: "۱۱. سرمایه‌گذاری در املاک",
                    description: "خرید و فروش املاک، اجاره دادن property و سرمایه‌گذاری در پروژه‌های ساختمانی. این روش نیاز به سرمایه اولیه بالایی دارد اما بازدهی خوبی دارد."
                },
                {
                    title: "۱۲. کسب درآمد از affiliate marketing",
                    description: "تبلیغ محصولات دیگران و دریافت کمیسیون از هر فروش که از طریق لینک شما انجام شود. می‌توانید از طریق وبسایت، شبکه‌های اجتماعی یا ایمیل مارکتینگ این کار را انجام دهید."
                },
                {
                    title: "۱۳. طراحی گرافیک",
                    description: "ارائه خدمات طراحی لوگو، بنر، اینفوگرافیک و سایر طرح‌های گرافیکی برای کسب‌وکارها. این روش برای افراد خلاق با مهارت‌های طراحی مناسب است."
                },
                {
                    title: "۱۴. مدیریت شبکه‌های اجتماعی",
                    description: "مدیریت صفحات اجتماعی کسب‌وکارها و ایجاد استراتژی محتوا برای جذب مخاطب بیشتر. این شغل برای افرادی که در شبکه‌های اجتماعی فعال هستند مناسب است."
                },
                {
                    title: "۱۵. کسب درآمد از بازی‌های کامپیوتری",
                    description: "شرکت در تورنمنت‌های بازی، استریم کردن بازی‌ها در پلتفرم‌هایی مانند Twitch و تولید محتوای بازی. این روش برای گیمرهای حرفه‌ای مناسب است."
                },
                {
                    title: "۱۶. سرمایه‌گذاری در ارزهای دیجیتال",
                    description: "خرید و فروش ارزهای دیجیتال، استیکینگ و ارائه خدمات مربوط به بلاکچین. این روش ریسک بالایی دارد اما پتانسیل سودآوری زیادی نیز دارد."
                },
                {
                    title: "۱۷. تولید پادکست",
                    description: "ایجاد پادکست در حوزه‌های تخصصی و کسب درآمد از طریق تبلیغات، اسپانسرشیپ و فروش محصولات. پادکست‌ها محبوبیت روزافزونی پیدا کرده‌اند."
                },
                {
                    title: "۱۸. خدمات SEO",
                    description: "ارائه خدمات بهینه‌سازی سایت برای موتورهای جستجو به کسب‌وکارهای مختلف. این مهارت بسیار ارزشمند است و تقاضای بالایی دارد."
                },
                {
                    title: "۱۹. کسب درآمد از NFT",
                    description: "خلق و فروش آثار هنری دیجیتال در قالب NFT در پلتفرم‌های مختلف. این بازار جدید فرصت‌های درآمدزایی جالبی ایجاد کرده است."
                },
                {
                    title: "۲۰. مشاوره سرمایه‌گذاری",
                    description: "ارائه مشاوره تخصصی در زمینه سرمایه‌گذاری در بازارهای مختلف به افراد و سازمان‌ها. این روش برای متخصصان مالی با تجربه مناسب است."
                }
            ];
            
            const incomeContainer = document.getElementById('income-methods');
            incomeContainer.innerHTML = '';
            
            incomeMethods.forEach(method => {
                const methodElement = document.createElement('div');
                methodElement.className = 'income-method';
                methodElement.innerHTML = `
                    <div class="income-title">${method.title}</div>
                    <div class="income-description">${method.description}</div>
                `;
                incomeContainer.appendChild(methodElement);
            });
        }

        // ========== ویژگی ریست تمام داده‌ها ==========
        function resetAllData() {
            if (confirm('⚠️ هشدار: آیا از ریست کردن تمام داده‌های سیستم اطمینان دارید؟\n\nاین عمل تمام تراکنش‌ها، چک‌ها، کارمندان، دارایی‌ها و سایر اطلاعات را پاک خواهد کرد و غیرقابل بازگشت است.')) {
                // پاک کردن تمام داده‌ها از localStorage
                localStorage.removeItem('financeTransactions');
                localStorage.removeItem('productionData');
                localStorage.removeItem('checks');
                localStorage.removeItem('employees');
                localStorage.removeItem('assets');
                localStorage.removeItem('invoices');
                localStorage.removeItem('taxData');
                localStorage.removeItem('budgetData');
                localStorage.removeItem('reminders');
                
                // ریست کردن آرایه‌ها
                financeTransactions = [];
                productionData = [];
                checks = [];
                employees = [];
                assets = [];
                invoices = [];
                taxData = [];
                budgetData = [];
                reminders = [];
                additionalCosts = [];
                
                // به‌روزرسانی نمایش
                renderFinanceTransactions();
                renderChecks();
                renderEmployees();
                renderAssets();
                renderBudget();
                renderReminders();
                updateFinanceChart();
                
                // پاک کردن فرم‌ها
                document.getElementById('additional-costs').innerHTML = '';
                document.getElementById('production-result').style.display = 'none';
                document.getElementById('invoice-preview').style.display = 'none';
                document.getElementById('tax-result').innerHTML = '';
                document.getElementById('advanced-report-result').innerHTML = '';
                document.getElementById('crypto-recommendations').innerHTML = '';
                
                showSuccessMessage('تمام داده‌های سیستم با موفقیت ریست شدند');
            }
        }

        // ========== نمودار مالی ==========
        let financeChart = null;

        function initFinanceChart() {
            const ctx = document.getElementById('financeChart').getContext('2d');
            financeChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['درآمد', 'هزینه'],
                    datasets: [{
                        data: [0, 0],
                        backgroundColor: ['#27ae60', '#e74c3c'],
                        borderWidth: 2,
                        borderColor: '#fff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            rtl: true,
                            labels: {
                                font: {
                                    family: 'Tahoma'
                                },
                                padding: 15
                            }
                        }
                    }
                }
            });
            
            updateFinanceChart();
        }

        function updateFinanceChart() {
            if (!financeChart) return;
            
            const totalIncome = financeTransactions
                .filter(t => t.type === 'income')
                .reduce((sum, t) => sum + t.amount, 0);
                
            const totalExpense = financeTransactions
                .filter(t => t.type === 'expense')
                .reduce((sum, t) => sum + t.amount, 0);
            
            financeChart.data.datasets[0].data = [totalIncome, totalExpense];
            financeChart.update();
        }

        // ========== تابع نمایش پیام موفقیت ==========
        function showSuccessMessage(message) {
            // حذف پیام قبلی اگر وجود دارد
            const existingMessage = document.querySelector('.success-message');
            if (existingMessage) {
                existingMessage.remove();
            }
            
            // ایجاد پیام جدید
            const successMessage = document.createElement('div');
            successMessage.className = 'success-message';
            successMessage.textContent = message;
            
            // اضافه کردن پیام به بخش مالی (اولین بخش فعال)
            const activeSection = document.querySelector('.section.active');
            activeSection.insertBefore(successMessage, activeSection.firstChild);
            
            // حذف خودکار پیام بعد از 3 ثانیه
            setTimeout(() => {
                if (successMessage.parentElement) {
                    successMessage.remove();
                }
            }, 3000);
        }

        // توابع تکمیلی
        function editEmployee(id) {
            const employee = employees.find(emp => emp.id === id);
            if (employee) {
                document.getElementById('employee-name').value = employee.name;
                document.getElementById('employee-position').value = employee.position;
                document.getElementById('employee-salary-type').value = employee.salary.type;
                
                if (employee.salary.type === 'fixed') {
                    document.getElementById('employee-salary').value = employee.salary.amount;
                } else if (employee.salary.type === 'percentage') {
                    document.getElementById('employee-percentage').value = employee.salary.amount;
                } else if (employee.salary.type === 'piecework') {
                    document.getElementById('employee-piece-rate').value = employee.salary.amount;
                }
                
                document.getElementById('employee-join-date').value = employee.joinDate;
                document.getElementById('employee-contact').value = employee.contact;
                
                toggleSalaryFields();
                
                // حذف کارمند قدیمی
                employees = employees.filter(emp => emp.id !== id);
                renderEmployees();
                
                showSuccessMessage('اطلاعات کارمند برای ویرایش بارگذاری شد');
            }
        }

        function editAsset(id) {
            const asset = assets.find(a => a.id === id);
            if (asset) {
                document.getElementById('asset-name').value = asset.name;
                document.getElementById('asset-value').value = asset.value;
                document.getElementById('asset-type').value = asset.type;
                document.getElementById('asset-description').value = asset.description;
                
                // حذف دارایی قدیمی
                assets = assets.filter(a => a.id !== id);
                renderAssets();
                
                showSuccessMessage('اطلاعات دارایی برای ویرایش بارگذاری شد');
            }
        }

        // مدیریت بازه زمانی سفارشی در گزارش‌ها
        document.getElementById('report-period').addEventListener('change', function() {
            const customRange = document.getElementById('custom-date-range');
            customRange.style.display = this.value === 'custom' ? 'block' : 'none';
        });

        // توابع گزارش‌های تکمیلی
        function generateTaxReport() {
            const totalTax = taxData.reduce((sum, item) => sum + item.taxAmount, 0);
            
            return `
                <div class="production-result">
                    <div class="production-title">🧮 گزارش مالیاتی</div>
                    
                    <div class="cost-breakdown">
                        <div class="cost-item">
                            <span class="cost-label">تعداد محاسبات مالیاتی:</span>
                            <span class="cost-value">${taxData.length}</span>
                        </div>
                        <div class="cost-item">
                            <span class="cost-label">کل مالیات محاسبه شده:</span>
                            <span class="cost-value">${totalTax.toLocaleString()} تومان</span>
                        </div>
                    </div>
                </div>
            `;
        }

        function generatePerformanceReport() {
            const totalEmployees = employees.length;
            const avgSalary = totalEmployees > 0 ? 
                employees.reduce((sum, emp) => {
                    if (emp.salary.type === 'fixed') {
                        return sum + emp.salary.amount;
                    }
                    return sum;
                }, 0) / totalEmployees : 0;
            
            return `
                <div class="production-result">
                    <div class="production-title">📈 گزارش عملکرد</div>
                    
                    <div class="cost-breakdown">
                        <div class="cost-item">
                            <span class="cost-label">تعداد کارمندان:</span>
                            <span class="cost-value">${totalEmployees}</span>
                        </div>
                        <div class="cost-item">
                            <span class="cost-label">میانگین حقوق:</span>
                            <span class="cost-value">${Math.round(avgSalary).toLocaleString()} تومان</span>
                        </div>
                    </div>
                </div>
            `;
        }

        function generateInventoryReport() {
            const totalAssets = assets.length;
            const totalValue = assets.reduce((sum, asset) => sum + asset.value, 0);
            
            return `
                <div class="production-result">
                    <div class="production-title">📦 گزارش موجودی و دارایی</div>
                    
                    <div class="cost-breakdown">
                        <div class="cost-item">
                            <span class="cost-label">تعداد دارایی‌ها:</span>
                            <span class="cost-value">${totalAssets}</span>
                        </div>
                        <div class="cost-item">
                            <span class="cost-label">ارزش کل دارایی‌ها:</span>
                            <span class="cost-value">${totalValue.toLocaleString()} تومان</span>
                        </div>
                    </div>
                </div>
            `;
        }
    </script>
</body>
</html>