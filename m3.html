<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ‘¥ Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Ù…Ù†Ø¯Ø§Ù† - Ø³ÛŒØ³ØªÙ… Ø­Ø³Ø§Ø¨Ø¯Ø§Ø±ÛŒ</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #00b894;
            --primary-dark: #00a085;
            --secondary: #2d3436;
            --accent: #0984e3;
            --danger: #e74c3c;
            --warning: #f39c12;
            --success: #27ae60;
            --purple: #9b59b6;
            --orange: #e67e22;
            --teal: #1abc9c;
            --dark: #2d3436;
            --light: #dfe6e9;
            --gradient: linear-gradient(135deg, var(--primary), var(--secondary));
            --rainbow: linear-gradient(90deg, #ff7675, #fd79a8, #74b9ff, #55efc4, #ffeaa7, #ff7675);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Vazir', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #2d3436 0%, #636e72 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            min-height: calc(100vh - 40px);
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.25);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .header {
            background: var(--gradient);
            color: white;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            position: relative;
        }

        .header h1 {
            font-size: 1.5em;
            margin-bottom: 5px;
            font-weight: 800;
        }

        .header p {
            opacity: 0.9;
            font-size: 0.9em;
        }

        .back-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 700;
            transition: all 0.3s;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .back-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }

        .form-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            margin-bottom: 20px;
            border: 1px solid #f0f0f0;
            position: relative;
            overflow: hidden;
        }

        .form-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: var(--gradient);
        }

        .form-title {
            font-size: 1.2em;
            font-weight: 800;
            margin-bottom: 20px;
            color: var(--dark);
            text-align: center;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--primary);
        }

        .form-group {
            margin-bottom: 18px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 700;
            color: var(--dark);
            font-size: 0.9em;
        }

        input, select, textarea {
            width: 100%;
            padding: 14px;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            font-size: 15px;
            transition: all 0.3s;
            background: #fafafa;
            font-family: inherit;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary);
            background: white;
            box-shadow: 0 0 0 3px rgba(0, 184, 148, 0.1);
        }

        .btn {
            background: var(--gradient);
            color: white;
            border: none;
            padding: 16px 25px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 15px;
            font-weight: 800;
            transition: all 0.3s;
            width: 100%;
            box-shadow: 0 5px 15px rgba(0, 184, 148, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 184, 148, 0.4);
        }

        .btn:active {
            transform: translateY(1px);
        }

        .btn.loading::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--rainbow);
            background-size: 200% 100%;
            animation: rainbow-loading 1.5s linear infinite;
        }

        @keyframes rainbow-loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--danger), #c0392b);
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.3);
        }

        .btn-danger:hover {
            box-shadow: 0 8px 20px rgba(231, 76, 60, 0.4);
        }

        .btn-warning {
            background: linear-gradient(135deg, var(--warning), #e67e22);
            box-shadow: 0 5px 15px rgba(243, 156, 18, 0.3);
        }

        .btn-warning:hover {
            box-shadow: 0 8px 20px rgba(243, 156, 18, 0.4);
        }

        .success-message {
            background: var(--success);
            color: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            margin: 15px 0;
            font-weight: 700;
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.4);
            animation: slideIn 0.5s ease-out;
            font-size: 0.9em;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .employee-list {
            margin-top: 20px;
        }

        .employee-item {
            background: white;
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-right: 5px solid var(--purple);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .employee-item:hover {
            transform: translateX(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

        .employee-item.new {
            border-right-color: var(--success);
            background: linear-gradient(135deg, #fff, #f0fff4);
        }

        .employee-item.probation {
            border-right-color: var(--warning);
            background: linear-gradient(135deg, #fff, #fff9e6);
        }

        .employee-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .employee-name {
            font-weight: 800;
            font-size: 1.1em;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .employee-salary {
            font-weight: 800;
            font-size: 1.1em;
            color: var(--success);
        }

        .employee-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-bottom: 15px;
        }

        .employee-detail {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .employee-detail:last-child {
            border-bottom: none;
        }

        .detail-label {
            font-weight: 700;
            color: #7f8c8d;
            font-size: 0.85em;
        }

        .detail-value {
            font-weight: 600;
            color: var(--dark);
            font-size: 0.85em;
        }

        .employee-controls {
            display: flex;
            gap: 8px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .control-btn {
            padding: 8px 15px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.8em;
            font-weight: 700;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .control-btn.edit {
            background: var(--accent);
            color: white;
        }

        .control-btn.payroll {
            background: var(--success);
            color: white;
        }

        .control-btn.delete {
            background: var(--danger);
            color: white;
        }

        .control-btn.report {
            background: var(--purple);
            color: white;
        }

        .control-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .summary-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .summary-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            text-align: center;
            transition: transform 0.3s;
            border-top: 4px solid var(--purple);
        }

        .summary-card:hover {
            transform: translateY(-5px);
        }

        .summary-card.total {
            border-top-color: var(--purple);
        }

        .summary-card.active {
            border-top-color: var(--success);
        }

        .summary-card.probation {
            border-top-color: var(--warning);
        }

        .summary-card.salary {
            border-top-color: var(--accent);
        }

        .summary-card h3 {
            font-size: 0.85em;
            margin-bottom: 10px;
            color: #7f8c8d;
        }

        .summary-card .amount {
            font-size: 1.4em;
            font-weight: 800;
        }

        .chart-container {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            margin: 20px 0;
            height: 300px;
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #7f8c8d;
        }

        .empty-state .icon {
            font-size: 3em;
            margin-bottom: 15px;
            opacity: 0.5;
        }

        .empty-state p {
            font-size: 1em;
        }

        .filter-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-tab {
            padding: 10px 20px;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 700;
            font-size: 0.85em;
            transition: all 0.3s;
        }

        .filter-tab.active {
            background: var(--purple);
            color: white;
            border-color: var(--purple);
        }

        .filter-tab:hover {
            transform: translateY(-2px);
        }

        .payroll-section {
            background: linear-gradient(135deg, #a29bfe, #6c5ce7);
            color: white;
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(108, 92, 231, 0.3);
        }

        .payroll-title {
            font-weight: 800;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .payroll-list {
            margin-top: 15px;
        }

        .payroll-item {
            background: rgba(255, 255, 255, 0.9);
            color: var(--dark);
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .payroll-details {
            flex: 1;
        }

        .payroll-name {
            font-weight: 700;
            font-size: 0.9em;
        }

        .payroll-position {
            font-size: 0.8em;
            color: #7f8c8d;
        }

        .payroll-amount {
            font-weight: 800;
            font-size: 1em;
            color: var(--success);
        }

        .salary-structure {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin-top: 10px;
            border: 2px solid #e0e0e0;
        }

        .salary-item {
            display: flex;
            justify-content: space-between;
            padding: 5px 0;
            font-size: 0.85em;
        }

        .salary-total {
            border-top: 2px solid var(--dark);
            margin-top: 8px;
            padding-top: 8px;
            font-weight: 800;
        }

        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.75em;
            font-weight: 700;
            margin-right: 8px;
        }

        .badge.new {
            background: var(--success);
            color: white;
        }

        .badge.probation {
            background: var(--warning);
            color: white;
        }

        .badge.senior {
            background: var(--accent);
            color: white;
        }

        .performance-meter {
            width: 100%;
            height: 8px;
            background: #f0f0f0;
            border-radius: 10px;
            margin-top: 5px;
            overflow: hidden;
        }

        .performance-fill {
            height: 100%;
            border-radius: 10px;
            transition: width 0.3s ease;
        }

        .performance-excellent {
            background: var(--success);
        }

        .performance-good {
            background: var(--accent);
        }

        .performance-average {
            background: var(--warning);
        }

        .performance-poor {
            background: var(--danger);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .container {
                min-height: calc(100vh - 20px);
                border-radius: 15px;
            }
            
            .content {
                padding: 15px;
            }
            
            .form-container {
                padding: 15px;
            }
            
            .summary-cards {
                grid-template-columns: 1fr 1fr;
            }
            
            .employee-controls {
                flex-direction: column;
            }
            
            .control-btn {
                width: 100%;
                justify-content: center;
            }
            
            .employee-details {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .header {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 1.3em;
            }
            
            .back-btn {
                top: 15px;
                right: 15px;
                padding: 8px 12px;
                font-size: 0.9em;
            }
            
            .chart-container {
                height: 250px;
                padding: 15px;
            }
            
            .summary-cards {
                grid-template-columns: 1fr;
            }
            
            .filter-tabs {
                justify-content: center;
            }
            
            .filter-tab {
                flex: 1;
                text-align: center;
                min-width: 100px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <a href="index.html" class="back-btn">
                <span>â†</span> Ø¨Ø§Ø²Ú¯Ø´Øª
            </a>
            <h1>ğŸ‘¥ Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Ù…Ù†Ø¯Ø§Ù†</h1>
            <p>Ù…Ø¯ÛŒØ±ÛŒØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø±Ø³Ù†Ù„ Ùˆ Ù…Ø­Ø§Ø³Ø¨Ø§Øª Ø­Ù‚ÙˆÙ‚ Ùˆ Ø¯Ø³ØªÙ…Ø²Ø¯</p>
        </div>

        <div class="content">
            <!-- Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ø®Ù„Ø§ØµÙ‡ -->
            <div class="summary-cards">
                <div class="summary-card total">
                    <h3>ğŸ‘¥ ØªØ¹Ø¯Ø§Ø¯ Ú©Ø§Ø±Ù…Ù†Ø¯Ø§Ù†</h3>
                    <div class="amount" id="total-employees">0 Ù†ÙØ±</div>
                </div>
                <div class="summary-card active">
                    <h3>âœ… Ú©Ø§Ø±Ù…Ù†Ø¯Ø§Ù† ÙØ¹Ø§Ù„</h3>
                    <div class="amount" id="active-employees">0 Ù†ÙØ±</div>
                </div>
                <div class="summary-card probation">
                    <h3>ğŸ”„ Ø¯ÙˆØ±Ù‡ Ø¢Ø²Ù…Ø§ÛŒØ´ÛŒ</h3>
                    <div class="amount" id="probation-employees">0 Ù†ÙØ±</div>
                </div>
                <div class="summary-card salary">
                    <h3>ğŸ’° Ù…Ø¬Ù…ÙˆØ¹ Ø­Ù‚ÙˆÙ‚ Ù…Ø§Ù‡Ø§Ù†Ù‡</h3>
                    <div class="amount" id="total-salary">0 ØªÙˆÙ…Ø§Ù†</div>
                </div>
            </div>

            <!-- ØªØ¨â€ŒÙ‡Ø§ÛŒ ÙÛŒÙ„ØªØ± -->
            <div class="filter-tabs">
                <div class="filter-tab active" onclick="filterEmployees('all')">Ù‡Ù…Ù‡ Ú©Ø§Ø±Ù…Ù†Ø¯Ø§Ù†</div>
                <div class="filter-tab" onclick="filterEmployees('active')">ÙØ¹Ø§Ù„</div>
                <div class="filter-tab" onclick="filterEmployees('probation')">Ø¯ÙˆØ±Ù‡ Ø¢Ø²Ù…Ø§ÛŒØ´ÛŒ</div>
                <div class="filter-tab" onclick="filterEmployees('senior')">Ø§Ø±Ø´Ø¯</div>
                <div class="filter-tab" onclick="showPayrollSection()">ğŸ“‹ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø­Ù‚ÙˆÙ‚</div>
            </div>

            <!-- ÙØ±Ù… Ø«Ø¨Øª Ú©Ø§Ø±Ù…Ù†Ø¯ -->
            <div class="form-container">
                <h2 class="form-title">â• Ø«Ø¨Øª Ú©Ø§Ø±Ù…Ù†Ø¯ Ø¬Ø¯ÛŒØ¯</h2>
                
                <div class="form-group">
                    <label for="employee-name">Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ:</label>
                    <input type="text" id="employee-name" placeholder="Ù†Ø§Ù… Ú©Ø§Ù…Ù„ Ú©Ø§Ø±Ù…Ù†Ø¯">
                </div>
                
                <div class="form-group">
                    <label for="employee-position">Ø³Ù…Øª Ø³Ø§Ø²Ù…Ø§Ù†ÛŒ:</label>
                    <input type="text" id="employee-position" placeholder="Ø³Ù…Øª Ø³Ø§Ø²Ù…Ø§Ù†ÛŒ">
                </div>

                <div class="form-group">
                    <label for="employee-department">Ø¯Ù¾Ø§Ø±ØªÙ…Ø§Ù†:</label>
                    <select id="employee-department">
                        <option value="sales">ÙØ±ÙˆØ´</option>
                        <option value="marketing">Ø¨Ø§Ø²Ø§Ø±ÛŒØ§Ø¨ÛŒ</option>
                        <option value="development">ØªÙˆØ³Ø¹Ù‡</option>
                        <option value="finance">Ù…Ø§Ù„ÛŒ</option>
                        <option value="hr">Ù…Ù†Ø§Ø¨Ø¹ Ø§Ù†Ø³Ø§Ù†ÛŒ</option>
                        <option value="support">Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ</option>
                        <option value="other">Ø³Ø§ÛŒØ±</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="employee-salary-type">Ù†ÙˆØ¹ Ø­Ù‚ÙˆÙ‚:</label>
                    <select id="employee-salary-type" onchange="toggleSalaryFields()">
                        <option value="fixed">Ø«Ø§Ø¨Øª Ù…Ø§Ù‡ÛŒØ§Ù†Ù‡</option>
                        <option value="hourly">Ø³Ø§Ø¹ØªÛŒ</option>
                        <option value="percentage">Ø¯Ø±ØµØ¯ÛŒ Ø§Ø² ÙØ±ÙˆØ´</option>
                        <option value="commission">Ú©Ù…ÛŒØ³ÛŒÙˆÙ†</option>
                        <option value="piecework">Ù‚Ø·Ø¹Ù‡â€ŒÚ©Ø§Ø±ÛŒ</option>
                    </select>
                </div>

                <div class="form-group" id="fixed-salary-field">
                    <label for="employee-salary">Ø­Ù‚ÙˆÙ‚ Ù¾Ø§ÛŒÙ‡ (ØªÙˆÙ…Ø§Ù†):</label>
                    <input type="number" id="employee-salary" placeholder="Ù…Ø¨Ù„Øº Ø­Ù‚ÙˆÙ‚ Ù¾Ø§ÛŒÙ‡">
                </div>

                <div class="form-group" id="hourly-salary-field" style="display: none;">
                    <label for="employee-hourly-rate">Ù†Ø±Ø® Ø³Ø§Ø¹ØªÛŒ (ØªÙˆÙ…Ø§Ù†):</label>
                    <input type="number" id="employee-hourly-rate" placeholder="Ù…Ø¨Ù„Øº Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ø³Ø§Ø¹Øª">
                </div>

                <div class="form-group" id="percentage-salary-field" style="display: none;">
                    <label for="employee-percentage">Ø¯Ø±ØµØ¯ Ø§Ø² ÙØ±ÙˆØ´:</label>
                    <input type="number" id="employee-percentage" placeholder="Ù…Ø«Ù„Ø§Ù‹ 10 Ø¨Ø±Ø§ÛŒ 10%" min="0" max="100">
                </div>

                <div class="form-group" id="commission-salary-field" style="display: none;">
                    <label for="employee-commission-rate">Ù†Ø±Ø® Ú©Ù…ÛŒØ³ÛŒÙˆÙ† (%):</label>
                    <input type="number" id="employee-commission-rate" placeholder="Ø¯Ø±ØµØ¯ Ú©Ù…ÛŒØ³ÛŒÙˆÙ†">
                </div>

                <div class="form-group" id="piecework-salary-field" style="display: none;">
                    <label for="employee-piece-rate">Ù†Ø±Ø® Ù‚Ø·Ø¹Ù‡â€ŒÚ©Ø§Ø±ÛŒ (ØªÙˆÙ…Ø§Ù†):</label>
                    <input type="number" id="employee-piece-rate" placeholder="Ù…Ø¨Ù„Øº Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ù‚Ø·Ø¹Ù‡">
                </div>

                <div class="form-group">
                    <label for="employee-join-date">ØªØ§Ø±ÛŒØ® Ø§Ø³ØªØ®Ø¯Ø§Ù…:</label>
                    <input type="date" id="employee-join-date">
                </div>

                <div class="form-group">
                    <label for="employee-status">ÙˆØ¶Ø¹ÛŒØª Ø§Ø³ØªØ®Ø¯Ø§Ù…:</label>
                    <select id="employee-status">
                        <option value="active">ÙØ¹Ø§Ù„</option>
                        <option value="probation">Ø¯ÙˆØ±Ù‡ Ø¢Ø²Ù…Ø§ÛŒØ´ÛŒ</option>
                        <option value="intern">Ú©Ø§Ø±Ø¢Ù…ÙˆØ²</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="employee-contact">Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³:</label>
                    <input type="text" id="employee-contact" placeholder="Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³">
                </div>

                <div class="form-group">
                    <label for="employee-email">Ø§ÛŒÙ…ÛŒÙ„:</label>
                    <input type="email" id="employee-email" placeholder="Ø¢Ø¯Ø±Ø³ Ø§ÛŒÙ…ÛŒÙ„">
                </div>

                <div class="form-group">
                    <label for="employee-performance">Ø¹Ù…Ù„Ú©Ø±Ø¯ (Û±-Û±Û°Û°):</label>
                    <input type="number" id="employee-performance" placeholder="Ø§Ù…ØªÛŒØ§Ø² Ø¹Ù…Ù„Ú©Ø±Ø¯" min="1" max="100" value="80">
                </div>

                <div class="form-group">
                    <label for="employee-notes">ÛŒØ§Ø¯Ø¯Ø§Ø´Øªâ€ŒÙ‡Ø§:</label>
                    <textarea id="employee-notes" rows="3" placeholder="ÛŒØ§Ø¯Ø¯Ø§Ø´Øªâ€ŒÙ‡Ø§ÛŒ Ø§Ø¶Ø§ÙÛŒ"></textarea>
                </div>

                <button class="btn" onclick="addEmployee()">
                    <span>ğŸ’¾</span> Ø«Ø¨Øª Ú©Ø§Ø±Ù…Ù†Ø¯
                </button>
            </div>

            <!-- Ø¨Ø®Ø´ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø­Ù‚ÙˆÙ‚ -->
            <div class="payroll-section" id="payroll-section" style="display: none;">
                <div class="payroll-title">
                    <span>ğŸ’°</span> Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø­Ù‚ÙˆÙ‚ Ùˆ Ø¯Ø³ØªÙ…Ø²Ø¯
                </div>
                <div class="payroll-list" id="payroll-list">
                    <!-- Ù„ÛŒØ³Øª Ø­Ù‚ÙˆÙ‚â€ŒÙ‡Ø§ -->
                </div>
                <div class="form-group" style="margin-top: 15px;">
                    <label for="working-days">ØªØ¹Ø¯Ø§Ø¯ Ø±ÙˆØ²Ù‡Ø§ÛŒ Ú©Ø§Ø±ÛŒ Ù…Ø§Ù‡:</label>
                    <input type="number" id="working-days" value="22" min="1" max="31" onchange="calculatePayroll()">
                </div>
                <div class="form-group">
                    <label for="overtime-hours">Ø³Ø§Ø¹Ø§Øª Ø§Ø¶Ø§ÙÙ‡ Ú©Ø§Ø±ÛŒ Ú©Ù„:</label>
                    <input type="number" id="overtime-hours" value="0" min="0" onchange="calculatePayroll()">
                </div>
                <button class="btn btn-warning" onclick="generatePayrollReport()" style="margin-top: 10px;">
                    <span>ğŸ“„</span> ØªÙˆÙ„ÛŒØ¯ ÙÛŒØ´ Ø­Ù‚ÙˆÙ‚ÛŒ
                </button>
            </div>

            <!-- Ù†Ù…ÙˆØ¯Ø§Ø± ØªØ­Ù„ÛŒÙ„ -->
            <div class="form-container">
                <h2 class="form-title">ğŸ“Š ØªØ­Ù„ÛŒÙ„ Ù…Ù†Ø§Ø¨Ø¹ Ø§Ù†Ø³Ø§Ù†ÛŒ</h2>
                <div class="chart-container">
                    <canvas id="employeesChart"></canvas>
                </div>
            </div>

            <!-- Ù„ÛŒØ³Øª Ú©Ø§Ø±Ù…Ù†Ø¯Ø§Ù† -->
            <div class="form-container">
                <h2 class="form-title">ğŸ‘¥ Ù„ÛŒØ³Øª Ú©Ø§Ø±Ù…Ù†Ø¯Ø§Ù†</h2>
                <div class="employee-list" id="employees-list">
                    <!-- Ú©Ø§Ø±Ù…Ù†Ø¯Ø§Ù† Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
                </div>
                
                <button class="btn btn-danger" onclick="clearAllEmployees()" style="margin-top: 15px;">
                    <span>ğŸ—‘ï¸</span> Ø­Ø°Ù ØªÙ…Ø§Ù… Ú©Ø§Ø±Ù…Ù†Ø¯Ø§Ù†
                </button>
            </div>
        </div>
    </div>

    <script>
        // # Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ø³ÛŒØ³ØªÙ…
        let employees = JSON.parse(localStorage.getItem('employees')) || [];
        let employeesChart = null;
        let currentFilter = 'all';

        // # Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ù‡Ù†Ú¯Ø§Ù… Ù„ÙˆØ¯ ØµÙØ­Ù‡
        window.onload = function() {
            renderEmployees();
            updateSummaryCards();
            initEmployeesChart();
            
            // ØªÙ†Ø¸ÛŒÙ… ØªØ§Ø±ÛŒØ® Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ø¨Ø±Ø§ÛŒ Ø§Ù…Ø±ÙˆØ²
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('employee-join-date').value = today;
        };

        // # ØªØºÛŒÛŒØ± ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø­Ù‚ÙˆÙ‚ Ø¨Ø± Ø§Ø³Ø§Ø³ Ù†ÙˆØ¹
        function toggleSalaryFields() {
            const salaryType = document.getElementById('employee-salary-type').value;
            
            document.getElementById('fixed-salary-field').style.display = salaryType === 'fixed' ? 'block' : 'none';
            document.getElementById('hourly-salary-field').style.display = salaryType === 'hourly' ? 'block' : 'none';
            document.getElementById('percentage-salary-field').style.display = salaryType === 'percentage' ? 'block' : 'none';
            document.getElementById('commission-salary-field').style.display = salaryType === 'commission' ? 'block' : 'none';
            document.getElementById('piecework-salary-field').style.display = salaryType === 'piecework' ? 'block' : 'none';
        }

        // # Ø§ÙØ²ÙˆØ¯Ù† Ú©Ø§Ø±Ù…Ù†Ø¯ Ø¬Ø¯ÛŒØ¯
        function addEmployee() {
            const button = event.target;
            addLoading(button);
            
            setTimeout(() => {
                const name = document.getElementById('employee-name').value;
                const position = document.getElementById('employee-position').value;
                const department = document.getElementById('employee-department').value;
                const salaryType = document.getElementById('employee-salary-type').value;
                const joinDate = document.getElementById('employee-join-date').value;
                const status = document.getElementById('employee-status').value;
                const contact = document.getElementById('employee-contact').value;
                const email = document.getElementById('employee-email').value;
                const performance = parseInt(document.getElementById('employee-performance').value) || 80;
                const notes = document.getElementById('employee-notes').value;
                
                if (!name || !position || !joinDate) { 
                    showErrorMessage('Ù„Ø·ÙØ§Ù‹ ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø¶Ø±ÙˆØ±ÛŒ Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯'); 
                    return; 
                }
                
                let salaryData = {};
                
                if (salaryType === 'fixed') {
                    const salary = parseInt(document.getElementById('employee-salary').value);
                    if (!salary) { 
                        showErrorMessage('Ù„Ø·ÙØ§Ù‹ Ø­Ù‚ÙˆÙ‚ Ø«Ø§Ø¨Øª Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯'); 
                        return; 
                    }
                    salaryData = { type: 'fixed', amount: salary };
                }
                else if (salaryType === 'hourly') {
                    const hourlyRate = parseInt(document.getElementById('employee-hourly-rate').value);
                    if (!hourlyRate) { 
                        showErrorMessage('Ù„Ø·ÙØ§Ù‹ Ù†Ø±Ø® Ø³Ø§Ø¹ØªÛŒ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯'); 
                        return; 
                    }
                    salaryData = { type: 'hourly', rate: hourlyRate };
                }
                else if (salaryType === 'percentage') {
                    const percentage = parseInt(document.getElementById('employee-percentage').value);
                    if (!percentage) { 
                        showErrorMessage('Ù„Ø·ÙØ§Ù‹ Ø¯Ø±ØµØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯'); 
                        return; 
                    }
                    salaryData = { type: 'percentage', rate: percentage };
                }
                else if (salaryType === 'commission') {
                    const commissionRate = parseInt(document.getElementById('employee-commission-rate').value);
                    if (!commissionRate) { 
                        showErrorMessage('Ù„Ø·ÙØ§Ù‹ Ù†Ø±Ø® Ú©Ù…ÛŒØ³ÛŒÙˆÙ† Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯'); 
                        return; 
                    }
                    salaryData = { type: 'commission', rate: commissionRate };
                }
                else if (salaryType === 'piecework') {
                    const pieceRate = parseInt(document.getElementById('employee-piece-rate').value);
                    if (!pieceRate) { 
                        showErrorMessage('Ù„Ø·ÙØ§Ù‹ Ù†Ø±Ø® Ù‚Ø·Ø¹Ù‡â€ŒÚ©Ø§Ø±ÛŒ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯'); 
                        return; 
                    }
                    salaryData = { type: 'piecework', rate: pieceRate };
                }
                
                // Ø¨Ø±Ø±Ø³ÛŒ ØªØ§Ø±ÛŒØ® Ø§Ø³ØªØ®Ø¯Ø§Ù…
                const join = new Date(joinDate);
                const today = new Date();
                const monthsWorked = Math.floor((today - join) / (1000 * 60 * 60 * 24 * 30));
                
                const employee = {
                    id: Date.now(),
                    name,
                    position,
                    department,
                    salary: salaryData,
                    joinDate,
                    status,
                    contact: contact || 'Ù†Ø¯Ø§Ø±Ø¯',
                    email: email || 'Ù†Ø¯Ø§Ø±Ø¯',
                    performance,
                    notes: notes || 'Ø¨Ø¯ÙˆÙ† ÛŒØ§Ø¯Ø¯Ø§Ø´Øª',
                    monthsWorked,
                    date: new Date().toLocaleDateString('fa-IR'),
                    timestamp: new Date().getTime(),
                    created: new Date().toISOString()
                };
                
                employees.unshift(employee);
                saveEmployees();
                renderEmployees();
                updateSummaryCards();
                updateEmployeesChart();
                showSuccessMessage('Ú©Ø§Ø±Ù…Ù†Ø¯ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø«Ø¨Øª Ø´Ø¯');
                
                // Ø±ÛŒØ³Øª Ú©Ø±Ø¯Ù† ÙØ±Ù…
                document.getElementById('employee-name').value = '';
                document.getElementById('employee-position').value = '';
                document.getElementById('employee-contact').value = '';
                document.getElementById('employee-email').value = '';
                document.getElementById('employee-performance').value = '80';
                document.getElementById('employee-notes').value = '';
                
            }, 800);
        }

        // # Ù†Ù…Ø§ÛŒØ´ Ú©Ø§Ø±Ù…Ù†Ø¯Ø§Ù†
        function renderEmployees() {
            const container = document.getElementById('employees-list');
            container.innerHTML = '';
            
            if (employees.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="icon">ğŸ‘¥</div>
                        <p>Ù‡Ù†ÙˆØ² Ù‡ÛŒÚ† Ú©Ø§Ø±Ù…Ù†Ø¯ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª</p>
                    </div>
                `;
                return;
            }
            
            let filteredEmployees = employees;
            
            // Ø§Ø¹Ù…Ø§Ù„ ÙÛŒÙ„ØªØ±
            if (currentFilter !== 'all') {
                filteredEmployees = employees.filter(employee => {
                    if (currentFilter === 'senior') {
                        return employee.monthsWorked >= 24; // Ø¨ÛŒØ´ Ø§Ø² 2 Ø³Ø§Ù„ Ø³Ø§Ø¨Ù‚Ù‡
                    }
                    return employee.status === currentFilter;
                });
            }
            
            // Ù…Ø±ØªØ¨â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø± Ø§Ø³Ø§Ø³ ØªØ§Ø±ÛŒØ® Ø§Ø³ØªØ®Ø¯Ø§Ù…
            filteredEmployees.sort((a, b) => new Date(b.joinDate) - new Date(a.joinDate));
            
            filteredEmployees.forEach(employee => {
                const employeeEl = document.createElement('div');
                employeeEl.className = `employee-item ${employee.status === 'probation' ? 'probation' : employee.monthsWorked < 3 ? 'new' : ''}`;
                
                let salaryText = '';
                let performanceClass = '';
                let performanceText = '';
                
                if (employee.salary.type === 'fixed') {
                    salaryText = `${employee.salary.amount.toLocaleString()} ØªÙˆÙ…Ø§Ù† (Ø«Ø§Ø¨Øª)`;
                } else if (employee.salary.type === 'hourly') {
                    salaryText = `${employee.salary.rate.toLocaleString()} ØªÙˆÙ…Ø§Ù† (Ø³Ø§Ø¹ØªÛŒ)`;
                } else if (employee.salary.type === 'percentage') {
                    salaryText = `${employee.salary.rate}% Ø§Ø² ÙØ±ÙˆØ´`;
                } else if (employee.salary.type === 'commission') {
                    salaryText = `${employee.salary.rate}% Ú©Ù…ÛŒØ³ÛŒÙˆÙ†`;
                } else if (employee.salary.type === 'piecework') {
                    salaryText = `${employee.salary.rate.toLocaleString()} ØªÙˆÙ…Ø§Ù† (Ù‚Ø·Ø¹Ù‡â€ŒÚ©Ø§Ø±ÛŒ)`;
                }
                
                // ØªØ¹ÛŒÛŒÙ† Ø³Ø·Ø­ Ø¹Ù…Ù„Ú©Ø±Ø¯
                if (employee.performance >= 90) {
                    performanceClass = 'performance-excellent';
                    performanceText = 'Ø¹Ø§Ù„ÛŒ';
                } else if (employee.performance >= 75) {
                    performanceClass = 'performance-good';
                    performanceText = 'Ø®ÙˆØ¨';
                } else if (employee.performance >= 60) {
                    performanceClass = 'performance-average';
                    performanceText = 'Ù…ØªÙˆØ³Ø·';
                } else {
                    performanceClass = 'performance-poor';
                    performanceText = 'Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø¨Ù‡Ø¨ÙˆØ¯';
                }
                
                employeeEl.innerHTML = `
                    <div class="employee-header">
                        <div class="employee-name">
                            ${employee.name}
                            ${employee.monthsWorked < 3 ? '<span class="badge new">Ø¬Ø¯ÛŒØ¯</span>' : ''}
                            ${employee.status === 'probation' ? '<span class="badge probation">Ø¢Ø²Ù…Ø§ÛŒØ´ÛŒ</span>' : ''}
                            ${employee.monthsWorked >= 24 ? '<span class="badge senior">Ø§Ø±Ø´Ø¯</span>' : ''}
                        </div>
                        <div class="employee-salary">${salaryText}</div>
                    </div>
                    
                    <div class="employee-details">
                        <div class="employee-detail">
                            <span class="detail-label">Ø³Ù…Øª:</span>
                            <span class="detail-value">${employee.position}</span>
                        </div>
                        <div class="employee-detail">
                            <span class="detail-label">Ø¯Ù¾Ø§Ø±ØªÙ…Ø§Ù†:</span>
                            <span class="detail-value">${getDepartmentName(employee.department)}</span>
                        </div>
                        <div class="employee-detail">
                            <span class="detail-label">ØªØ§Ø±ÛŒØ® Ø§Ø³ØªØ®Ø¯Ø§Ù…:</span>
                            <span class="detail-value">${formatDate(employee.joinDate)} (${employee.monthsWorked} Ù…Ø§Ù‡)</span>
                        </div>
                        <div class="employee-detail">
                            <span class="detail-label">ÙˆØ¶Ø¹ÛŒØª:</span>
                            <span class="detail-value">${getStatusName(employee.status)}</span>
                        </div>
                        <div class="employee-detail">
                            <span class="detail-label">ØªÙ…Ø§Ø³:</span>
                            <span class="detail-value">${employee.contact}</span>
                        </div>
                        <div class="employee-detail">
                            <span class="detail-label">Ø§ÛŒÙ…ÛŒÙ„:</span>
                            <span class="detail-value">${employee.email}</span>
                        </div>
                        <div class="employee-detail">
                            <span class="detail-label">Ø¹Ù…Ù„Ú©Ø±Ø¯:</span>
                            <span class="detail-value">${employee.performance}% - ${performanceText}</span>
                        </div>
                    </div>
                    
                    <div class="performance-meter">
                        <div class="performance-fill ${performanceClass}" style="width: ${employee.performance}%"></div>
                    </div>
                    
                    ${employee.notes !== 'Ø¨Ø¯ÙˆÙ† ÛŒØ§Ø¯Ø¯Ø§Ø´Øª' ? `
                        <div style="margin-top: 10px; padding: 10px; background: #f8f9fa; border-radius: 8px; font-size: 0.85em;">
                            <strong>ÛŒØ§Ø¯Ø¯Ø§Ø´Øª:</strong> ${employee.notes}
                        </div>
                    ` : ''}
                    
                    <div class="employee-controls">
                        <button class="control-btn edit" onclick="editEmployee(${employee.id})">
                            <span>âœï¸</span> ÙˆÛŒØ±Ø§ÛŒØ´
                        </button>
                        <button class="control-btn payroll" onclick="calculateEmployeeSalary(${employee.id})">
                            <span>ğŸ’°</span> Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø­Ù‚ÙˆÙ‚
                        </button>
                        <button class="control-btn report" onclick="generateEmployeeReport(${employee.id})">
                            <span>ğŸ“Š</span> Ú¯Ø²Ø§Ø±Ø´ Ø¹Ù…Ù„Ú©Ø±Ø¯
                        </button>
                        <button class="control-btn delete" onclick="deleteEmployee(${employee.id})">
                            <span>ğŸ—‘ï¸</span> Ø­Ø°Ù
                        </button>
                    </div>
                `;
                container.appendChild(employeeEl);
            });
        }

        // # ÙˆÛŒØ±Ø§ÛŒØ´ Ú©Ø§Ø±Ù…Ù†Ø¯
        function editEmployee(id) {
            const employee = employees.find(emp => emp.id === id);
            if (employee) {
                // Ù¾Ø± Ú©Ø±Ø¯Ù† ÙØ±Ù… Ø¨Ø§ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ù…Ù†Ø¯
                document.getElementById('employee-name').value = employee.name;
                document.getElementById('employee-position').value = employee.position;
                document.getElementById('employee-department').value = employee.department;
                document.getElementById('employee-salary-type').value = employee.salary.type;
                document.getElementById('employee-join-date').value = employee.joinDate;
                document.getElementById('employee-status').value = employee.status;
                document.getElementById('employee-contact').value = employee.contact;
                document.getElementById('employee-email').value = employee.email;
                document.getElementById('employee-performance').value = employee.performance;
                document.getElementById('employee-notes').value = employee.notes;
                
                // ØªÙ†Ø¸ÛŒÙ… ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø­Ù‚ÙˆÙ‚
                toggleSalaryFields();
                
                if (employee.salary.type === 'fixed') {
                    document.getElementById('employee-salary').value = employee.salary.amount;
                } else {
                    document.getElementById(`employee-${employee.salary.type}-rate`).value = employee.salary.rate;
                }
                
                // Ø­Ø°Ù Ú©Ø§Ø±Ù…Ù†Ø¯ Ø§Ø² Ù„ÛŒØ³Øª
                employees = employees.filter(emp => emp.id !== id);
                saveEmployees();
                renderEmployees();
                updateSummaryCards();
                
                showSuccessMessage('Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ù…Ù†Ø¯ Ø¨Ø±Ø§ÛŒ ÙˆÛŒØ±Ø§ÛŒØ´ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯');
                
                // Ø§Ø³Ú©Ø±ÙˆÙ„ Ø¨Ù‡ Ø¨Ø§Ù„Ø§ÛŒ ÙØ±Ù…
                document.querySelector('.form-container').scrollIntoView({ 
                    behavior: 'smooth' 
                });
            }
        }

        // # Ø­Ø°Ù Ú©Ø§Ø±Ù…Ù†Ø¯
        function deleteEmployee(id) {
            if (confirm('Ø¢ÛŒØ§ Ø§Ø² Ø­Ø°Ù Ø§ÛŒÙ† Ú©Ø§Ø±Ù…Ù†Ø¯ Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø¯Ø§Ø±ÛŒØ¯ØŸ')) {
                employees = employees.filter(employee => employee.id !== id);
                saveEmployees();
                renderEmployees();
                updateSummaryCards();
                updateEmployeesChart();
                showSuccessMessage('Ú©Ø§Ø±Ù…Ù†Ø¯ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø­Ø°Ù Ø´Ø¯');
            }
        }

        // # Ø­Ø°Ù ØªÙ…Ø§Ù… Ú©Ø§Ø±Ù…Ù†Ø¯Ø§Ù†
        function clearAllEmployees() {
            if (confirm('Ø¢ÛŒØ§ Ø§Ø² Ø­Ø°Ù ØªÙ…Ø§Ù… Ú©Ø§Ø±Ù…Ù†Ø¯Ø§Ù† Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø¯Ø§Ø±ÛŒØ¯ØŸ Ø§ÛŒÙ† Ø¹Ù…Ù„ ØºÛŒØ±Ù‚Ø§Ø¨Ù„ Ø¨Ø§Ø²Ú¯Ø´Øª Ø§Ø³Øª.')) {
                const button = event.target;
                addLoading(button);
                
                setTimeout(() => {
                    employees = []; 
                    saveEmployees(); 
                    renderEmployees(); 
                    updateSummaryCards();
                    updateEmployeesChart();
                    showSuccessMessage('ØªÙ…Ø§Ù… Ú©Ø§Ø±Ù…Ù†Ø¯Ø§Ù† Ø­Ø°Ù Ø´Ø¯Ù†Ø¯');
                }, 800);
            }
        }

        // # ÙÛŒÙ„ØªØ± Ú©Ø±Ø¯Ù† Ú©Ø§Ø±Ù…Ù†Ø¯Ø§Ù†
        function filterEmployees(filter) {
            currentFilter = filter;
            
            // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ ØªØ¨â€ŒÙ‡Ø§ÛŒ ÙØ¹Ø§Ù„
            document.querySelectorAll('.filter-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
            
            renderEmployees();
        }

        // # Ù†Ù…Ø§ÛŒØ´ Ø¨Ø®Ø´ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø­Ù‚ÙˆÙ‚
        function showPayrollSection() {
            document.getElementById('payroll-section').style.display = 'block';
            calculatePayroll();
            
            // Ø§Ø³Ú©Ø±ÙˆÙ„ Ø¨Ù‡ Ø¨Ø®Ø´ Ø­Ù‚ÙˆÙ‚
            document.getElementById('payroll-section').scrollIntoView({ 
                behavior: 'smooth' 
            });
        }

        // # Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø­Ù‚ÙˆÙ‚
        function calculatePayroll() {
            const workingDays = parseInt(document.getElementById('working-days').value) || 22;
            const overtimeHours = parseInt(document.getElementById('overtime-hours').value) || 0;
            const overtimeRate = 1.5; // Ø¶Ø±ÛŒØ¨ Ø§Ø¶Ø§ÙÙ‡ Ú©Ø§Ø±ÛŒ
            
            const payrollList = document.getElementById('payroll-list');
            payrollList.innerHTML = '';
            
            let totalPayroll = 0;
            
            employees.forEach(employee => {
                let salary = 0;
                let salaryDetails = '';
                
                if (employee.salary.type === 'fixed') {
                    salary = employee.salary.amount;
                    salaryDetails = `Ø­Ù‚ÙˆÙ‚ Ø«Ø§Ø¨Øª: ${salary.toLocaleString()} ØªÙˆÙ…Ø§Ù†`;
                } else if (employee.salary.type === 'hourly') {
                    const monthlyHours = workingDays * 8; // 8 Ø³Ø§Ø¹Øª Ø¯Ø± Ø±ÙˆØ²
                    salary = employee.salary.rate * monthlyHours;
                    salaryDetails = `Ø³Ø§Ø¹ØªÛŒ: ${employee.salary.rate.toLocaleString()} Ã— ${monthlyHours} Ø³Ø§Ø¹Øª`;
                }
                
                // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø§Ø¶Ø§ÙÙ‡ Ú©Ø§Ø±ÛŒ
                const overtimePay = overtimeHours * (employee.salary.type === 'hourly' ? 
                    employee.salary.rate * overtimeRate : 
                    (salary / (workingDays * 8)) * overtimeRate);
                
                const totalSalary = salary + overtimePay;
                totalPayroll += totalSalary;
                
                const payrollItem = document.createElement('div');
                payrollItem.className = 'payroll-item';
                payrollItem.innerHTML = `
                    <div class="payroll-details">
                        <div class="payroll-name">${employee.name}</div>
                        <div class="payroll-position">${employee.position}</div>
                        <div class="salary-structure">
                            <div class="salary-item">
                                <span>${salaryDetails}</span>
                                <span>${salary.toLocaleString()} ØªÙˆÙ…Ø§Ù†</span>
                            </div>
                            ${overtimeHours > 0 ? `
                                <div class="salary-item">
                                    <span>Ø§Ø¶Ø§ÙÙ‡ Ú©Ø§Ø±ÛŒ: ${overtimeHours} Ø³Ø§Ø¹Øª</span>
                                    <span>${overtimePay.toLocaleString()} ØªÙˆÙ…Ø§Ù†</span>
                                </div>
                            ` : ''}
                            <div class="salary-item salary-total">
                                <span>Ø¬Ù…Ø¹:</span>
                                <span>${totalSalary.toLocaleString()} ØªÙˆÙ…Ø§Ù†</span>
                            </div>
                        </div>
                    </div>
                    <div class="payroll-amount">${totalSalary.toLocaleString()} ØªÙˆÙ…Ø§Ù†</div>
                `;
                payrollList.appendChild(payrollItem);
            });
            
            // Ù†Ù…Ø§ÛŒØ´ Ø¬Ù…Ø¹ Ú©Ù„
            const totalItem = document.createElement('div');
            totalItem.className = 'payroll-item';
            totalItem.style.background = 'var(--success)';
            totalItem.style.color = 'white';
            totalItem.innerHTML = `
                <div class="payroll-details">
                    <div class="payroll-name">Ø¬Ù…Ø¹ Ú©Ù„ Ø­Ù‚ÙˆÙ‚ Ùˆ Ø¯Ø³ØªÙ…Ø²Ø¯</div>
                </div>
                <div class="payroll-amount" style="color: white; font-size: 1.2em;">
                    ${totalPayroll.toLocaleString()} ØªÙˆÙ…Ø§Ù†
                </div>
            `;
            payrollList.appendChild(totalItem);
        }

        // # Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø­Ù‚ÙˆÙ‚ ÛŒÚ© Ú©Ø§Ø±Ù…Ù†Ø¯
        function calculateEmployeeSalary(id) {
            const employee = employees.find(emp => emp.id === id);
            if (employee) {
                const workingDays = parseInt(prompt('ØªØ¹Ø¯Ø§Ø¯ Ø±ÙˆØ²Ù‡Ø§ÛŒ Ú©Ø§Ø±ÛŒ Ø§ÛŒÙ† Ú©Ø§Ø±Ù…Ù†Ø¯ Ø¯Ø± Ù…Ø§Ù‡:', '22')) || 22;
                let salary = 0;
                
                if (employee.salary.type === 'fixed') {
                    salary = employee.salary.amount;
                } else if (employee.salary.type === 'hourly') {
                    const monthlyHours = workingDays * 8;
                    salary = employee.salary.rate * monthlyHours;
                }
                
                alert(`Ø­Ù‚ÙˆÙ‚ ${employee.name} Ø¨Ø±Ø§ÛŒ ${workingDays} Ø±ÙˆØ² Ú©Ø§Ø±ÛŒ: ${salary.toLocaleString()} ØªÙˆÙ…Ø§Ù†`);
            }
        }

        // # ØªÙˆÙ„ÛŒØ¯ Ú¯Ø²Ø§Ø±Ø´ Ø¹Ù…Ù„Ú©Ø±Ø¯
        function generateEmployeeReport(id) {
            const employee = employees.find(emp => emp.id === id);
            if (employee) {
                const report = `
Ú¯Ø²Ø§Ø±Ø´ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ú©Ø§Ø±Ù…Ù†Ø¯:
-------------------
Ù†Ø§Ù…: ${employee.name}
Ø³Ù…Øª: ${employee.position}
Ø¯Ù¾Ø§Ø±ØªÙ…Ø§Ù†: ${getDepartmentName(employee.department)}
ØªØ§Ø±ÛŒØ® Ø§Ø³ØªØ®Ø¯Ø§Ù…: ${formatDate(employee.joinDate)}
Ø³Ø§Ø¨Ù‚Ù‡ Ú©Ø§Ø±: ${employee.monthsWorked} Ù…Ø§Ù‡
Ø§Ù…ØªÛŒØ§Ø² Ø¹Ù…Ù„Ú©Ø±Ø¯: ${employee.performance}%
ÙˆØ¶Ø¹ÛŒØª: ${getStatusName(employee.status)}

ØªØ­Ù„ÛŒÙ„ Ø¹Ù…Ù„Ú©Ø±Ø¯:
${employee.performance >= 90 ? 'âœ… Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø¹Ø§Ù„ÛŒ - Ø´Ø§ÛŒØ³ØªÙ‡ ØªØ´ÙˆÛŒÙ‚' :
  employee.performance >= 75 ? 'ğŸ‘ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø®ÙˆØ¨ - Ø¯Ø± Ù…Ø³ÛŒØ± ØµØ­ÛŒØ­' :
  employee.performance >= 60 ? 'âš ï¸ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ù…ØªÙˆØ³Ø· - Ù†ÛŒØ§Ø² Ø¨Ù‡ ØªÙˆØ¬Ù‡' :
  'âŒ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø¶Ø¹ÛŒÙ - Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø¨Ù‡Ø¨ÙˆØ¯ ÙÙˆØ±ÛŒ'}
                `;
                
                alert(report);
            }
        }

        // # Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ø®Ù„Ø§ØµÙ‡
        function updateSummaryCards() {
            const totalEmployees = employees.length;
            const activeEmployees = employees.filter(emp => emp.status === 'active').length;
            const probationEmployees = employees.filter(emp => emp.status === 'probation').length;
            
            // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…Ø¬Ù…ÙˆØ¹ Ø­Ù‚ÙˆÙ‚
            let totalSalary = 0;
            employees.forEach(emp => {
                if (emp.salary.type === 'fixed') {
                    totalSalary += emp.salary.amount;
                } else if (emp.salary.type === 'hourly') {
                    totalSalary += emp.salary.rate * 176; // 22 Ø±ÙˆØ² Ã— 8 Ø³Ø§Ø¹Øª
                }
            });
            
            document.getElementById('total-employees').textContent = totalEmployees + ' Ù†ÙØ±';
            document.getElementById('active-employees').textContent = activeEmployees + ' Ù†ÙØ±';
            document.getElementById('probation-employees').textContent = probationEmployees + ' Ù†ÙØ±';
            document.getElementById('total-salary').textContent = totalSalary.toLocaleString() + ' ØªÙˆÙ…Ø§Ù†';
        }

        // # Ù†Ù…ÙˆØ¯Ø§Ø± Ú©Ø§Ø±Ù…Ù†Ø¯Ø§Ù†
        function initEmployeesChart() {
            const ctx = document.getElementById('employeesChart').getContext('2d');
            employeesChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['ÙØ±ÙˆØ´', 'Ø¨Ø§Ø²Ø§Ø±ÛŒØ§Ø¨ÛŒ', 'ØªÙˆØ³Ø¹Ù‡', 'Ù…Ø§Ù„ÛŒ', 'Ù…Ù†Ø§Ø¨Ø¹ Ø§Ù†Ø³Ø§Ù†ÛŒ', 'Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ', 'Ø³Ø§ÛŒØ±'],
                    datasets: [{
                        label: 'ØªØ¹Ø¯Ø§Ø¯ Ú©Ø§Ø±Ù…Ù†Ø¯Ø§Ù†',
                        data: [0, 0, 0, 0, 0, 0, 0],
                        backgroundColor: [
                            '#00b894', '#0984e3', '#fdcb6e', 
                            '#e17055', '#a29bfe', '#fd79a8', '#636e72'
                        ],
                        borderWidth: 2,
                        borderColor: '#fff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            rtl: true,
                            bodyFont: {
                                family: 'Vazir, Tahoma'
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                font: {
                                    family: 'Vazir, Tahoma'
                                }
                            }
                        },
                        x: {
                            ticks: {
                                font: {
                                    family: 'Vazir, Tahoma'
                                }
                            }
                        }
                    }
                }
            });
            updateEmployeesChart();
        }
        
        function updateEmployeesChart() {
            if (!employeesChart) return;
            
            const departments = ['sales', 'marketing', 'development', 'finance', 'hr', 'support', 'other'];
            const departmentCounts = departments.map(dept => 
                employees.filter(emp => emp.department === dept).length
            );
            
            employeesChart.data.datasets[0].data = departmentCounts;
            employeesChart.update();
        }

        // # ØªÙˆÙ„ÛŒØ¯ Ú¯Ø²Ø§Ø±Ø´ Ø­Ù‚ÙˆÙ‚
        function generatePayrollReport() {
            const workingDays = parseInt(document.getElementById('working-days').value) || 22;
            const overtimeHours = parseInt(document.getElementById('overtime-hours').value) || 0;
            
            let report = `Ú¯Ø²Ø§Ø±Ø´ Ø­Ù‚ÙˆÙ‚ Ùˆ Ø¯Ø³ØªÙ…Ø²Ø¯ - ${new Date().toLocaleDateString('fa-IR')}\n\n`;
            report += `ØªØ¹Ø¯Ø§Ø¯ Ø±ÙˆØ²Ù‡Ø§ÛŒ Ú©Ø§Ø±ÛŒ: ${workingDays}\n`;
            report += `Ø³Ø§Ø¹Ø§Øª Ø§Ø¶Ø§ÙÙ‡ Ú©Ø§Ø±ÛŒ: ${overtimeHours}\n\n`;
            report += 'Ù„ÛŒØ³Øª Ø­Ù‚ÙˆÙ‚ Ú©Ø§Ø±Ù…Ù†Ø¯Ø§Ù†:\n';
            report += '--------------------\n';
            
            employees.forEach((employee, index) => {
                let salary = 0;
                
                if (employee.salary.type === 'fixed') {
                    salary = employee.salary.amount;
                } else if (employee.salary.type === 'hourly') {
                    const monthlyHours = workingDays * 8;
                    salary = employee.salary.rate * monthlyHours;
                }
                
                report += `${index + 1}. ${employee.name} - ${employee.position}: ${salary.toLocaleString()} ØªÙˆÙ…Ø§Ù†\n`;
            });
            
            alert(report);
        }

        // # ØªÙˆØ§Ø¨Ø¹ Ú©Ù…Ú©ÛŒ
        function getDepartmentName(dept) {
            const departments = {
                'sales': 'ÙØ±ÙˆØ´',
                'marketing': 'Ø¨Ø§Ø²Ø§Ø±ÛŒØ§Ø¨ÛŒ',
                'development': 'ØªÙˆØ³Ø¹Ù‡',
                'finance': 'Ù…Ø§Ù„ÛŒ',
                'hr': 'Ù…Ù†Ø§Ø¨Ø¹ Ø§Ù†Ø³Ø§Ù†ÛŒ',
                'support': 'Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ',
                'other': 'Ø³Ø§ÛŒØ±'
            };
            return departments[dept] || 'Ø³Ø§ÛŒØ±';
        }

        function getStatusName(status) {
            const statuses = {
                'active': 'ÙØ¹Ø§Ù„',
                'probation': 'Ø¯ÙˆØ±Ù‡ Ø¢Ø²Ù…Ø§ÛŒØ´ÛŒ',
                'intern': 'Ú©Ø§Ø±Ø¢Ù…ÙˆØ²'
            };
            return statuses[status] || 'Ù†Ø§Ù…Ø´Ø®Øµ';
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('fa-IR');
        }

        // # Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
        function saveEmployees() { 
            try {
                localStorage.setItem('employees', JSON.stringify(employees)); 
            } catch(e) {
                console.error('Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ù…Ù†Ø¯Ø§Ù†:', e);
                showErrorMessage('Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§. ÙØ¶Ø§ÛŒ Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù¾Ø± Ø´Ø¯Ù‡ Ø§Ø³Øª.');
            }
        }

        // # Ø³ÛŒØ³ØªÙ… Ù„ÙˆØ¯ÛŒÙ†Ú¯
        function addLoading(element) {
            element.classList.add('loading');
            setTimeout(() => {
                element.classList.remove('loading');
            }, 1500);
        }

        // # Ù¾ÛŒØ§Ù… Ù…ÙˆÙÙ‚ÛŒØª
        function showSuccessMessage(message) {
            const existingMessage = document.querySelector('.success-message');
            if (existingMessage) { existingMessage.remove(); }
            
            const successMessage = document.createElement('div');
            successMessage.className = 'success-message';
            successMessage.textContent = message;
            
            const content = document.querySelector('.content');
            content.insertBefore(successMessage, content.firstChild);
            
            setTimeout(() => { 
                if (successMessage.parentElement) { 
                    successMessage.remove(); 
                } 
            }, 4000);
        }

        // # Ù¾ÛŒØ§Ù… Ø®Ø·Ø§
        function showErrorMessage(message) {
            const errorMessage = document.createElement('div');
            errorMessage.className = 'success-message';
            errorMessage.style.background = 'var(--danger)';
            errorMessage.textContent = message;
            
            const content = document.querySelector('.content');
            content.insertBefore(errorMessage, content.firstChild);
            
            setTimeout(() => { 
                if (errorMessage.parentElement) { 
                    errorMessage.remove(); 
                } 
            }, 4000);
        }

        // # ÙˆÛŒÚ˜Ú¯ÛŒ Ø¬Ø¯ÛŒØ¯: ØªØ­Ù„ÛŒÙ„ Ú¯Ø±Ø¯Ø´ Ù…Ø§Ù„ÛŒ Ø­Ù‚ÙˆÙ‚
        function getSalaryTrendAnalysis() {
            if (employees.length === 0) return null;
            
            const totalSalary = employees.reduce((sum, emp) => {
                if (emp.salary.type === 'fixed') {
                    return sum + emp.salary.amount;
                } else if (emp.salary.type === 'hourly') {
                    return sum + (emp.salary.rate * 176); // 22 Ø±ÙˆØ² Ã— 8 Ø³Ø§Ø¹Øª
                }
                return sum;
            }, 0);
            
            const avgSalary = totalSalary / employees.length;
            const highestSalary = Math.max(...employees.map(emp => 
                emp.salary.type === 'fixed' ? emp.salary.amount : emp.salary.rate * 176
            ));
            
            return {
                totalSalary: Math.round(totalSalary),
                avgSalary: Math.round(avgSalary),
                highestSalary: Math.round(highestSalary),
                salaryRange: 'ØªØ­Ù„ÛŒÙ„ Ú©Ø§Ù…Ù„ Ø­Ù‚ÙˆÙ‚ Ø³Ø§Ø²Ù…Ø§Ù†'
            };
        }

        // # ÙˆÛŒÚ˜Ú¯ÛŒ Ø¬Ø¯ÛŒØ¯: Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ Ù‡Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ù¾Ø±Ø³Ù†Ù„ÛŒ
        function forecastPersonnelCosts(months = 12) {
            const currentCost = getSalaryTrendAnalysis().totalSalary;
            const growthRate = 0.1; // Ù†Ø±Ø® Ø±Ø´Ø¯ 10% Ø¯Ø± Ø³Ø§Ù„
            
            const forecast = [];
            for (let i = 1; i <= months; i++) {
                const monthlyCost = currentCost * Math.pow(1 + growthRate/12, i);
                forecast.push({
                    month: i,
                    cost: Math.round(monthlyCost),
                    growth: Math.round((monthlyCost - currentCost) / currentCost * 100)
                });
            }
            
            return forecast;
        }
    </script>
</body>
</html>