#!/usr/bin/env python3
# -*- coding: utf-8 -*-

import requests
import json
import sys
import time

def send_instant_notification():
    message = """
---
ูพูุชูุฑู ุญุณุงุจุฏุงุฑ ู ุญุณุงุจุฑุณ ูุง ฺฉ ุฑุงูโุญู ฺฉุงูู ุจุฑุง ูุฏุฑุช ูุงูุ ุญุณุงุจุฑุณ ู ุงููุฑ ุชููุฏ ฺฉุณุจโูฺฉุงุฑ ุดูุงุณุช.
ุจุง ุงู ุณุณุชู ูโุชูุงูุฏ ุจูโุตูุฑุช ุฏูู ู ููุดููุฏ ุฏุฑุขูุฏูุงุ ูุฒููโูุงุ ููุฌูุฏ ุงูุจุงุฑุ ูุงฺฉุชูุฑูุง ู ฺฏุฑุฏุด ุญุณุงุจโูุง ุฑุง ฺฉูุชุฑู ฺฉูุฏ.

ูฺฺฏโูุง ุงุตู:

* ุญุณุงุจุฏุงุฑ ุฎูุฏฺฉุงุฑ ู ุฏูู
* ูุฏุฑุช ุงููุฑ ุชููุฏ ู ููุงุฏ ุงููู
* ฺฏุฒุงุฑุดโฺฏุฑ ูุงู ูุญุธูโุง ู ุญุฑููโุง
* ุญุณุงุจุฑุณ ููุดููุฏ ู ุจุฑุฑุณ ุฎุทุงูุง ูุงู
* ูุญุท ฺฉุงุฑุจุฑูพุณูุฏ ู ูพุดุชุจุงู ุณุฑุน

ุจุง ุงู ูพูุชูุฑูุ ููู ฺุฒ ุฏุฑ ฺฉโุฌุง ุฌูุน ุดุฏู ุชุง ูุฏุฑุช ูุงู ุดูุง ุณุงุฏูโุชุฑุ ุณุฑุนโุชุฑ ู ุฏููโุชุฑ ุงุฒ ููุดู ุจุงุดุฏ.
---
"""
    
    notification_data = {
        "title": "๐ ูุนุฑู ูพูุชูุฑู ุญุณุงุจุฏุงุฑ ูพุดุฑูุชู",
        "message": message,
        "type": "system_introduction", 
        "timestamp": "1403/05/15"
    }
    
    server_url = "http://localhost:5000"
    
    print("โก ุฏุฑ ุญุงู ุงุฑุณุงู ููุฑ ุงุนูุงู...")
    
    try:
        response = requests.post(
            f"{server_url}/api/send-notification",
            json=notification_data,
            headers={"Content-Type": "application/json"},
            timeout=3  # ุฒูุงู ุงูุชุธุงุฑ ฺฉูุชุงู
        )
        
        if response.status_code == 200:
            print("โ ุงุนูุงู ููุฑ ุงุฑุณุงู ุดุฏ!")
            return True
        else:
            print(f"โ ุฎุทุง: {response.status_code}")
            return False
            
    except Exception as e:
        print(f"โ๏ธ ุฎุทุง: {e}")
        return False

if __name__ == "__main__":
    # ุงุฑุณุงู ุณุฑุน ุจุฏูู ุชุงุฎุฑ
    success = send_instant_notification()
    
    if success:
        print("๐ ุงุนูุงู ุฏุฑ ฺฉูุชุฑ ุงุฒ 1 ุซุงูู ุงุฑุณุงู ุดุฏ!")
    else:
        print("๐ ุงุฑุณุงู ูุงูููู")
    
    # ุจุณุชู ุณุฑุน ุจุฑูุงูู
    sys.exit(0 if success else 1)
