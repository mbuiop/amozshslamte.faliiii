#!/usr/bin/env python3
# -*- coding: utf-8 -*-

import requests
import json
import sys
import time

def send_accounting_notification():
    message = """
---
ูพูุชูุฑู ุญุณุงุจุฏุงุฑ ู ุญุณุงุจุฑุณ ูุง ฺฉ ุฑุงูโุญู ฺฉุงูู ุจุฑุง ูุฏุฑุช ูุงูุ ุญุณุงุจุฑุณ ู ุงููุฑ ุชููุฏ ฺฉุณุจโูฺฉุงุฑ ุดูุงุณุช.
ุจุง ุงู ุณุณุชู ูโุชูุงูุฏ ุจูโุตูุฑุช ุฏูู ู ููุดููุฏ ุฏุฑุขูุฏูุงุ ูุฒููโูุงุ ููุฌูุฏ ุงูุจุงุฑุ ูุงฺฉุชูุฑูุง ู ฺฏุฑุฏุด ุญุณุงุจโูุง ุฑุง ฺฉูุชุฑู ฺฉูุฏ.

ูฺฺฏโูุง ุงุตู:

* ุญุณุงุจุฏุงุฑ ุฎูุฏฺฉุงุฑ ู ุฏูู
* ูุฏุฑุช ุงููุฑ ุชููุฏ ู ููุงุฏ ุงููู
* ฺฏุฒุงุฑุดโฺฏุฑ ูุงู ูุญุธูโุง ู ุญุฑููโุง
* ุญุณุงุจุฑุณ ููุดููุฏ ู ุจุฑุฑุณ ุฎุทุงูุง ูุงู
* ูุญุท ฺฉุงุฑุจุฑูพุณูุฏ ู ูพุดุชุจุงู ุณุฑุน

ุจุง ุงู ูพูุชูุฑูุ ููู ฺุฒ ุฏุฑ ฺฉโุฌุง ุฌูุน ุดุฏู ุชุง ูุฏุฑุช ูุงู ุดูุง ุณุงุฏูโุชุฑุ ุณุฑุนโุชุฑ ู ุฏููโุชุฑ ุงุฒ ููุดู ุจุงุดุฏ.
---
"""
    
    notification_data = {
        "title": "๐ ูุนุฑู ูพูุชูุฑู ุญุณุงุจุฏุงุฑ ูพุดุฑูุชู",
        "message": message,
        "type": "system_introduction",
        "timestamp": "1403/05/15"
    }
    
    server_url = "http://localhost:5000"
    
    try:
        print(f"๐ ุฏุฑ ุญุงู ุขุฒูุงุด ุงุชุตุงู ุจู: {server_url}")
        
        response = requests.post(
            f"{server_url}/api/send-notification",
            json=notification_data,
            headers={"Content-Type": "application/json"},
            timeout=5
        )
        
        if response.status_code == 200:
            print(f"โ ุงุนูุงู ุจุง ููููุช ุงุฑุณุงู ุดุฏ ุจู: {server_url}")
            print("๐ข ูพุงู ูุนุฑู ูพูุชูุฑู ุญุณุงุจุฏุงุฑ ุงุฑุณุงู ุดุฏ!")
            return True
        else:
            print(f"โ ุณุฑูุฑ ูพุงุณุฎ ุฏุงุฏ ุงูุง ุฎุทุง: {response.status_code}")
            return False
            
    except requests.exceptions.ConnectionError:
        print(f"โ ุณุฑูุฑ ุฏุฑ ุฏุณุชุฑุณ ูุณุช: {server_url}")
    except requests.exceptions.Timeout:
        print(f"โฐ ุฒูุงู ุงูุชุธุงุฑ ุจู ูพุงุงู ุฑุณุฏ: {server_url}")
    except Exception as e:
        print(f"โ๏ธ ุฎุทุง ุฏุฑ ุงุชุตุงู ุจู {server_url}: {e}")
    
    return False

if __name__ == "__main__":
    print("๐ ุฏุฑ ุญุงู ุงุฑุณุงู ุงุนูุงู ูุนุฑู ูพูุชูุฑู ุญุณุงุจุฏุงุฑ...")
    print("=" * 60)
    
    success = send_accounting_notification()
    
    if success:
        print("\n๐ ุนููุงุช ุจุง ููููุช ุงูุฌุงู ุดุฏ!")
        print("๐ ูพุงู ูุนุฑู ูพูุชูุฑู ุญุณุงุจุฏุงุฑ ุงุฑุณุงู ฺฏุฑุฏุฏ")
    else:
        print("\n๐ ุงุฑุณุงู ุงุนูุงู ูุงูููู ุจูุฏ")
        
    print("\nโน๏ธ  ุจุฑูุงูู ุจู ูพุงุงู ุฑุณุฏ")
